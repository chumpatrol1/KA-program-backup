<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title> Squarius Bazooka</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
<style>
        body {
            padding: 20px;
        }
        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1> Squarius Bazooka</h1>
    <div id="sample-live-editor"></div>
    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>
    <script>
    var outputUrl = "../output.html";
var code = "/** Squarius Bazooka by David Elijah de Siqueira Campos McLaughlin\nOriginal size(400, 400);\nOriginally Created on 2015-05-31T17:45:38Z by kaid_976851263300560061760577\nLast Edited: 2015-05-31T17:45:38Z\nVotes/Spinoffs: 1/0\nOriginally Created: 2015-06-01T18:28:07Z from origin 4955238702383104 with similarity of 0.8620081344636644\nOriginal Link: https://www.khanacademy.org/computer-programming/squarius-bazooka/5923254789341184\nRetrieved On: 07-Nov-2022 (17:07:54.360913)**/\
";

code = code + "\n/**\n * Wow! Thanks for all the support!\n * \n * Thanks to Bob Lyon for helping with enemy splicing and tips for my future technique. \n * Thanks to Bob Lyon for minimizing CPU usage with this game, using his collisions and interiors program\n * \n * Doesn\'t use localStorage. Saves things in one window session. If you reload, all progress is lost! (Not yet)\n * \n * LOOKING FOR GUN MAKERS: Post in tips & thanks with this formatting\nvar shotgun = {\n    damage: 20,//Damage per bullet\n    range: 80,//How many pixels it can go forward\n    repeat: 70,//How many frames it takes to reload\n    ammo: 50,//Initial ammo\n    maxAmmo: 50,//Max ammo\n    bullets: 5,//Bullets fired at a time\n    speed: 10,//Speed of bullets\n    accuracy: 0.3,//Spray of bullets-the lower, the more focused the firing is\n    name: \"shotgun\",//Name of gun\n    select: 51,//Keycode for selection (not necessary)\n    unlocked: false//Whether you start out with it unlocked (not necessary)\n};\n\n * FEATURE REQUESTS: \n * Fast enemies\n * Shooting enemies\n * Infinite waves\n * More upgrades\n * \n * Releasing full version soon\n * \n * Thanks for playing!\n * \n**/\nvar isBetween = function(c, a, b) {\n    return (a - c) * (b - c) <= 0;\n};\nvar isInCircle = function(x, y, cx, cy, diam) {\n    var dx = x - cx,\n        dy = y - cy;\n    return dx*dx + dy*dy <= diam*diam/4;\n};\nvar lineCircleCollide = function(x1, y1, x2, y2, cx, cy, diam) {\n    var m = (y2 - y1) / (x2 - x1);  /* slope */\n    if (abs(m) > 1024) {\n        return lineCircleCollide(y1, x1, y2, x2, cy, cx, diam);\n    }\n    if (isInCircle(x2, y2, cx, cy, diam)) {\n        /* The segment may be entirely inside the circle */\n        return true;\n    }\n    x1 -= cx;\n    x2 -= cx;\n    y1 -= cy;\n    y2 -= cy;\n    var r = diam*diam/4,  /* radius squared */\n        k = y1 - (m * x1),  /* So, y = m*x + k */\n        a = (1 + m*m)/r,\n        b = 2*m*k/r,\n        c = k*k/r - 1,\n        discrim = b*b - 4*a*c;\n    if (discrim < 0) {\n        return false;  /* No intersection */\n    }\n    discrim = sqrt(discrim);\n    a *= 2;\n    return (isBetween((-b - discrim)/a, x1, x2)) ||\n        isBetween((-b + discrim)/a, x1, x2);\n};\n\nvar enemywaves = [0, 25, 50, 20, 15, 30, 50, 60, 70, 100];\nvar speedywaves = [0, 0, 0, 0, 10, 15, 20, 25, 35, 50];\nvar policewaves = [0,0,0,0,0,0,5,15,25,40];\nvar stage = 0;\nvar wave = 0;\n\nvar drops = [\"maxhealth\"];\n\nvar news = [\"This is the demo version\", \"The shotgun is good for clusters of enemies\", \"\\\"I love it. Great game. Fun. Addictive. Awesome!\\\"\", \'\\\"sweet\\\"\', \"\\\"The best game ever keep on working on this amazing game\\\"\", \"\\\"Wow, this is fun!\\\"\", \"If you want, you can come up with a gun and post it in the T&T. It may come in the full version!\", \"NO FLAGS!!! (yet)\"];\nvar wn = floor(random(0, news.length-0.1));\n//Function declarations\nvar player1;\n\nvar spawns = [new PVector(0, -400), new PVector(0, 400), new PVector(400, 0), new PVector(-400, 0)];\n\nvar Key = {\n    space: 32,\n    w: 87,\n    a: 65,\n    s: 83,\n    d: 68\n};\n\nvar keys = [];\nvar keyPressed = function() {\n    keys[keyCode]=true;\n};\nvar keyReleased = function() {\n    keys[keyCode]=false;\n};\n\nvar pistol = {\n    damage: 10,\n    range: 150,\n    repeat: 40,\n    ammo: Infinity,\n    maxAmmo: Infinity,\n    bullets: 1,\n    speed: 30,\n    //The lower the better\n    accuracy: 0.05,\n    name: \"pistol\",\n    select: 49,\n    unlocked: true\n};\nvar uzi = {\n    damage: 3,\n    range: 250,\n    repeat: 3,\n    ammo: 100,\n    maxAmmo: 100,\n    bullets: 1,\n    speed: 50,\n    //The lower the better\n    accuracy: 0.2,\n    name: \"uzi\",\n    select: 50,\n    unlocked: false\n};\nvar shotgun = {\n    damage: 20,\n    range: 80,\n    repeat: 70,\n    ammo: 50,\n    maxAmmo: 50,\n    bullets: 5,\n    speed: 10,\n    //The lower the better\n    accuracy: 0.3,\n    name: \"shotgun\",\n    select: 51,\n    unlocked: false\n};\nvar bazooka = {\ndamage: 50,\nrange: 200,\nrepeat: 150,\nammo: 10,\nmaxAmmo: 10,\nbullets: 1,\nspeed: 20,\naccuracy:0.3,\nname: \"bazooka\",\nselect: 52,\nunlocked: false\n};\nvar gun = pistol;\nvar enemyHealth = 15;\nvar speedyHealth=5;\nvar policeHealth=30;\nvar kills = 0;\nvar enemies = [];\nvar bullets = [];\nvar crates = [];\nvar message = \"\";\nvar msgTime = 200;\nvar bullet = function(bx, by, vel) {\n    this.start = new PVector(bx, by);\n    this.pos = new PVector(bx, by);\n    this.lastpos = this.pos;\n    this.vel = vel;\n    this.hit = false;\n};\nbullet.prototype.update = function() {\n    if (this.hit === false) {\n        for (var z = 0; z < enemies.length; z++) {\n            if (lineCircleCollide(this.pos.x, this.pos.y, this.pos.x+this.vel.x, this.pos.y+this.vel.y, enemies[z].x, enemies[z].y, 10, 10)){\n                enemies[z].health -= gun.damage;\n                if (enemies[z].health <= 0) {\n                    kills++;\n                    enemies.splice(z, 1);\n                }\n                return \"dead\";\n            }\n        }\n    }\n    this.pos.add(this.vel);\n    if (dist(this.pos.x, this.pos.y, this.start.x, this.start.y) > gun.range||this.hit === true) {\n        return \"dead\";\n    }\n    pushStyle();\n    noStroke();\n    stroke(92, 92, 92);\n    line(this.pos.x, this.pos.y, this.pos.x-this.vel.x, this.pos.y-this.vel.y);\n    popStyle();\n};\nvar rpg = function(bx,by,vel){\n    this.start=new PVector(bx,by);\n    this.pos = new PVector(bx, by);\n    this.lastpos = this.pos;\n    this.vel = vel;\n    this.hit = false;\n};\nrpg.prototype.update = function(){\n     if (this.hit === false) {\n        for (var z = 0; z < enemies.length; z++) {\n            if (lineCircleCollide(this.pos.x, this.pos.y, this.pos.x+this.vel.x, this.pos.y+this.vel.y, enemies[z].x, enemies[z].y, 100, 100)){\n                enemies[z].health -= gun.damage;\n                if (enemies[z].health <= 0) {\n                    kills++;\n                    enemies.splice(z, 1);\n                }\n                return \"dead\";\n            }\n        }\n    }\n    this.pos.add(this.vel);\n    if (dist(this.pos.x, this.pos.y, this.start.x, this.start.y) > gun.range||this.hit === true) {\n        return \"dead\";\n    }\n    pushStyle();\n    noStroke();\n    stroke(92, 92, 92);\n    fill(124);\n    ellipse(this.pos.x, this.pos.y, this.pos.x-this.vel.x, this.pos.y-this.vel.y);\n    popStyle();\n};\nvar Enemy = function(x, y, target) {\n    this.x = x;\n    this.y = y;\n    this.vel = new PVector(0, 0);\n    this.target = target;\n    this.health = enemyHealth;\n    this.toMove = new PVector(0, 0);\n};\nEnemy.prototype.update = function() {\n    this.vel = new PVector(0, 0);\n    //Instruct movement\n    if (this.x < this.target.pos.x) {\n        this.vel.x=1;\n    }\n    if (this.x > this.target.pos.x) {\n        this.vel.x=-1;\n    }\n    if (this.y < this.target.pos.y) {\n        this.vel.y=1;\n    }\n    if (this.y > this.target.pos.y) {\n        this.vel.y=-1;\n    }\n    //Keep enemies from being on top of one another\n    for (var i = 0; i < enemies.length; i ++) {\n        if (dist(this.x, this.y, enemies[i].x, enemies[i].y)<10) {\n            if (this.x < enemies[i].x) {\n                this.x = enemies[i].x-10;\n            }\n            if (this.x > enemies[i].x) {\n                this.x = enemies[i].x+10;\n            }\n            if (this.y < enemies[i].y) {\n                this.y = enemies[i].y-10;\n            }\n            if (this.y > enemies[i].y) {\n                this.y = enemies[i].y+10;\n            }\n        }\n    }\n    this.x+=this.vel.x;\n    this.y+=this.vel.y;\n    this.x = constrain(this.x, -395, 395);\n    this.y = constrain(this.y, -395, 395);\n    fill(255, 0, 0);\n    ellipse(this.x, this.y, 10, 10);\n    if (this.x < player1.pos.x+25 && this.x+5 > player1.pos.x && this.y < player1.pos.y+25&&this.y+5>player1.pos.y) {\n        player1.healthtimer = 0;\n        player1.health--;\n    }\n};\nvar Speedy = function(x,y,target) {\n    this.x=x;\n    this.y = y;\n    this.vel = new PVector(0, 0);\n    this.target = target;\n    this.health = speedyHealth;\n    this.toMove = new PVector(0, 0);\n};\nSpeedy.prototype.update= function() {\n    this.vel= new PVector(0,0);\n    //Instruct movement\n    if (this.x < this.target.pos.x) {\n        this.vel.x=1.25;\n    }\n    if (this.x > this.target.pos.x) {\n        this.vel.x=-1.25;\n    }\n    if (this.y < this.target.pos.y) {\n        this.vel.y=1.25;\n    }\n    if (this.y > this.target.pos.y) {\n        this.vel.y=-1.25;\n    }\n       //Keep enemies from being on top of one another\n    for (var i = 0; i < enemies.length; i ++) {\n        if (dist(this.x, this.y, enemies[i].x, enemies[i].y)<10) {\n            if (this.x < enemies[i].x) {\n                this.x = enemies[i].x-10;\n            }\n            if (this.x > enemies[i].x) {\n                this.x = enemies[i].x+10;\n            }\n            if (this.y < enemies[i].y) {\n                this.y = enemies[i].y-10;\n            }\n            if (this.y > enemies[i].y) {\n                this.y = enemies[i].y+10;\n            }\n        }\n    }\n    this.x+=this.vel.x;\n    this.y+=this.vel.y;\n    this.x = constrain(this.x, -395, 395);\n    this.y = constrain(this.y, -395, 395);\n    fill(255, 124, 0);\n    ellipse(this.x, this.y, 10, 10);\n    if (this.x < player1.pos.x+25 && this.x+5 > player1.pos.x && this.y < player1.pos.y+25&&this.y+5>player1.pos.y) {\n        player1.healthtimer = 0;\n        player1.health--;\n    }};\nvar Police = function(x,y,target){\n    this.x=x;\n    this.y = y;\n    this.vel = new PVector(0, 0);\n    this.target = target;\n    this.health = policeHealth;\n    this.toMove = new PVector(0, 0);\n    };\nPolice.prototype.update= function() {\n    this.vel= new PVector(0,0);\n    //Instruct movement\n    if (this.x < this.target.pos.x) {\n        this.vel.x=0.75;\n    }\n    if (this.x > this.target.pos.x) {\n        this.vel.x=-0.75;\n    }\n    if (this.y < this.target.pos.y) {\n        this.vel.y=0.75;\n    }\n    if (this.y > this.target.pos.y) {\n        this.vel.y=-0.75;\n    }\n       //Keep enemies from being on top of one another\n    for (var i = 0; i < enemies.length; i ++) {\n        if (dist(this.x, this.y, enemies[i].x, enemies[i].y)<10) {\n            if (this.x < enemies[i].x) {\n                this.x = enemies[i].x-10;\n            }\n            if (this.x > enemies[i].x) {\n                this.x = enemies[i].x+10;\n            }\n            if (this.y < enemies[i].y) {\n                this.y = enemies[i].y-10;\n            }\n            if (this.y > enemies[i].y) {\n                this.y = enemies[i].y+10;\n            }\n        }\n    }\n    this.x+=this.vel.x;\n    this.y+=this.vel.y;\n    this.x = constrain(this.x, -395, 395);\n    this.y = constrain(this.y, -395, 395);\n    fill(255, 255, 0);\n    ellipse(this.x, this.y, 10, 10);\n    if (this.x < player1.pos.x+25 && this.x+5 > player1.pos.x && this.y < player1.pos.y+25&&this.y+5>player1.pos.y) {\n        player1.healthtimer = 0;\n        player1.health--;\n    }};\nvar Crate = function() {\n    this.x = random(-390, 390);\n    this.y = random(-390, 390);\n    this.drop = round(random(0, drops.length-1));\n    this.time = 4500;\n};\nCrate.prototype.update = function() {\n    this.time --;\n    if (player1.pos.x+15 > this.x && player1.pos.x-15 < this.x && player1.pos.y+15>this.y&&player1.pos.y-15<this.y) {\n        return drops[this.drop];\n    }\n    fill(0, this.time/20+50, 0);\n    if (this.time < 0) {\n        return \"delete\";\n    }\n    rect(this.x, this.y, 10, 10);\n};\n\nvar Player = function(controls) {\n    this.pos = new PVector(0, 0);\n    this.vel = new PVector(0, 0);\n    this.rot = 0;\n    this.controls = controls;\n    this.shotCount = 40;\n    this.idleCount = 0;\n    this.health = 1000;\n    this.maxHealth = 1000;\n    this.healthtimer = 0;\n    this.message = \"\";\n    this.msgtime = 300;\n};\nPlayer.prototype.update = function() {\n    this.healthtimer++;\n    if (this.health > 0) {\n        if (round(random(0, 500)) === 24) {\n            crates.push(new Crate());\n        }\n        //Adding new items to game\n        if (kills >= 5 && uzi.unlocked === false) {\n            drops.push(\"uzi\");\n            msgTime = 200;\n            message = \"***UZI UNLOCKED***\\nKEY 2\";\n            uzi.unlocked = true;\n        }\n        if (stage > 2 && shotgun.unlocked === false) {\n            drops.push(\"shotgun\");\n            msgTime = 200;\n            message = \"***SHOTGUN UNLOCKED***\\nKEY 3\";\n            shotgun.unlocked = true;\n        }\n        if (stage === 4 && pistol.damage !== 25) {\n            msgTime = 200;\n            message = \"***Pistol damage upgrade!***\";\n            pistol.name = \"pistol+\";\n            pistol.damage = 25;\n        }\n        if (kills > 50 && enemyHealth < 25) {\n            msgTime = 200;\n            message = \"***Enemies tougher!***\";\n            enemyHealth = 25;\n        }\n        if (kills > 100 && uzi.damage <= 3) {\n            msgTime = 200;\n            message = \"***Uzi damage upgrade!***\";\n            uzi.name = \"uzi+\";\n            uzi.damage = 4;\n        }\n        if(stage===7&&!bazooka.unlocked){\n            msgTime = 200;\n            message = \"***Bazooka Unlocked!!!***\";\n            bazooka.unlocked= true;\n        }\n        if (this.healthtimer >=150 && this.health < 1000) {\n            this.health += 0.02;\n        }\n        //Reset velocity\n        this.vel = new PVector(0, 0);\n        if (keys[this.controls[3]]||keys[RIGHT]) {\n            this.vel.x=2;\n            this.rot = 90;\n        }\n        if (keys[this.controls[1]]||keys[LEFT]) {\n            this.vel.x=-2;\n            this.rot = -90;\n        }\n        if (keys[this.controls[0]]||keys[UP]) {\n            this.vel.y = -2;\n            if (keys[this.controls[1]]||keys[LEFT]){\n                this.rot = -45;\n            }\n            else if (keys[this.controls[3]]||keys[RIGHT]){\n                this.rot = 45;\n            }\n            else {\n                this.rot = 0;\n            }\n        }\n        if (keys[this.controls[2]]||keys[DOWN]) {\n            this.vel.y = 2;\n            if (keys[this.controls[1]]||keys[LEFT]){\n                this.rot = -135;\n            }\n            else if (keys[this.controls[3]]||keys[RIGHT]){\n                this.rot = 135;\n            }\n            else {\n                this.rot = 180;\n            }\n        }\n        //Selecting guns\n        if (keys[pistol.select]) {\n            gun = pistol;\n        }\n        if (uzi.unlocked === true) {\n            if (keys[uzi.select]) {\n                gun = uzi;\n            }\n        }\n        if (shotgun.unlocked === true) {\n            if (keys[shotgun.select]) {\n                gun = shotgun;\n            }\n        }\n        if (bazooka.unlocked === true) {\n            if (keys[bazooka.select]) {\n                gun = bazooka;\n            }\n        }\n        //Fire gun\n        if (keys[this.controls[4]]&&gun!==bazooka) {\n            for (var i = 0; i < gun.bullets; i ++) {\n                if (this.shotCount % gun.repeat === 1 && gun.ammo > 0) {\n                    gun.ammo--;\n                    this.idleCount = 0;\n                    bullets.push(new bullet(this.pos.x, this.pos.y, new PVector(random(sin(this.rot)-gun.accuracy, sin(this.rot)+gun.accuracy)*gun.speed, random(-cos(this.rot)-gun.accuracy, -cos(this.rot)+gun.accuracy)*gun.speed)));\n                }\n            }\n            this.shotCount++;\n        }\n        else {\n            this.idleCount++;\n            if (this.idleCount >= gun.repeat) {\n                this.shotCount = gun.repeat;\n                this.idleCount = 0;\n            }\n    }\n    if(keys[this.controls[4]]&&gun===bazooka) {\n            for (var i = 0; i < gun.bullets; i ++) {\n                if (this.shotCount % gun.repeat === 1 && gun.ammo > 0) {\n                    gun.ammo--;\n                    this.idleCount = 0;\n                    bullets.push(new rpg(this.pos.x, this.pos.y, new PVector(random(sin(this.rot)-gun.accuracy, sin(this.rot)+gun.accuracy)*gun.speed, random(-cos(this.rot)-gun.accuracy, -cos(this.rot)+gun.accuracy)*gun.speed)));\n                }\n            }\n            this.shotCount++;\n        }\n        //If gun is out of ammo, switch to pistol\n        if (gun.ammo <=0) {\n            gun = pistol;\n        }\n        \n        this.health = constrain(this.health, 0, this.maxHealth);\n        this.pos.x = constrain(this.pos.x, -387, 387);\n        this.pos.y = constrain(this.pos.y, -387, 387);\n        //Display stats\n        pushStyle();\n        textAlign(LEFT, TOP);\n        textSize(14);\n        fill(255, 255, 255);\n        text(\"Bullets: \"+gun.ammo, 10, 10);\n        text(\"Current weapon: \"+gun.name, 10, 25);\n        textAlign(CENTER, TOP);\n        text(\"Kills: \"+kills, 200, 17.5);\n        textAlign(RIGHT, TOP);\n        text(\"Health: \"+round(this.health), 390, 10);\n        text(\"Enemies left: \"+enemies.length, 390, 25);\n        text(\"Stage: \"+stage,390,40);\n        popStyle();\n        textSize(12);\n        msgTime--;\n        fill(255, 255, 255, msgTime);\n        text(message, 200, 380);\n        \n        pushMatrix();\n        //Graphics related to player position\n        translate(200-this.pos.x, 200-this.pos.y);\n        for (var i in bullets) {\n            bullets[i].update();\n            if (bullets[i].update()===\"dead\") {\n                bullets.splice(i, 1);\n            }\n        }\n        for (var i in enemies) {\n            enemies[i].update();\n        }\n        //Crates\n        for (var i = 0; i < crates.length; i ++) {\n            crates[i].update();\n            if (crates[i].update()===\"2health\") {\n                this.health*=2;\n                crates.splice(i, 1);\n                message=\"X2 health!\";\n                msgTime = 200;\n            }\n            else if (crates[i].update()===\"maxhealth\") {\n                this.health = this.maxHealth;\n                crates.splice(i, 1);\n                message=\"Full health!\";\n                msgTime = 200;\n            }\n            else if (crates[i].update()===\"uzi\") {\n                uzi.ammo = uzi.maxAmmo;\n                crates.splice(i, 1);\n                message=\"Uzi ammo!\";\n                msgTime = 200;\n            }\n            else if (crates[i].update()===\"shotgun\") {\n                shotgun.ammo = shotgun.maxAmmo;\n                crates.splice(i, 1);\n                message=\"Shotgun ammo!\";\n                msgTime = 200;\n            }\n            else if (crates[i].update()===\"delete\") {\n                crates.splice(i, 1);\n            }\n        }\n        noFill();\n        strokeWeight(5);\n        rect(-400, -400, 800, 800);\n        //Player\n        translate(this.pos.x, this.pos.y);\n        rotate(this.rot);\n        strokeWeight(2);\n        rect(-10, -10, 20, 20);\n        fill(255, 0, 0);\n        rect(-10, -10, 20, 5);\n        popMatrix();\n        this.pos.add(this.vel);\n    }\n};\nvar player1 = new Player([Key.w, Key.a, Key.s, Key.d, Key.space]);\n\nvar newWave = function(s) {\n    for (var i = 0; i < enemywaves[s]; i++) {\n        enemies.push(new Enemy(random(spawns[i%4].x-10, spawns[i%4].x+10), random(spawns[i%4].y-10, spawns[i%4].y+10), player1));\n    }\n    for (var i = 0; i<speedywaves[s]; i++) {\n        enemies.push(new Speedy(random(spawns[i%4].x-10, spawns[i%4].x+10), random(spawns[i%4].y-10, spawns[i%4].y+10),player1));\n    }\n    for (var i = 0; i<policewaves[s]; i++) {\n        enemies.push(new Police(random(spawns[i%4].x-10, spawns[i%4].x+10), random(spawns[i%4].y-10, spawns[i%4].y+10),player1));\n    }\n};\n\nvar state = \"logo\";\nvar logo = function(name) {\n    if (!Program.logo) {\n        background(0, 0, 0);\n        fill(255, 255, 255);\n        textAlign(CENTER,CENTER);\n        textFont(createFont(\"century gothic\"), 40);\n        pushMatrix();\n        translate(200, 200);\n        if (sin(frameCount+100)>=0) {\n            scale(sin(frameCount+100), 1);\n            text(\"π\'d πper\", 0, 0);\n        }\n        else {\n            scale(-sin(frameCount+100), 1);\n            text(\"presents\", 0, 0);\n        }\n        popMatrix();\n        textSize(20);\n        if (frameCount >= 200) {\n            text(name, 200, 300);\n        }\n        if (frameCount > 200) {\n            fill(0, 0, 0, frameCount-200);\n            rect(-1, -1, width, height);\n        }\n        if (frameCount-200 > 200) {\n            state = \"menu\";\n            Program.logo = true;\n        }\n    }\n    if (Program.logo) {\n        state = \"menu\";\n    }\n};\n\nvar impact = function(txtsize) {\n    if (txtsize) {\n        textFont(createFont(\"impact\"), txtsize);\n    }\n    else {\n        textFont(createFont(\"impact\"));\n    }\n};\ntextAlign(CENTER, CENTER);\n\nvar indev = function() {\n    impact(50);\n    background(0, 0, 0);\n    fill(255, 255, 255);\n    text(\"Coming in full\\nversion\", 200, 200);\n    impact(20);\n    text(\"Stay tuned!\", 200, 300);\n};\n\n//New wave stuff\nvar waveWait = 100;\nvar checkWave = function() {\n    if (enemies.length === 0) {\n        waveWait--;\n        if (waveWait <= 0) {\n            stage++;\n            newWave(stage);\n            waveWait = 100;\n        }\n    }\n};\n\nvar draw = function() {\n    if (state === \"logo\") {\n        logo(\"SQUARIUS\\ndemo\");\n    }\n    if (state === \"menu\") {\n        textAlign(CENTER, CENTER);\n        background(207, 207, 207);\n        \n        fill(0, 0, 0);\n        impact(40);\n        text(\"SQUARIUS\", 200, 25);\n        textSize(20);\n        text(\"square of the people\", 200, 55);\n        noFill();\n        \n        //Rotating square\n        pushMatrix();\n        translate(200, 250);\n        scale(map(sin(frameCount), -1, 1, 0.3, 1.2));\n        rotate(frameCount);\n        stroke(255, 255, 255);\n        strokeWeight(2);\n        rect(-100, -100, 200, 200);\n        rotate(-frameCount*2);\n        rect(-100, -100, 200, 200);\n        popMatrix();\n        \n        textSize(25);\n        fill(0, 0, 0);\n        text(\"BEGIN\", 100, 150);\n        text(\"HOW\", 300, 150);\n        text(\"GAME MODE\", 200, 300);\n        \n        textSize(15);\n        text(news[wn], 20, 350, 360, 40);\n    }\n    if (state === \"instructions\") {\n        textAlign(CENTER, TOP);\n        background(207);\n        fill(0, 0, 0);\n        textSize(25);\n        text(\"Welcome, Squarius!\", 200, 20);\n        textSize(15);\n        text(\"Use the arrow keys, wasd, or custom controls to move your character.\\nPress the spacebar to fire a weapon.\\nChoose your weapon with the number keys\\nGreen boxes are health packs or ammo. Collect them before they disappear!\\n\\nPistol is your starting weapon. Use it to pick off zombies.\\nUzi is effective, especially when enemies are in a line.\\nShotgun shoots multiple bullets at a time, mowing down crowds.\\n\\nMore features to come soon!\", 20, 55, 360, 360);\n        textSize(35);\n        text(\"BACK\", 200, 300);\n    }\n    if (state === \"change controls\") {\n        indev();\n    }\n    if (state === \"game\") {\n        background(0, 0, 0);\n        player1.update();\n        checkWave();\n    }\n};\n\nvar mousePressed = function() {\n    //Menu buttons\n    if (state === \"menu\") {\n        if (mouseX > 60&&mouseX<140&&mouseY>130&&mouseY<170) {\n            state = \"game\";\n        }\n        if (mouseX > 270&&mouseX<330&&mouseY>135&&mouseY<165) {\n            state = \"instructions\";\n        }\n        if (mouseX > 100&&mouseX<295&&mouseY>285&&mouseY<315) {\n            state = \"change controls\";\n        }\n    }\n    if (state === \"instructions\") {\n        if (mouseX > 160&&mouseX<240&&mouseY>298&&mouseY<338) {\n            state = \"menu\";\n        }\n    }\n    if (state === \"game\") {\n        crates.push(new Crate());\n    }\n};\n";
window.liveEditor = new LiveEditor({
                el: $("#sample-live-editor"),
                code: code,
                width: 400,
                height: 400,
                editorHeight: "80%",
                autoFocus: true,
                workersDir: "../../build/workers/",
                externalsDir: "../../build/external/",
                imagesDir: "../../build/images/",
                soundsDir: "../../sounds/",
                execFile: outputUrl,
                jshintFile: "../../build/external/jshint/jshint.js",
                newErrorExperience: true,
            });
            liveEditor.editor.on("change", function() {
                window.localStorage["test-code"] = liveEditor.editor.text();
            });
            ScratchpadAutosuggest.init(liveEditor.editor.editor);
            </script>
        </body>
        </html>
        