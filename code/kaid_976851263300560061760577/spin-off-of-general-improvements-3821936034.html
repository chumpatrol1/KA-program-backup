<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Spin-off of "General Improvements"</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
<style>
        body {
            padding: 20px;
        }
        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Spin-off of "General Improvements"</h1>
    <div id="sample-live-editor"></div>
    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>
    <script>
    var outputUrl = "../output.html";
var code = "/**Spin-off of "General Improvements" by David Elijah de Siqueira Campos McLaughlin\nOriginal size(400, 400);\nOriginally Created on 2016-03-27T23:07:45Z by kaid_976851263300560061760577\nLast Edited: 2016-03-27T23:07:45Z\nVotes/Spinoffs: 1/0\nOriginally Created: 2016-03-27T23:07:45Z from origin 3738524405 with similarity of 1.0\nOriginal Link: https://www.khanacademy.org/computer-programming/spin-off-of-general-improvements/3821936034\nRetrieved On: 07-Nov-2022 (17:07:46.732817)**/\
";

code = code + "\n/** Newest Version\n * \n * Full list of changes made by Kiwi :\n * Changed shop design\n * Added more buyable wheat farms\n * Added naming villages\n * Changed around population sign and added selected object sign\n * Changed food symbol from hot dog to apple\n * Changed look of boat and second level boat\n * \n * Today\'s changes:\n * Fixed being able to change your name all the time\n * Fixed using enter on your village name and stuffing it up\n * Fixed boat reverting to old image when going backwards\n * New graphics for ship voyages.\n * Added new possible ship voyage.\n * Fixed not being able to move or upgrade Town Hall.\n * Fixed not being able to upgrade sailboat.\n \n * \n * First On The Hotlist!!!\n * \n * Thanks for 100 Votes!!!!!\n * \nClick to select a building then use arrow keys to move it!\nReidAlexander has helped me very much.\nUpgrade your money production with the gray button at bottom right.\nNot finished. I will keep working on it.\nClick when you see a yellow pixel to harvest/collect it.\nIt costs food to make Gold\nThe bigger the population the more food it takes to produce gold, but you will yield bigger profits.\n\nWebsite for Pocket Village! Stay Up-To-Date And Informed With\nhttp://gabebagel.doodlekit.com\n(Thanks DoodleKit!!!)\n\nVersion 4\nTo do:\nBoat outcome random       Done  Thanks KrackerKid\nLogo                      Done  Thanks ReidAlexander\nOutcome probabilities\nName your Village\n\nVersion 3\nTo do:\nFix \'Secret Code\'         Done\nNew Farm For PVTH2        Done\nUpgradeable Boat          Done\nFarms are selectable      Done\nBoat Fixes                Done\n\nVersion 2\nTo do:\nMake Water have purpose   Done\nUpgradeable Town Hall     Done\nBalancing                 Done\npopulation                Done\npopulation effect         Done   \n\n**/\n\nvar drawBill = function() {\n    var billX1=mouseX;\n    var billY1=mouseY;\n\nnoStroke();\nfill(247, 255, 0);\ntriangle(billX1,billY1,billX1+50,billY1+100,billX1-50,billY1+100);//body\nstroke(0);\nfill(255, 255, 255);\nellipse(billX1,billY1+35,30,15);// eye\nstroke(196, 196, 76);\nline(billX1-35,billY1+70,billX1+35,billY1+70);\nline(billX1-40,billY1+80,billX1+40,billY1+80);\nline(billX1-45,billY1+90,billX1+45,billY1+90);\nline(billX1-25,billY1+70,billX1-25,billY1+80);\nline(billX1,billY1+90,billX1,billY1+99);\nline(billX1,billY1+70,billX1,billY1+80);\nline(billX1+25,billY1+70,billX1+25,billY1+80);\nline(billX1-12,billY1+80,billX1-12,billY1+90);\nline(billX1+12,billY1+80,billX1+12,billY1+90);\nline(billX1-40,billY1+80,billX1-40,billY1+90);\nline(billX1+40,billY1+80,billX1+40,billY1+90);\nline(billX1-26,billY1+90,billX1-26,billY1+99);\nline(billX1+25,billY1+90,billX1+25,billY1+99);\nline(billX1+47,billY1+95,billX1+47,billY1+99);\nline(billX1-48,billY1+95,billX1-48,billY1+99);\nfill(0);\nstroke(0);\nellipse(billX1,billY1+35,5,12);//pupil\ntriangle(billX1-10,billY1+50,billX1,billY1+55,billX1-10,billY1+60);//left bowtie\ntriangle(billX1,billY1+55,billX1+10,billY1+50,billX1+10,billY1+60);//right bowtie\nfill(51, 46, 46);\nnoStroke();\nrect(billX1-15,billY1,30,10,2);\nrect(billX1-5,billY1-20,10,30);\n};//Enter The Secret Code :: Credit To Billy McCaslin For This Animation\nvar codeEntered = false;\nvar codeEntered2 = false;\nvar codeEntered3 = false;\nvar codeEntered4 = false;\n\nvar MJYT = \"Swag\";\n\nvar Tx1 = 240;\nvar Ty1 = 240; \nvar PVTHlevel = 1;\nvar decide = floor(random(1,5));\nvar pop = 1;\nvar rentTime = 2;\nvar food1 = 105;\nvar gold1 = 105;\nvar gold = 105;\nvar food = 105;\nvar growTime = 2400;\nvar growTimeT = 2;\nvar strokeW1 = 1; //variable for the strokeWeight in scene1\nvar hue1 = 0; //variable for the hue in scene1\nvar scene = -1;\nvar PVRx1 = 20;//x for residences\nvar PVRy1 = 20;//the y\nvar PVRMoneySpeed = 0;//Decides how fast the residence makes money\nvar PVRMoneyQuantity = 0; //Decides how much money the residence makes\nvar PVTHx1 = 160;//Town hall\'s x\nvar PVTHy1 = 160;//the y\nvar FARMx1 = 200;//farm\'s X\nvar FARMy1 = 240;//Farm\'s Y\nvar boatX = -30;//Boat\'s X\nvar boatY = 250;//Boat\'s Y\nvar sizeX = 200;//Boat\'s X size\nvar sizeY = 200;//Boat\'s Y size \nvar selectBoat = 0;\nvar Tbought = false;\nvar boatLevel = 1;\nvar selected = \"\";\nvar c1 = -179;\nvar c2 = 540;\nvar c3 = -100;\nvar cT = 0;\nvar Farm_num = 1;\n\nvar apple = function(x,y){\n    scale(0.7,0.7);\n    fill(230, 0, 0);\n    stroke(230, 0, 0);\n    strokeWeight(1);\n    rect(x - 3,y - 70,5,25);\n    beginShape();\n    vertex(x + 3,y - 63);\n    bezierVertex(x + 3,y - 71,x,y - 54,x + 2,y - 45);\n    bezierVertex(x - 16,y - 33,x - 22,y - 82,x + 3,y - 63);\n    bezierVertex(x - 2,y - 81,x,y - 54,x - 2,y - 45);\n    bezierVertex(x + 16,y - 33,x + 22,y - 82,x - 3,y - 63);\n    endShape();\n    \n    \n    stroke(72, 255, 0);\n    fill(45, 194, 15);\n    arc(x + 10,y - 68,20,5,180,270);\n    resetMatrix();\n};\n\nvar tomatoes = function(f1, f2, g1, g2) {\n    this.f1=f1;\n    this.g1=g1;\n    this.f2=f2;\n    this.g2=g2;\n    if (growTimeT>=1) {\n    fill(7, 201, 0);\n    rect(f1+7, g1+7, 6, 6);//seeds\n    rect(f1+27, g1+7, 6, 6);//^\n    rect(f1+7, g1+27, 6, 6);//^\n    rect(f1+27, g1+27, 6, 6);//^\n    }\n    if (growTimeT>1200) {\n    rect(f1+7, g1+3, 6, 6);//^\n    rect(f1+27, g1+3, 6, 6);//^\n    rect(f1+7, g1+23, 6, 6);//^\n    rect(f1+27, g1+23, 6, 6);//^\n    }\n    if (growTimeT>=2400) {\n    fill(255, 0, 0);\n    rect(f1+7, g1, 6, 6);//seeds\n    rect(f1+27, g1, 6, 6);//^\n    rect(f1+7, g1+20, 6, 6);//^\n    rect(f1+27, g1+20, 6, 6);//^ \n    \n    }\n    if (mouseIsPressed && mouseX > f1 && mouseY > g1 && mouseX < f1+40 && mouseY < g1+40 && growTimeT>2400 && food>0) {//When you click it harvests crops\n        growTimeT = 2;\n        if(food<=14) {\n         food1=0;   \n        }\n        if(food>=15) {\n        food1-=10;\n        }\n    }\n    growTimeT+=0.5;\n};//Tomato Farm\nvar boat = function(i, e, j, k) {\n    this.i=i;\n    this.e=e;\n    this.j=j;\n    this.k=k;\n    \n    fill(148, 81, 0);\n    quad(i - 25,e,i - 20,e + 10,i + 20,e + 10,i + 25,e);\n    \n    if(boatLevel === 2) {\n        fill(148, 81, 0);\n        quad(i - 8,e - 34,i + 4,e - 34,i + 6,e - 39,i - 10,e - 39);\n        fill(105, 53, 0);\n        noStroke();\n        rect(i - 17,e + 3,4,4);\n        rect(i - 7,e + 3,4,4);\n        rect(i + 3,e + 3,4,4);\n        rect(i + 13,e + 3,4,4);\n    }\n    \n    if(selectBoat===0) {\n        \n    fill(110, 59, 0);\n    rect(i-5, e-35, 5,34);  \n    rect(i + 17.5,e - 5,5,5);\n        \n    fill(255, 255, 255);\n    triangle(i, e, i, e-34, i+22.5, e-5);\n    triangle(i - 5,e,i - 5,e - 34,i - 20,e - 10);\n    strokeWeight(1);\n    stroke(0, 0, 0, 100);\n    line(i - 5,e - 34,i - 25,e);\n    } \n    else {\n        fill(255, 255, 255);\n        triangle(i, e, i, e-34, i-20, e -5);\n        triangle(i + 5,e,i + 5,e - 34,i + 17.5,e - 10);\n        \n        fill(110, 59, 0);\n        rect(i, e-35, 5,34);  \n        rect(i - 25,e - 5,5,5);\n        \n        strokeWeight(1);\n        stroke(0, 0, 0, 100);\n        line(i + 5,e - 34,i + 25,e);\n        \n        if(boatLevel === 2){\n            noStroke();\n            fill(148, 81, 0);\n            quad(i - 3,e - 34,i + 9,e - 34,i + 11,e - 39,i - 5,e - 39);\n        }\n    }\n    \n};//Boat that travels into screen\nvar PVTH1 = function(x1, y1, x2, y2) {\n    this.x1=x1;\n    this.y1=y1;\n    this.x2=x2;\n    this.y2=y2;\n    fill(112, 96, 96);\n    rect(x1, y1, x2, y2); //stone base of TH\n    fill(255, 187, 0);\n    rect(x1, y1, x2, y2 - 30); //yellow roof\n    fill(0, 0, 0);\n    rect(x1 + 30, y1 + 50, x2 - 60, y2 - 50); //black door\n    if(PVTHlevel===2) {\n        fill(71, 37, 0);\n        rect(x1+13, y1+62, x2-74, y2-65);\n        rect(x1+63, y1+62, x2-74, y2-65);\n        fill(204, 105, 0);\n        ellipse(x1+16, y1+58, x2-74, y2-69);\n        ellipse(x1+66, y1+58, x2-74, y2-69);\n    }\n    if(selected === \"Town Hall\") {\n        fill(0, 0, 0);\n    textSize(30);\n    text(PVTHlevel, x1+31, y1+30);\n    }\n};//Town Hall\nvar PVR = function(i1, e1, i2, e2) {\n    this.i1=i1;\n    this.e1=e1;\n    this.i2=i2;\n    this.e2=e2;\n    fill(112, 96, 96);\n    rect(i1, e1, i2, e2);//grey building\n    fill(255, 187, 0);\n    rect(i1, e1, i2, e2-40);//yellow roof\n    fill(0, 0, 0);\n    rect(i1+20, e1+30, i2-40, e2-30);//black door\n    fill(145, 80, 0);\n    rect(i1+5, e1+50, 10, 10);\n    if(rentTime>=1200 && food<=103) {\n        fill(20, 122, 0);\n        rect(i1+7, e1+47, 5, 5);\n        if(rentTime===1200){\n         food1+=2;   \n         if(pop>4 && pop<11) {\n          food1+=2;   \n         }\n        }\n    }\n    if(rentTime>=2399 && food<=102) {\n     fill(247, 255, 0);\n     ellipse(i1+10, e1+46, 5, 5);\n      if(rentTime===2399) {\n          food1+=3;\n      if(pop>4 && pop<11) {\n       food1+=3;   \n      }\n      }\n    }\n    if(rentTime>=2400 && mouseIsPressed && mouseX > i1 && mouseY > e1 && mouseX < i1+60 && mouseY < e1+60 && gold>0) {\n        \n        if(gold>=15) {\n        if(pop>4 && pop<10 && PVRMoneyQuantity===1) {\n         gold1-=15;\n        }\n        if(PVRMoneyQuantity===1) {\n        gold1-=10;\n        } else if(gold>5) {\n         gold1-=5;   \n        }\n        }else if(gold<=4) {\n         gold1=0;   \n        }else if(gold<=9 && PVRMoneyQuantity===1) {\n            gold1=0;\n        }else if(gold<=14 && PVRMoneyQuantity===1 && pop>4 && pop<10) {\n            gold1=0;   \n        }\n        rentTime=2;\n    }\n    \n    if(food<=100){\n    rentTime++;\n    if(PVRMoneySpeed===1) {\n     rentTime+=0.5;   \n    } \n    }\n};//Residence\nvar FARM = function(j1, k1, j2, k2) {\n    this.j1=j1;\n    this.k1=k1;\n    this.j2=j2;\n    this.k2=k2;\n    if (growTime>=1) {\n    fill(7, 201, 0);\n    rect(j1+7, k1+7, 6, 6);//seeds\n    rect(j1+27, k1+7, 6, 6);//^\n    rect(j1+7, k1+27, 6, 6);//^\n    rect(j1+27, k1+27, 6, 6);//^\n    }\n    if (growTime>=1200) {\n    fill(68, 255, 0);\n    rect(j1+7, k1+3, 6, 6);//seeds\n    rect(j1+27, k1+3, 6, 6);//^\n    rect(j1+7, k1+23, 6, 6);//^\n    rect(j1+27, k1+23, 6, 6);//^\n    }\n    if (growTime>=2400) {\n    fill(255, 238, 0);\n    rect(j1+7, k1, 6, 6);//seeds\n    rect(j1+27, k1, 6, 6);//^\n    rect(j1+7, k1+20, 6, 6);//^\n    rect(j1+27, k1+20, 6, 6);//^ \n    \n    }\n    if (mouseIsPressed && mouseX > j1 && mouseY > k1 && mouseX < j1+40 && mouseY < k1+40 && growTime>2400 && food>0) {//When you click it harvests crops\n        growTime = 2;\n        if(food<=9) {\n         food1=0;   \n        }\n        if(food>=10) {\n        food1 -= Farm_num * 5;\n        }\n    }\n    growTime++;\n};//Wheat Farm\nvar bagel = function() {\n    noStroke();\n    fill(255, 183, 0);\n    ellipse(c1 + 9, 200, 176, 234);\n    fill(255, 204, 0);\n    ellipse(c2-8, 200, 140, 200);\n    fill(222, 151, 9);\n    ellipse(210, c3, 100, 160);\n    if (c1 < 200) {\n        c1+=1.28;\n    }\n    if (c2 > 200) {\n        c2-=1.15;\n    }\n    if (c3 < 200) {\n        c3++;\n    }\n    if(cT>400) {\n     scene++;   \n    }\n    cT++;\n};//Logo :: Credit To ReidAlexander\nvar sceneLogo = function() {\n    background(222, 151, 9);\n    bagel();\n    fill(255, 204, 0);\n    ellipse(0, 400, 200, 200);\n    ellipse(400, 400, 200, 200);\n    ellipse(0, 0, 200, 200);\n    ellipse(400, 0, 200, 200);\n    fill(222, 151, 9);\n    ellipse(0, 400, 150, 150);\n    ellipse(400, 400, 150, 150);\n    ellipse(0, 0, 150, 150);\n    ellipse(400, 0, 150, 150);\n    fill(255, 204, 0);\n    ellipse(0, 400, 100, 100);\n    ellipse(400, 400, 100, 100);\n    ellipse(0, 0, 100, 100);\n    ellipse(400, 0, 100, 100);\n    fill(222, 151, 9);\n    ellipse(0, 400, 50, 50);\n    ellipse(400, 400, 50, 50);\n    ellipse(0, 0, 50, 50);\n    ellipse(400, 0, 50, 50);\n    fill(255, 191, 0);\n    textSize(35);\n    textAlign(CENTER);\n    text(\"GJH\", 205, c3-125);\n    text(\"(It\'s a bagel)\", 213, c2+150);\n};//Logo Scene :: Credit To ReidAlexander\n\nvar Text = [];\nvar type = function() {\n    textAlign(CENTER,CENTER);\n    fill(0, 0, 0);\n    textSize(26);\n    var t=round(frameCount/40);\n    if(t%2===0){\n        text(Text.join(\"\") + \"|\", 200,170);\n    } else {\n        text(Text.join(\"\") + \" \", 200, 170);\n    }\n    if(Text.length < 1){\n        fill(209, 209, 209);\n        text(\"Village Name\",200,170);\n    }\n\n};\nvar keyTyped = function() {\n        if (key.code!==BACKSPACE && key.code !== ENTER && Text.length < 16 && scene === 0){\n            Text.push(key);\n        }\n        if (key.code===BACKSPACE){\n            Text.pop();\n        }\n    };\n\nvar scene0 = function() { //title screen\n    background(31, 105, 27);\n    \n    fill(255, 255, 255);\n    rect(100,150,200,40);\n    \n    type();\n    \ntextAlign(LEFT);\n\n    fill(97, 94, 38);\n    strokeWeight(1);\n    rect(100, 200, 200, 40); //Start button\n    if (mouseX > 100 && mouseX < 300 && mouseY > 200 && mouseY < 240) {\n        fill(0, 0, 0, 20);\n        rect(100,200,200,40);\n    }\n    stroke(0, 0, 0);\n    strokeWeight(1);\n    textSize(50);\n    fill(0, 0, 0);\n    textAlign(CENTER,CENTER);\n    text(\"Pocket Village\", 200, 63);\n    fill(255, 255, 255);\n    text(\"Pocket Village\", 200, 60);\n    \n    textSize(28);\n    text(\"Start Game\", 200, 220);\n    \n    if(keyIsPressed && keyCode === DOWN) {\n     codeEntered = true;\n    } else if(codeEntered ===true && keyIsPressed && keyCode === LEFT) {\n     codeEntered2 = true;   \n    } else if(codeEntered2===true && keyIsPressed && keyCode === RIGHT) {\n     codeEntered3 = true;   \n    } else if(codeEntered3===true && keyIsPressed && keyCode === UP) {\n     codeEntered4 = true;\n    }\n};//\'Start\' Scene\nvar scene1 = function() {\n    background(31, 105, 27);\n    stroke(0, 0, 0);\n    fill(0, 34, 255);\n    rect(0, 240, 200, 160);//water\n    fill(92, 55, 0);\n    strokeWeight(1);\n    rect(200, 240, 200, 160);//plowed dirt\n    for (var i = 0; i < 400; i += 20) { //grid\n        stroke(0, 0, 0, 50); //makes grid transluecent\n        line(i, 400, i, 0); //grid line vertical\n        line(400, i, 0, i); //grid line horizontal\n    }\n    PVR(PVRx1, PVRy1, 60, 60);//call the residence function\n    for(var farms = 0; farms < Farm_num; farms ++){\n    \n        FARM(FARMx1 + farms * 40, FARMy1, 60, 60);//call the FARM function\n    }\n    \n\n    PVTH1(PVTHx1, PVTHy1, 80, 80);//call the town hall function\n    boat(boatX, boatY, sizeX, sizeY);\n    if(Tbought === true) {\n     tomatoes(Tx1 - 40, 60, Ty1 + 40, 60);   \n    }\n    \n    strokeWeight(1);//Gold Bar\n    stroke(0, 0, 0);\n    fill(207, 207, 0);\n    rect(270, 10, 105, 16);//gold bar\n    fill(191, 0, 0);\n    rect(270, 10, gold, 16);//gold amount\n    fill(255, 213, 0);//Gold coin\n    ellipse(387, 18, 15, 15);//gold coin\n    stroke(0, 0, 0);\n    fill(255, 234, 0);\n    ellipse(387, 18, 10, 10);//gold coin\n    fill(255, 255, 255);\n    textSize(15);\n    text(105-gold + \" Gold\", 323, 40);\n    \n    apple(345,83);\n    \n    stroke(0, 0, 0);\n    fill(13, 133, 27);\n    rect(120, 10, 105, 16);//food bar\n    fill(199, 0, 0);\n    rect(120, 10, food, 16);//food amount\n    fill(255, 255, 255);\n    text(105-food + \" Food\", 170, 40);\n    \n    fill(84, 84, 84);\n    rect(370, 370, 20, 20);//grey button\n    \n    stroke(255, 255, 255);\n    rect(376, 380, 8, 8);//button house square\n    triangle(381, 373, 374, 381, 387, 381);//triangle roof\n    \n    if(PVTHlevel > 1) {\n        stroke(0, 0, 0);\n        fill(84, 84, 84);\n        rect(340, 370, 20, 20);//Farm Grey Button\n        \n        fill(7, 201, 0);\n        stroke(7, 201, 0);\n        rect(344, 374, 3, 3);//Button Seeds\n        rect(352, 374, 3, 3);//^\n        rect(344, 382, 3, 3);//^\n        rect(352, 382, 3, 3);//^\n    }\n    \n    stroke(176, 176, 176);\n    strokeWeight(3);\n    fill(156, 156, 156);\n    rect(10, 340, 100, 50);\n\n    //Grey signs at the bottom of the screen\n\n    rect(120,340,100,50);\n    fill(0, 0, 0);\n    textAlign(CENTER,CENTER);\n    textSize(12);\n    text(\"Welcome to \\n\" + Text.join(\"\") + \".\\nPopulation : \" + pop,60,365);\n    text(\"Selected Object :\\n\" + selected,171,362.5);\n    noStroke();\n    textAlign(LEFT,BASELINE);\n    \n    //Lowering Effect on food and gold bars\n    {\n    if (food1 > food) {\n        food++;\n    }\n    if (food1 < food) {\n        food--;\n    }\n    if (gold1 > gold) {\n        gold++;\n    }\n    if (gold1 < gold) {\n        gold--;\n    }\n    }\n    \n    if (selected === \"Town Hall\"){\n        if(PVTHlevel===1) {\n        stroke(176, 176, 176);\n        strokeWeight(3);\n        fill(156, 156, 156);\n        rect(230, 340, 120, 20);\n        fill(0, 0, 0);\n        textSize(11);\n        text(\"Upgrade - 100 Each\", 240, 355);\n         }if(gold>5 && mouseX > 230 && mouseY> 340 && mouseX< 350 && mouseY< 360 && PVTHlevel===1) {//upgrade TH button \"Not Enough Gold!\"\n             fill(255, 0, 0);\n             textSize(30);\n             stroke(0, 0, 0);\n            text(\"Not enough Gold!\", 85, 80);\n        } \n        if(food>5 && mouseX>230 && mouseY>340 && mouseX<350 && mouseY<360 && PVTHlevel===1) {//upgrade TH button \"Not Enough Food!\"\n             fill(255, 0, 0);\n             textSize(30);\n             stroke(0, 0, 0);\n            text(\"Not enough Food!\", 82.5, 110);\n        }}\n    else if(selected === \"House\"){\n        if(gold<1 && rentTime>=2400) {\n            fill(255, 0, 0);\n             textSize(30);\n             stroke(0, 0, 0);\n            text(\"Gold storage full!\", 150, 100);\n        }\n    } \n    else if(selected === \"Tomato farm\"){//Tomatoes appears when selected\n            if(selected === \"Tomato farm\" && food<1 && growTimeT>=2400) {//food storages full :: cannot harvest\n                fill(255, 0, 0);\n             textSize(30);\n             stroke(0, 0, 0);\n            text(\"Food storage full!\", 150, 100);\n            }}\n    else if(selected === \"Wheat farm\"){//Displays that wheat is selected\n            if(selected === \"Wheat farm\" && food<1 && growTime>=2400) {//food storages full :: cannot harvest\n                fill(255, 0, 0);\n                textSize(30);\n                stroke(0, 0, 0);\n                text(\"Food storage full!\", 150, 100);\n            }\n    }\n    else if(selected === \"Boat\"){//boat is selectable\n            \n            stroke(176, 176, 176);\n            strokeWeight(3);\n            fill(156, 156, 156);\n            rect(230,340,100,20);\n            fill(0, 0, 0);\n            text(\"View\",265,354);\n            \n            if(PVTHlevel === 2 && boatLevel === 1) {\n                \n                stroke(176, 176, 176);\n                strokeWeight(3);\n                fill(156, 156, 156);\n                rect(230,370,100,20);\n                \n                fill(0, 0, 0);\n                text(\"Upgrade\",255,384);\n            \n            }\n        }\n     \n    if(boatX<175 && selectBoat===0){//Propels Boat\n     boatX+=0.1;  \n     if(boatLevel===2) {\n      boatX+=0.02;   \n     }}\n    else if(selectBoat===1 && boatX>-31){\n        boatX-=0.5;\n        if(boatLevel===2) {\n         boatX-=0.1;   \n        }\n        if(boatX<-29) {\n         selectBoat=0;   \n        }\n    } \n};//The Main Scene\nvar scene2 = function() {\n    background(105, 91, 34);\n    strokeWeight(20);\n    stroke(74, 64, 24);\n    noFill();\n    rect(0,0,400,400);\n\n    fill(255, 0, 0);\n    stroke(0, 0, 0);\n    strokeWeight(5);\n    rect(350, 30, 25, 25);//exit button\n    line(351, 31, 375, 55); //exit button line\n    \n    fill(125, 108, 40);\n    strokeWeight(3);\n    rect(20,70,360,60);\n    rect(20,140,360,60);\n    rect(20,210,360,60);\n    \n    fill(199, 192, 95);\n    textAlign(LEFT,BASELINE);\n    textSize(40);\n    text(\"SHOP\",150,50);\n    textSize(20);\n    fill(181, 176, 87);\n    text(\"Faster Gold\", 30, 107.5);\n    text(\"Increased Gold Supply\", 30, 177.5);\n    text(\"+1 Wheat Farm\",30,247.5);\n    \n    fill(199, 192, 95);\n    text(\"20 Gold\",300,107.5);\n    text(\"20 Gold\",300,177.5);\n    text(\"35 Food\",300,247.5);\n\n    if(PVRMoneySpeed===1) {\n        fill(0, 0, 0, 100);\n        noStroke();\n        rect(20,70,360,60);\n    } \n    if(PVRMoneyQuantity===1) {\n        fill(0, 0, 0, 100);\n        noStroke();\n        rect(20,140,360,60);\n    }\n    if(Farm_num >= 5){\n        fill(0, 0, 0, 100);\n        noStroke();\n        rect(20,210,360,60);\n    }\n\n};//Shop\nvar scene3 = function() {\n    background(82, 131, 255);\n    noStroke();\n    fill(0, 34, 168);\n    rect(0,155,400,250);\n    fill(87, 57, 26);\n    rect(150,150,250,50);\n    rect(350,150,50,250);\n    rect(300,250,100,50);\n    rect(50,350,350,50);\n    fill(77, 50, 23);\n    rect(160,200,20,10);\n    rect(260,200,20,10);\n    rect(315,300,20,10);\n    \n    fill(110, 59, 0);\n    var i = 200;\n    var e = 200;\n    rect(i-5, e-170, 25,170);  \n    rect(i + 97.5,e - 25,25,25);\n    \n    fill(125, 67, 0);\n    quad(i - 125,e,i - 100,e + 50,i + 100,e + 50,i + 125,e);\n        \n    fill(255, 255, 255);\n    triangle(i + 20, e, i + 20, e-170, i+125, e-25);\n    triangle(i - 5,e,i - 5,e - 170,i - 100,e - 35);\n    strokeWeight(3);\n    stroke(0, 0, 0, 100);\n    line(i - 5,e - 170,i - 125,e);\n    \n    fill(130, 78, 18);\n    strokeWeight(5);\n    stroke(0, 0, 0);\n    rect(-5,250,450,155);\n    \n    if(decide===1) {\n    textSize(20);\n    textAlign(CENTER,CENTER);\n    fill(194, 178, 97);\n    text(\"During our voyage, we came across\\na castaway on a raft. After we told\\nhim about it, he was keen on joining\\nyour town.\", 200, 300);}\n    else if(decide===2) {\n        textSize(20);\n        textAlign(CENTER,CENTER);\n        fill(194, 178, 97);\n     text(\"While on our voyage, we discovered an ancient ship wreck on the river bed. Inside it we found ten gold!\", 50, 100,300,400);\n     if(mouseX > 70 && mouseX < 190 && mouseY > 355 && mouseY < 395 && decide===2 && gold<1) {\n           fill(255, 255, 255);\n           textAlign(CENTER,CENTER);\n           text(\"Gold is already full!\", 200, 50);\n        }   \n        strokeWeight(3);\n        fill(0, 0, 0, 50);\n        rect(70, 355, 120, 40);\n        fill(255, 255, 255);\n        textSize(20);\n        text(\"No thanks.\", 132.5, 375);}\n    else if(decide===3 && boatLevel===1) {\n     textSize(20);\n     fill(194, 178, 97);\n     textAlign(CENTER,CENTER);\n     text(\"While on our voyage, we were attacked\\nby pirates! We managed to escape, but\\nten food is needed to heal\\nthe crew.\", 200, 300);}\n    else if(decide===3 && boatLevel===2) {\n        textSize(20);\n        fill(194, 178, 97);\n        textAlign(CENTER,CENTER);\n     text(\"Your ship was attacked by pirates... \\nBut your brave crew fought them off!\\nLooks like upgrading your boat was \\na good idea!\", 200, 302.5);\n    }\n    else if(decide === 4){\n            textSize(20);\n        textAlign(CENTER,CENTER);\n        fill(194, 178, 97);\n     text(\"While on our voyage, we came upon a sinking trade boat. After we saved them, they were so grateful they gave us ten food!\", 50, 100,300,400);\n     if(mouseX > 70 && mouseX < 190 && mouseY > 355 && mouseY < 395 && decide===2 && food<1) {\n           fill(255, 255, 255);\n           textAlign(CENTER,CENTER);\n           text(\"Food is already full!\", 200, 50);\n        }   \n        strokeWeight(3);\n        fill(0, 0, 0, 50);\n        rect(70, 355, 120, 40);\n        fill(255, 255, 255);\n        textSize(20);\n        text(\"No thanks.\", 132.5, 375);\n    }\n    stroke(0, 0, 0);\n    fill(255, 255, 255, 50);\n    rect(210, 355, 120, 40);\n    fill(255, 255, 255);\n    textSize(20);\n    text(\"Okay.\", 270, 375);\n    fill(255, 0, 0);\n    stroke(0, 0, 0);\n    strokeWeight(5);\n    rect(350, 30, 25, 25);//exit button\n    line(351, 31, 375, 55); //exit button line\n};//Boat Scenes\nvar scene4 = function() {\n     background(0, 26, 194);\n     fill(255, 0, 0);\n    stroke(0, 0, 0);\n    strokeWeight(5);\n    rect(350, 30, 25, 25);//exit button\n    line(351, 31, 375, 55); //exit button line\n    fill(100, 1000, 1000);\n    textSize(28);\n    fill(100, 1000, 1000);\n    text(\"Buy Tomatoes    50 Gold\", 20, 60);\n    rect(100, 100, 150, 50);//buy tomatoes button\n    if(mouseX>100 && mouseY>100 && mouseX<250 && mouseY<150 && Tbought === false && gold>55) {\n             fill(255, 0, 0);\n     text(\"Not enough Gold!\", 20, 350);\n        } else if(Tbought === true) {\n           fill(255, 0, 0);\n           textSize(28);\n           text(\"Purchased\", 110, 135);\n        }\n};//Buy Tomatoes Scene\nvar scene5 = function() {\n    background(0, 26, 194);\n     fill(255, 0, 0);\n    stroke(0, 0, 0);\n    strokeWeight(5);\n    rect(350, 30, 25, 25);//exit button\n    line(351, 31, 375, 55); //exit button line\n    fill(100, 1000, 1000);\n    textSize(28);\n    fill(100, 1000, 1000);\n    text(\"Upgrade Sailboat \\n50 Gold  50 Food\", 20, 50);\n    rect(100, 100, 150, 50);//upgrade sailboat button\n               \n               if(mouseX>100 && mouseY>100 && mouseX<250 && mouseY<150 && gold>55) {\n             fill(255, 0, 0);\n     text(\"Not enough Gold!\", 20, 345);\n        }\n        if(mouseX>100 && mouseY>100 && mouseX<250 && mouseY<150 && food>55) {\n             fill(255, 0, 0);\n     text(\"Not enough Food!\", 20, 375);\n        }\n};//Sailboat Upgrade scene\nvar keyReleased = function() {\n       if(scene===1) {\n        if (selected === \"Town Hall\") {\n            if (keyCode===LEFT && PVTHx1 > 1) {//to make the 1st level town hall is moving\n                if(PVTHx1 > PVRx1+60 || PVTHy1 > PVRy1+40 || PVTHx1 < PVRx1 || PVTHy1+60 < PVRy1){//\n                PVTHx1-=20;\n                }\n            }\n            else if (keyCode===RIGHT && PVTHx1 < 319) {\n                if(PVTHx1 > PVRx1 || PVTHy1 > PVRy1+40 || PVTHx1+80 < PVRx1 || PVTHy1+60 < PVRy1){\n                PVTHx1+=20;\n                }\n            }\n            else if (keyCode===UP && PVTHy1 > 1) {\n                if(PVTHx1 > PVRx1+40 || PVTHy1 > PVRy1+60 || PVTHx1 < PVRx1-60 || PVTHy1 < PVRy1){\n                PVTHy1-=20;\n                }\n            }\n            else if (keyCode===DOWN && PVTHy1 < 159) {\n             if(PVTHx1 > PVRx1+40 || PVTHy1 > PVRy1 || PVTHx1+60 < PVRx1 || PVTHy1+80 < PVRy1){   \n                PVTHy1+=20;\n            }\n            }\n        }\n       \n        else if (selected === \"House\") {//to make the 1st residence movable, and prevent moving into other buildings\n            \n            if (keyCode===LEFT && PVRx1 > 1) {\n                if(PVRx1 > PVTHx1+80 || PVRx1 < PVTHx1 || PVRy1 < PVTHy1-40 || PVRy1 > PVTHy1+60) {\n                PVRx1-=20;\n                }\n            }\n            else if (keyCode===RIGHT && PVRx1 < 339 ) {\n                \n                    if (PVRx1 < PVTHx1-60 || PVRy1 < PVTHy1-40 || PVRy1 > PVTHy1+60 || PVTHx1 < PVRx1) {\n                        PVRx1+=20;\n                    }\n                \n            }\n            else if (keyCode===UP && PVRy1 > 1) {\n                if(PVRy1 > PVTHy1+80 || PVRx1 > PVTHx1+60 || PVRx1 < PVTHx1-40 || PVRy1 < PVTHy1) {\n                PVRy1-=20;\n                }\n            }\n            else if (keyCode===DOWN && PVRy1 < 179) {\n                if(PVRy1 < PVTHy1-60 || PVRy1 > PVTHy1 || PVRx1 < PVTHx1-40 || PVRx1 > PVTHx1+60) {\n                PVRy1+=20;\n                }\n            }\n        }\n    }\n};//So you can move buildings\nvar mouseClicked = function() {\n    if (scene === 0) {\n        if (mouseX > 150 && mouseX < 252 && mouseY > 200 && mouseY < 255) { //start button\n            scene = 1;\n        }\n    } else if (scene === 1) {\n        if(mouseX>boatX-25 && mouseX<boatX+30 && mouseY>boatY-35 && mouseY<boatY+20 && boatX>174) {//boat is selectable\n            selected = \"Boat\";\n               \n        } else if (selected === \"Boat\" && mouseX> 230 && mouseY>340 && mouseX<330 && mouseY<360) {//\'View\' Button\n        scene = 3;\n        selected = \"\";\n        \n        } else if (selected === \"Boat\" && mouseX> 230 && mouseY> 370 && mouseX< 330 && mouseY< 390) {//\'Upgrade\' Button\n            scene = 5;\n        selected = \"\";\n        \n        } else if (mouseX > this.x1 && mouseX < this.x1 + this.x2 && mouseY > this.y1 && mouseY < this.y1 + this.y2) {//Town Hall is selected\n            selected = \"Town Hall\";\n         \n        }  else if(selected === \"Town Hall\" && mouseX>230 && mouseY>340 && mouseX<350 && mouseY<360 && PVTHlevel===1) {//upgradeable TH\n            selected = \"Town hall\";\n            if(gold<6 && food<6 && PVTHlevel===1) {\n            PVTHlevel=2;\n            if(food===100) {\n             food1=0;   \n            } else {\n             food1+=100;   \n            }\n            if(gold===100) {\n             gold1=0;\n            } else {\n             gold1+=100;   \n            }\n            }\n        } else if (mouseX > this.i1 && mouseX < this.i1 + this.i2 && mouseY > this.e1 && mouseY < this.e1 + this.e2) {//Residence is selected\n            selected = \"House\";\n        \n        } else if (mouseX > 200 && mouseY > 240 && mouseX < 240 && mouseY < 280) {//Wheat Farm is selected\n                selected = \"Wheat farm\";\n           \n            } else if (mouseX > 240 && mouseY > 240 && mouseX < 280 && mouseY < 280 && Tbought === true) {//Tomatoes are selected\n            selected = \"Tomato farm\";\n           \n        }else {\n            selected = \"\";\n        } \n    }\n        if(mouseX > 370 && mouseX < 390 && mouseY > 370 && mouseY < 390) {//small grey button to scene two\n            scene=2;\n        } else if(mouseX>349 && mouseX<376 && mouseY>29 && mouseY<55 && scene===2) {//exit scene two button\n         scene=1;\n        }  else if(mouseX > 340 && mouseX < 360 && mouseY > 370 && mouseY < 390 ) {//(Farm) small grey button to scene 4\n            scene=4;\n        } else if(scene===2) {\n            //Come back here\n        if(mouseX > 20 && mouseX< 380 && mouseY > 70 && mouseY < 130 && gold <= 85 && PVRMoneySpeed===0) {//upgrade residence money quickness\n            gold1 += 20;\n            PVRMoneySpeed++;\n            scene = 1;\n        }\n        else if(mouseX > 20 && mouseX< 380 && mouseY > 140 && mouseY < 200 && PVRMoneyQuantity===0 && gold<=85) {//upgrade money quantity\n            gold1+=20;\n            PVRMoneyQuantity++;\n            scene=1;\n        }\n        else if(mouseX > 20 && mouseX < 380 && mouseY > 210 && mouseY < 280 && Farm_num < 6 && food <= 70){\n            Farm_num ++;\n            scene = 1;\n            food1 += 35;\n        }\n        } else if(scene===3) {\n        if(mouseX > 210 && mouseX < 330 && mouseY > 355 && mouseY < 395 && decide===1) {\n         scene=1;   \n         selectBoat=1;\n         pop+=1;\n         decide = floor(random(1, 5));//+1 Person\n        } else if(mouseX > 210 && mouseX < 330 && mouseY > 355 && mouseY < 395 && decide===2 && gold>0) {//Accept 10 free gold\n         scene=1;\n         selectBoat=1;\n         if(gold>10) {\n          gold1-=10;   \n         } else {\n          gold1=0;\n         }\n         decide = floor(random(1, 5));\n        } else if(mouseX > 70 && mouseY > 355 && mouseX < 190 && mouseY < 395 && decide===2) {//Dismiss (Only Available When Accepting Gold)\n        selectBoat=1;\n        scene=1;\n        decide = floor(random(1, 5));\n        } else if(mouseX > 210 && mouseX < 330 && mouseY > 355 && mouseY < 395 && decide===3 && boatLevel===1) {//Pay 10 food to heal your crew\n         scene=1;\n         selectBoat=1;\n         if(food<95) {\n          food1+=10;  \n         } else {\n          food1=105;   \n         }\n         if(pop>9) {//10 population is max\n         decide = floor(random(2, 5));\n         } else {\n         decide = floor(random(1, 5));\n         }\n        } else if(mouseX > 210 && mouseX < 330 && mouseY > 355 && mouseY < 395 && decide===3 && boatLevel===2) {\n         scene=1;\n         selectBoat=1;\n         \n         if(pop>9) {//10 population is max\n         decide = floor(random(2, 5));\n         } else {\n             decide = floor(random(1, 5));\n         }\n        \n        } else if(mouseX > 210 && mouseX < 330 && mouseY > 355 && mouseY < 395 && decide === 4){\n            selectBoat = 1;\n            scene = 1;\n            if(food>10) {\n                food1-=10;   \n            } else {\n                food1=0;\n            }\n            decide = floor(random(1, 5));\n        } else if(mouseX>349 && mouseX<376 && mouseY>29 && mouseY<55 && scene===3) {//exit without dismissing boat\n         scene=1;\n        }\n        \n        } else if(scene === 4) {\n        if(mouseX>100 && mouseX<250 && mouseY>100 && mouseY<150 && gold<=55 && Tbought === false) {//Buy Tomatoes\n            Tbought = true;\n            scene = 1;\n            gold1+=50;\n        } else if(mouseX>349 && mouseX<376 && mouseY>29 && mouseY<55) {//exit scene two button\n         scene = 1;\n        }  \n        \n        } else if(scene === 5) {\n            if(mouseX>100 && mouseX<250 && mouseY>100 && mouseY<150 && gold<=55 && boatLevel === 1) {//Upgrade Sailboat\n            boatLevel = 2;\n            scene = 1;\n            gold1+=50;\n        } else if(mouseX>349 && mouseX<376 && mouseY>29 && mouseY<55) {//exit scene 5 button\n         scene = 1;\n        }\n        }\n};//Way better than mouseIsPressed\nvar draw = function() {\n    if (scene === -1) {\n     sceneLogo();   \n    }else if (scene === 0) {\n        scene0();\n         if(mouseIsPressed && codeEntered4 === true){\n        drawBill();\n        }  \n    } else if (scene === 1) {\n        scene1();\n    } else if (scene === 2) {\n        scene2();\n    } else if (scene === 3) {\n     scene3();   \n    } else if (scene === 4) {\n     scene4();   \n    } else if (scene === 5) {\n     scene5();   \n    }\n};//Calls each scene\n";
window.liveEditor = new LiveEditor({
                el: $("#sample-live-editor"),
                code: code,
                width: 400,
                height: 400,
                editorHeight: "80%",
                autoFocus: true,
                workersDir: "../../build/workers/",
                externalsDir: "../../build/external/",
                imagesDir: "../../build/images/",
                soundsDir: "../../sounds/",
                execFile: outputUrl,
                jshintFile: "../../build/external/jshint/jshint.js",
                newErrorExperience: true,
            });
            liveEditor.editor.on("change", function() {
                window.localStorage["test-code"] = liveEditor.editor.text();
            });
            ScratchpadAutosuggest.init(liveEditor.editor.editor);
            </script>
        </body>
        </html>
        