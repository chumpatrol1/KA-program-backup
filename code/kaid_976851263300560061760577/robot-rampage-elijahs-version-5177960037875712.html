<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Robot Rampage: Elijah's Version</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
<style>
        body {
            padding: 20px;
        }
        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Robot Rampage: Elijah's Version</h1>
    <div id="sample-live-editor"></div>
    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>
    <script>
    var outputUrl = "../output.html";
var code = "/**Robot Rampage: Elijah's Version by David Elijah de Siqueira Campos McLaughlin\nOriginal size(400, 400);\nOriginally Created on 2014-08-13T18:29:21Z by kaid_976851263300560061760577\nLast Edited: 2014-08-13T18:29:21Z\nVotes/Spinoffs: 1/1\nOriginally Created: 2014-08-13T20:30:18Z from origin 5844124321710080 with similarity of 0.991117597998332\nOriginal Link: https://www.khanacademy.org/computer-programming/robot-rampage-elijahs-version/5177960037875712\nRetrieved On: 07-Nov-2022 (17:07:50.113958)**/\
";

code = code + "\n// There is a Winston Virus in the spin-offs! Flag it as abuse, plagiarism, disallowed, off topic, and vote soliciting!\n/**\n * CONTEST: Make the next graphics set! Change the images and texts. IF IT IS GOOD ENOUGH, I will add it to the game!\n * \n * It\'s the year 2170. Robot technology has decreased from when OJS, who is now away, destroyed a lot of it. Seeing that he is away, the Robots started to invade! You have cannons to place that shoot water balloons. This makes the robots rust and die. However, your cannons take awhile to charge! Luckily, the stone walls can block robots out, but they will break the walls down if they need to (and have time). And they have cloning rays! There\'s no way you can stop them! Or can you...?\n * \n * CONTROLS:\n * If you have money, click on an open dirt block to place a cannon (clicking a cannon will fire it).\n * Experiment with the upgrades!\n * Robots come faster over time, and also they can have more health. By the way, to pause click the cannon/wall button, and don\'t place a cannon/wall.\n * Swarms come in randomly! They come in groups of 8 and land on the 4th grass tile.\n * Oh yeah, every second you get more money (which can be upgraded).\n * Use the EMP/Magic/Stop/Light to stun all enemies for 10 seconds!\n */\n\nangleMode = \"degrees\";\nvar score = 0; // don\'t change this!!\nvar money = 1750;\n\nvar enemyWaitTime = 5000;\nvar enemySpeed = 25;\n// Note: Keep the 0.001 as is and adjust the 12 and 8 but don\'t go higher than 50.\nvar enemyGrowthRate = 6 * 0.001;\nvar enemySpeedRate = 4 * 0.001;\nvar moneyGain = 25;\nvar reloadTime = 10000;\nvar nextSwarm = 4000;\nvar superSwarm = false;\nvar reloadUpgCost = 320;\nvar moneyRate = 1000;\nvar moneyUpgCost = 320;\nvar attackSpeed = 20; // speed at which the robots attack the walls\nvar toughnessUpgCost = 480;\nvar emp = 0;\nvar empLasts = 10000;\nvar empCost = 200;\n\nvar upgradingWall = false;\nvar placingCannon = false;\n\nvar inRange = function(num, lo, hi) {\n    return num >= lo && num <= hi;\n};\nvar leftImg = getImage(\"cute/DirtBlock\");\nvar wall = getImage(\"cute/StoneBlock\");\nvar path = getImage(\"cute/GrassBlock\");\nvar r1 = getImage(\"avatars/robot_male_2\");\nvar r2 = getImage(\"avatars/robot_male_1\");\nvar r3 = getImage(\"avatars/robot_male_3\");\nvar r4 = getImage(\"avatars/robot_female_1\");\nvar r5 = getImage(\"space/rocketship\");\nvar title = \"Robot Rampage 3\";\nvar flip = true;\nvar enemyName = \"robots\";\nvar empText = \"EMP\";\n\nvar graphics0 = function() {\n    title = \"Robot Rampage 3\";\n    enemyName = \"robots\";\n    empText = \"EMP\";\n    flip = true;\n    leftImg = getImage(\"cute/DirtBlock\");\n    wall = getImage(\"cute/StoneBlock\");\n    path = getImage(\"cute/GrassBlock\");\n    r1 = getImage(\"avatars/robot_male_2\");\n    r2 = getImage(\"avatars/robot_male_1\");\n    r3 = getImage(\"avatars/robot_male_3\");\n    r4 = getImage(\"avatars/robot_female_1\");\n    r5 = getImage(\"space/rocketship\");\n};\nvar graphics1 = function() {\n    title = \"Pirate Ship Defense\";\n    enemyName = \"dragons\";\n    empText = \"Magic\";\n    flip = false;\n    leftImg = getImage(\"cute/WoodBlock\");\n    wall = getImage(\"cute/WallBlock\");\n    path = getImage(\"cute/WaterBlock\");\n    r1 = getImage(\"avatars/piceratops-tree\");\n    r2 = getImage(\"avatars/piceratops-sapling\");\n    r3 = getImage(\"avatars/piceratops-ultimate\");\n    r4 = getImage(\"avatars/leafers-tree\");\n    r5 = getImage(\"cute/ChestClosed\");\n};\nvar graphics2 = function() {\n    title = \"Attack of the Leafers!\";\n    enemyName = \"Leafers\";\n    empText = \"Stop\";\n    flip = false;\n    leftImg = getImage(\"cute/PlainBlock\");\n    wall = getImage(\"cute/Rock\");\n    path = getImage(\"cute/WallBlock\");\n    r1 = getImage(\"avatars/leafers-tree\");\n    r2 = getImage(\"avatars/leafers-sapling\");\n    r3 = getImage(\"avatars/leafers-ultimate\");\n    r4 = getImage(\"creatures/OhNoes\");\n    r5 = getImage(\"cute/EnemyBug\");\n};\nvar graphics3 = function() {\n    title = \"Shadow Defense\";\n    flip = false;\n    enemyName = \"shadows\";\n    empText = \"Light\";\n    leftImg = getImage(\"cute/Star\");\n    wall = getImage(\"cute/TreeShort\");\n    path = getImage(\"cute/Selector\");\n    r1 = getImage(\"cute/ShadowSideWest\");\n    r2 = getImage(\"cute/ShadowWest\");\n    r3 = getImage(\"cute/ShadowNorth\");\n    r4 = getImage(\"cute/ShadowSouthWest\");\n    r5 = getImage(\"cute/ShadowNorthEast\");\n};\nvar graphicsArray = [graphics0, graphics1, graphics2, graphics3];\nvar currentGraphics = 0;\n\n/*\ntop is 66\neach is 42 lower than last one\n*/\nvar drawBackground = function() {\n    if (!drawBackground.gfx) {\n        var gfx = createGraphics(400, 400, JAVA2D);\n        gfx.background(65, 215, 235);\n        for (var i = 0; i < 64; i++) {\n            var x = (i % 8) * 50;\n            var y = 40 + floor(i/8) * 42;\n            var img = path;\n            if (x < 100) {\n                img = leftImg;\n            }\n            gfx.image(img, x, y, 50, 85);\n        }\n        drawBackground.gfx = gfx;\n    } else {\n        image(drawBackground.gfx, 0, 0);\n    }\n};\n\nvar startMillis = millis();\nvar lastMillis = millis();\nvar t = 0;\n\nvar walls = [];\nvar wallStrength = 10;\nvar playing;\nvar drawWalls = function() {\n    if (walls.length === 0) {\n        walls.length = 8;\n    }\n    for (var i = 0; i < walls.length; i++) {\n        if (typeof walls[i] !== \"number\") {\n            walls[i] = wallStrength;\n        }\n        if (walls[i] > 0) {\n            image(wall, 100, 30 + i * 42, 50, 85);\n            fill(0, 0, 0);\n            textSize(16);\n            textAlign(CENTER, CENTER);\n            if (playing) {\n                text(round(walls[i] * 10), 125, 75 + i*42);\n            }\n        }\n    }\n};\nvar explosions  =[], Explosion;\nvar enemies = [];\nvar Enemy = function(x, row, speed, type) {\n    this.x = x;\n    this.y = 87 + row * 42;\n    this.row = row;\n    this.type = type;\n    this.speed = speed;\n    this.health = 100;\n    this.speedFactor = 1;\n    if (type === 2) {\n        this.speedFactor = 2;\n        this.health = 35;\n    }\n    if (type === 3) {\n        this.speedFactor = 0.4;\n        this.health = 300;\n    }\n    if (type === 4) {\n        this.speedFactor = 1.25;\n        this.health = 10;\n    }\n    if(type === 5) {\n        this.speedFactor = 0.01;\n        this.health = 1000;\n    }\n    this.maxHealth = this.health;\n    this.draw = function() {\n        pushMatrix();\n        translate(this.x + 25, this.y - 25);\n        if (flip) {\n            scale(-1, 1);\n        } else {\n            translate(-50, 0);\n        }\n        var img;\n        if (this.type === 1) {\n            img = r1;\n        } else if (this.type === 2) {\n            img = r2;\n        } else if (this.type === 3) {\n            img = r3;\n        } else if (this.type === 4) {\n            img = r4;\n        } else  if (this.type===5){\n            img = r5;\n        }\n          else  {\n\n            img = getImage(\"cute/Selector\");\n        }\n        if (emp > 0) {\n            if (flip) {\n                rotate(10);\n            } else {\n                rotate(-10);\n            }\n            translate(0, -5);\n        }\n        image(img, 0, 0, 45, 45);\n        popMatrix();\n        fill(255, 0, 0);\n        noStroke();\n        rect(this.x - 20, this.y - 30, (40 * this.health / this.maxHealth), 5);\n    };\n    this.update = function(dt) {\n        if (emp > 0) {\n            return;\n        }\n        dt /= 1000;\n        this.x -= this.speed * this.speedFactor * dt;\n        if (this.x < 150 && this.x > 75) {\n            if (this.type === 4) {\n                for (var i = 0; i < 8; i++) {\n                    walls[i] += dt / 4;\n                }\n                if (this.life === undefined) {\n                    this.life = random(2000, 10000);\n                } else {\n                    this.life -= dt*1000;\n                    if (this.life < 0) {\n                        this.deleteMe = true;\n                        for (i = enemies.length - 1; i >= 0; i--) {\n                            var e = enemies[i];\n                            var d = dist(this.x, this.y, e.x, e.y);\n                            enemies[i].attack(400 / (3 + d/20));\n                        }\n                    }\n                }\n            }\n            if (walls[this.row] > 0) {\n                walls[this.row] -= dt * (attackSpeed / 100);\n                this.x = 150;\n            }\n        }\n        if (this.x < -50) {\n            try {\n                (function() {\n                    return this;\n                })().Output.handleError({\n                    message: \"Nooo!! The \"+enemyName+\" invaded.\"\n                });\n                enemies = [];\n            } catch (err) {}\n        }\n    };\n    this.attack = function(damage) {\n        this.health -= damage;\n        if (this.health <= 0) {\n            this.deleteMe = true;\n            if (this.type === 1) {\n                money += 10;\n            } else if (this.type === 2) {\n                money += 5;\n            } else if (this.type === 3) {\n                money += 25;\n            } else if (this.type === 4) {\n                money += 5;\n            } else if (this.type === 5){\n                money +=125;\n            }\n        }\n    };\n};\nvar incoming = [];\nvar Incoming = function(goalX, goalY, delay) {\n    this.x = goalX + 200;\n    this.y = goalY - 150;\n    this.delay = (delay ? delay : 0);\n    this.yVel = 0;\n    this.spin = 0;\n    this.update = function(dt) {\n        if (this.delay > 0) {\n            this.delay -= dt;\n            return;\n        }\n        this.x -= 200 * dt / 1000;\n        this.y += this.yVel;\n        this.yVel += (75/16) * dt / 1000; // acceleration\n        this.spin += 720 * dt / 1000;\n        if (this.x <= goalX) {\n            this.x = goalX;\n            this.y = goalY;\n            this.spin = 0;\n            this.deleteMe = true;\n        }\n    };\n    this.draw = function() {\n        imageMode(CENTER);\n        pushMatrix();\n        scale(-1, 1);\n        translate(-(this.x + 22.5), this.y - 25);\n        rotate(this.spin);\n        var img = r2;\n        image(img, 0, 0, 45, 45);\n        popMatrix();\n        imageMode(CORNER);\n    };\n};\n\n\nframeRate(30);\nvar missiles = [];\nvar Missile = function(x, y) {\n    this.x = x;\n    this.y = y;\n    this.draw = function() {\n        fill(255, 0, 0);\n        noStroke();\n        ellipse(this.x, this.y, 15, 15);\n    };\n    this.update = function(dt) {\n        dt /= 1000;\n        this.x += 600 * dt;\n        \n        var x1 = this.x, y1 = this.y;\n        for (var i = enemies.length - 1; i >= 0; i--) {\n            var explode = false;\n            if (dist(x1, y1, enemies[i].x, enemies[i].y) < 30) {\n                score += 10;\n                money += 10;\n                enemies[i].attack(100);\n                explode = true;\n            }\n            if (explode && !this.deleteMe) {\n                for (var j = enemies.length - 1; j >= 0; j--) {\n                    if (i === j) {continue;}\n                    var x2 = enemies[j].x, y2 = enemies[j].y;\n                    if (dist(x1, y1, x2, y2) < 100) {\n                        score += 5;\n                        if (dist(x1, y1, x2, y2) < 50) {\n                            enemies[j].attack(75);\n                        } else {\n                            enemies[j].attack(40);\n                        }\n                    }\n                }\n                explosions.push(new Explosion(this.x, this.y, 80, 200));\n            }\n            \n            if (explode) {\n                this.deleteMe = true;\n                return;\n            }\n        }\n        if (this.x >= 450) {\n            this.deleteMe = true;\n        }\n    };\n};\n\nvar cannons = [];\nvar Cannon = function(x, y) {\n    this.x = x;\n    this.y = y;\n    this.chargeTime = reloadTime;\n    this.lastFired = -Infinity;\n    \n    this.draw = function() {\n        var ready;\n        if (t - this.lastFired >= this.chargeTime) {\n            ready = true;\n        } else {\n            ready = false;\n        }\n        pushMatrix();\n        translate(this.x - 8, this.y + 5);\n        scale(0.75, 0.75);\n        rotate(ready ? -20 : 6);\n        fill(30, 30, ready ? 255 : 128);\n        stroke(0, 0, 0);\n        strokeWeight(1);\n        quad(0, -15, 0, 15, 40, 10, 40, -10);\n        ellipse(0, 0, 30, 30);\n        \n        if (ready) {\n            // draw fuse\n            noFill();\n            stroke(0, 0, 0);\n            strokeWeight(2);\n            arc(7, -13, 40, 40, 160, 236);\n            noStroke();\n            fill(255, 255, 0);\n            ellipse(-3, -30, 5, 5);\n            // support?\n            fill(0, 0, 0);\n            ellipse(30, 17, 10, 10);\n        } else {\n            noStroke();\n            fill(255, 255, 255);\n            arc(0, 0, 30, 30, -96, -96 + 360*((t - this.lastFired) / this.chargeTime));\n        }\n        popMatrix();\n    };\n    this.fire = function() {\n        if (t - this.lastFired < this.chargeTime) {\n            return; // cannot fire\n        }\n        this.lastFired = t;\n        missiles.push(new Missile(this.x + 40, this.y + 7));\n    };\n};\n\nvar mouseClicked = function() {\n    for (var i = 0; i < cannons.length; i++) {\n        if (inRange(mouseX, cannons[i].x - 23, cannons[i].x + 23) &&\n            inRange(mouseY, cannons[i].y - 18, cannons[i].y + 20)) {\n            cannons[i].fire();\n            break;\n        }\n    }\n};\n\nExplosion = function(x, y, size, time) {\n    this.x = x;\n    this.y = y;\n    this.maxRadius = size;\n    this.radius = 0;\n    this.life = time;\n    this.t = 0;\n    this.update = function(dt) {\n        this.t += dt;\n        this.radius = this.maxRadius * (this.t / this.life);\n        if (this.t > this.life) {\n            this.deleteMe = true;\n        }\n    };\n    this.draw = function() {\n        fill(0, 174, 255);\n        ellipse(this.x, this.y, this.radius*2, this.radius*2);\n    };\n};\nvar mouseTicks;\n/*var mouseDragged = function() {\n    if (mouseTicks > 20) {\n        mouseClicked();\n    }\n};*/\nvar lastEnemy = 0;\nplaying = false;\nvar loading = 0;\nvar lastMoney = 0;\nvar frame = {\n    c: 0,\n    last: second(),\n    rate: 60,\n    cycle: function() {\n        this.c++;\n        if (this.last !== second()) {\n            this.last = second();\n            this.rate = this.c;\n            this.c = 0;\n        }\n    }\n};\nmouseTicks = 0;\nvar draw = function() {\n    if (mouseIsPressed) {\n        mouseTicks++;\n    } else {\n        mouseTicks = 0;\n    }\ntry {\n    if (!playing) {\n        drawBackground();\n        drawWalls();\n        fill(0, 0, 0);\n        textSize(40);\n        textAlign(CENTER, TOP);\n        text(title, 200, 0);\n        textAlign(CENTER, CENTER);\n        textSize(18);\n        text((enemyName[0].toUpperCase()+enemyName.substr(1, enemyName.length - 1))+\"\\ncome in\\nfrom this\\nside.\", 350, 180);\n        text(\"You place cannons on this side and click them to shoot water balloons.\", 0, 140, 110, 160);\n        text(\"This wall blocks off the \"+enemyName+\" but they can knock it down!\", 120, 130, 120, 200);\n        textAlign(CENTER, 102);\n        textLeading(21);\n        text(\"This game was made by The #1 Base-12 Proponent. If you want to use this program, please click the \\\"Save as a spin-off\\\" button instead of copying.\", 0, 300, 400, 105);\n        if (mouseIsPressed && inRange(mouseX, 115, 285) && inRange(mouseY, 50, 100)) {\n            loading = 1;\n        }\n        textSize(30);\n        if (loading) {\n            loading += 1.5;\n            text(\"Loading... \"+round(loading)+\"%\", 200, 100);\n            if (loading >= 100) {\n                playing = true;\n                startMillis = lastMillis = millis();\n            }\n        } else {\n            colorMode(HSB, 360, 100, 100, 255);\n            fill((millis() / 15) % 360, 100, 100);\n            text(\"Click to play!\", 200, 100);\n            colorMode(RGB, 255);\n            textSize(18);\n            fill(0, 0, 0);\n            text(\"Change Graphics\", 200, 150);\n            if (mouseTicks === 1 && inRange(mouseX, 130, 270) && inRange(mouseY, 125, 175)) {\n                currentGraphics++;\n                graphicsArray[currentGraphics % graphicsArray.length]();\n                drawBackground.gfx = false;\n            }\n        }\n        return;\n    }\n    drawBackground();\n    drawWalls();\n    //t = millis() - startMillis;\n    var dt = millis() - lastMillis;\n    if (dt > 100) {\n        dt = 100;\n    }\n    t += dt;\n    \n    var paused = (upgradingWall || placingCannon);\n    if (paused) {\n        t -= dt;\n    }\n    \n    for (var i = 0; i < cannons.length; i++) {\n        cannons[i].draw();\n        stroke(255, 0, 0);\n        point(cannons[i].x, cannons[i].y);\n    }\n    \n    for (i = 0; i < missiles.length; i++) {\n        missiles[i].draw();\n        if (!paused) {\n            missiles[i].update(dt);\n        }\n        if (missiles[i].deleteMe) {\n            missiles.splice(i, 1);\n            i--;\n        }\n    }\n    \n    for (i = 0; i < enemies.length; i++) {\n        if (!enemies[i]) {\n            continue;\n        }\n        enemies[i].draw();\n        if (!paused) {\n            enemies[i].update(dt);\n        }\n        if (enemies[i].deleteMe) {\n            enemies.splice(i, 1);\n            i--;\n        }\n    }\n    for (i = incoming.length - 1; i >= 0; i--) {\n        if (!incoming[i]) {\n            continue;\n        }\n        var a = incoming[i];\n        if (!paused) {\n            incoming[i].update(dt);\n        }\n        a.draw();\n        if (a.deleteMe) {\n            enemies.push(new Enemy(a.x, floor((a.y - 66) / 42), enemySpeed, 2));\n            incoming.splice(i, 1);\n        }\n    }\n    for (i = explosions.length - 1; i >= 0; i--) {\n        var expl = explosions[i];\n        expl.update(dt);\n        expl.draw();\n        if (expl.deleteMe) {\n            explosions.splice(i, 1);\n        }\n        debug(expl.t);\n    }\n    \n    enemyWaitTime /= pow(1 + enemyGrowthRate, dt / 1000);\n    enemySpeed *= pow(1 + enemySpeedRate, dt / 1000);\n    if (t - lastEnemy > enemyWaitTime) {\n        var randVal = random(100);\n        var type;\n        if (randVal < 40) {\n            type = 1;\n        } else if (randVal < 70) {\n            type = 2;\n        } else if (randVal < 90) {\n            type = 3;\n        } else {\n            type = 4;\n        }\n        enemies.push(new Enemy(450, floor(random() * 8), enemySpeed, type));\n        lastEnemy = t;\n    }\n    if (t - lastMoney > moneyRate && emp <= 0) {\n        money += moneyGain;\n        lastMoney = t;\n    }\n    emp -= paused ? 0 : dt;\n    if (emp < 0) {\n        emp = 0;\n    }\n    if (nextSwarm >= 500 && nextSwarm <= 3500) {\n        fill(255, 0, 0);\n        textAlign(CENTER, CENTER);\n        textSize(30);\n        text(\"SWARM INCOMING!\", 200, 200);\n    }\n    if (nextSwarm <= 0) {\n        if (superSwarm) {\n            // Super swarms: 12 random bots, then a \"wave\", then six more on the third block, not the fourth. 30% chance.\n            for (var i = 0; i < 12; i++) {\n                incoming.push(new Incoming(225, 86 + 42 * floor(random(0, 8)), i*100 ));\n            }\n            for (i = 0; i < 22; i++) {\n                var row = i;\n                if (i >= 8) {\n                    row = (14 - i);\n                }\n                if (i >= 15) {\n                    row = (i - 15);\n                }\n                incoming.push(new Incoming(225, 86 + 42*row, 1700 + i*100));\n            }\n            for (i = 1; i <= 6; i++) {\n                incoming.push(new Incoming(275, 86 + 42*i, 4000));\n            }\n        } else {\n            // Regular swarm. 8 bots on the 4th block.\n            for (var i = 0; i < 8; i++) {\n                incoming.push(new Incoming(225, 86 + 42 * i));\n            }\n        }\n        nextSwarm = random(10000, 40000);\n        superSwarm = (random() < 0.3);\n    }\n    if (!paused) {\n        nextSwarm -= (millis() - lastMillis);\n    }\n    \n    \n    fill(0, 0, 0);\n    textSize(16);\n    textAlign(LEFT, TOP);\n    text(\"Score: \"+score+\"\\nMoney: $\"+money, 0, 0);\n    textSize(15);\n    // shop\n    pushMatrix();\n    var x = 160;\n    translate(x, 0);\n    pushMatrix();\n    translate(0, 20);\n    scale(0.8, 0.8);\n    (new Cannon(0, 0)).draw();\n    popMatrix();\n    textAlign(CENTER, CENTER);\n    text(\"$300\", 0, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 21, x + 33) &&\n            inRange(mouseY, 5, 56) &&\n            money >= 300) {\n        placingCannon = true;\n        mouseTicks += 4;\n    }\n    x += 40;\n    translate(40, 0);\n    \n    image(getImage(\"cute/StoneBlock\"), -10, -4, 25, 42);\n    textAlign(CENTER, CENTER);\n    text(\"$50\", 3, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 15, x + 17) &&\n            inRange(mouseY, 5, 56) &&\n            money >= 50) {\n        upgradingWall = true;\n        mouseTicks = 3;\n    }\n    x += 50;\n    translate(50, 0);\n    \n    fill(0, 0, 128);\n    ellipse(0, 20, 30, 30);\n    fill(255, 255, 255);\n    arc(0, 20, 30, 30, 270, 360);\n    fill(0, 0, 0);\n    textAlign(CENTER, CENTER);\n    if (reloadUpgCost > 999) {\n        textSize(13);\n    }\n    text(\"$\"+reloadUpgCost, 0, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 19, x + 19) &&\n            inRange(mouseY, 5, 56) &&\n            money >= reloadUpgCost) {\n        money -= reloadUpgCost;\n        reloadUpgCost = round(reloadUpgCost * 1.25 / 5) * 5; \n        reloadTime *= 0.8;\n        for (var i = 0; i < cannons.length; i++) {\n            cannons[i].chargeTime *= 0.8;\n        }\n    }\n    x += 40;\n    translate(40, 0);\n    \n    fill(0, 0, 0);\n    textAlign(CENTER, CENTER);\n    textSize(40);\n    text(\"$\", 0, 20);\n    textSize(15);\n    if (moneyUpgCost > 999) {\n        textSize(13);\n    }\n    text(\"$\"+moneyUpgCost, 0, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 18, x + 18) &&\n            inRange(mouseY, 5, 56) &&\n            money >= moneyUpgCost) {\n        money -= moneyUpgCost;\n        moneyUpgCost = round((moneyUpgCost * 1.5) / 5) * 5; \n        moneyRate *= 0.75;\n    }\n    x += 40;\n    translate(40, 0);\n    \n    image(getImage(\"cute/StoneBlockTall\"), -14, -1, 30, 40);\n    textAlign(CENTER, CENTER);\n    text(\"$\"+toughnessUpgCost, 0, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 20, x + 20) &&\n            inRange(mouseY, 5, 56) &&\n            money >= toughnessUpgCost) {\n        money -= toughnessUpgCost;\n        toughnessUpgCost = round((toughnessUpgCost * 1.5) / 5) * 5; \n        attackSpeed *= 0.8;\n    }\n    \n    x += 40;\n    translate(40, 0);\n    \n    fill(255, 0, 0);\n    noStroke();\n    ellipse(0, 25, 40, 30);\n    fill(0, 0, 0);\n    textSize(round(50 / empText.length));\n    text(empText, 0, 25);\n    textSize(15);\n    text(\"$\"+empCost, 0, 50);\n    if (mouseTicks === 1 &&\n            inRange(mouseX, x - 20, x + 20) &&\n            inRange(mouseY, 5, 56) &&\n            money >= empCost) {\n        money -= empCost;\n        emp = empLasts;\n    }\n    \n    popMatrix();\n    \n    if (placingCannon) {\n        textSize(20);\n        text(\"Place a cannon in an\\nempty dirt block.\\n<=========\\n(click here to cancel)\", 250, 190);\n        if (mouseTicks === 1) {\n            var xx = floor(mouseX / 50);\n            if (xx >= 2) {\n                placingCannon = false;\n            }\n            var yy = floor((mouseY - 66) / 42);\n            if (yy < 0) {\n                placingCannon = false;\n            }\n            if (placingCannon) {\n                cannons.push(new Cannon(xx * 50 + 25, yy * 42 + 87));\n                mouseX = -123454321; // don\'t fire the cannon\n                mouseY = -31415926;\n                placingCannon = false;\n                money -= 300;\n            }\n        }\n    }\n    if (upgradingWall) {\n        textSize(20);\n        text(\"Click a wall to upgrade it\\n<=========\\n(click here to cancel)\", 250, 190);\n        if (mouseTicks === 1) {\n            var xx = floor(mouseX / 50);\n            if (xx !== 2) {\n                upgradingWall = false;\n            }\n            var yy = floor((mouseY - 66) / 42);\n            if (yy < 0) {\n                upgradingWall = false;\n            }\n            if (upgradingWall) {\n                walls[yy] += 2.5;\n                money -= 50;\n                upgradingWall = false;\n            }\n        }\n    }\n    \n    lastMillis = millis();\n} catch (err) {\n    debug(err);\n}\n};\nmouseMoved = function() {\n    status(mouseX+\", \"+mouseY+\"  and there are \"+explosions.length+\" explosions\");\n};";
window.liveEditor = new LiveEditor({
                el: $("#sample-live-editor"),
                code: code,
                width: 400,
                height: 400,
                editorHeight: "80%",
                autoFocus: true,
                workersDir: "../../build/workers/",
                externalsDir: "../../build/external/",
                imagesDir: "../../build/images/",
                soundsDir: "../../sounds/",
                execFile: outputUrl,
                jshintFile: "../../build/external/jshint/jshint.js",
                newErrorExperience: true,
            });
            liveEditor.editor.on("change", function() {
                window.localStorage["test-code"] = liveEditor.editor.text();
            });
            ScratchpadAutosuggest.init(liveEditor.editor.editor);
            </script>
        </body>
        </html>
        