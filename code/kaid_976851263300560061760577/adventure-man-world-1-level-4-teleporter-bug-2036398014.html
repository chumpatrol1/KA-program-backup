<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Adventure Man (World 1, Level 4 Teleporter bug)</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
<style>
        body {
            padding: 20px;
        }
        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Adventure Man (World 1, Level 4 Teleporter bug)</h1>
    <div id="sample-live-editor"></div>
    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>
    <script>
    var outputUrl = "../output.html";
var code = "/**Adventure Man (World 1, Level 4 Teleporter bug) by David Elijah de Siqueira Campos McLaughlin\nOriginal size(400, 400);\nOriginally Created on 2013-09-14T19:41:36Z by kaid_976851263300560061760577\nLast Edited: 2013-09-14T19:41:36Z\nVotes/Spinoffs: 1/-1\nOriginally Created: 2013-09-15T12:20:34Z from origin 2005600910 with similarity of 0.9967658325114114\nOriginal Link: https://www.khanacademy.org/computer-programming/adventure-man-world-1-level-4-teleporter-bug/2036398014\nRetrieved On: 07-Nov-2022 (17:07:59.028548)**/\
";

code = code + "\n\n//This will be a game soon. Come back later.\n//Use WASD to move. Shift to run. Space to jump. P to pause.\n//Wait on a Teleporter to teleport.\n\n//COMING SOON:\n//Press Q to open inventory.\n//Press E to use items on map.\n//Left click mouse to use items in hand.\n//Right click mouse to use selected magic.\n//Ben becomeing a playable character.\n\n\n\n \n\n\n\n///////////VARIABLES/////////////\nvar levels=[8];\nvar page=0;\nvar keys=[];\nvar kt=0;\nvar kta=[];\nvar kwt=0;\nvar debugMode=0;\nvar introTime=0;\nvar keyPressed = function() { \n  keys[keyCode] = true; };\nvar keyReleased = function() { \n  keys[keyCode] = false; };\nvar cm;\nvar xpos=[];var espeed=[];var eleDir=[];var onEle=[];\nvar lvlMax=800;\n\n//////////BUTTONS////////////////\nvar font=createFont(\"Comic Sans MS\", 20);\nvar pos=0;var time = 0;var selected;var buttonAllow=true;\nvar clicked;\nvar button = function(x,y,length,height,btext,textsize) {\nselected=false;clicked=false;\nnoStroke(); var clr=color(64, 64, 64); var clr2=color(153, 153, 153);\nvar clr3=color(33, 33, 33);\nif (mouseY <= y+height && mouseY >= y && mouseX >= x && mouseX <= x+length && mouseIsPressed && mouseButton === LEFT) {\nfill(168, 168, 168); clr=color(214, 214, 214);selected^=true;\nclr2=color(145, 145, 145); clr3=color(0, 0, 0); pos=1;}\nelse{pos=0;}\nif(time===0&&selected){buttonAllow=true;}\nelse{buttonAllow=false;}\nif (mouseY <= y+height && mouseY >= y && mouseX >= x && mouseX <= x+length && mouseIsPressed && mouseButton === LEFT &&buttonAllow) {clicked=true;}\nstroke(clr);\nstrokeWeight(2);\nline(x+1,y+height,x+length-1,y+height);\nline(x+length,y+1,x+length,y+height-1);\nstroke(clr2);\nfill(clr3);\nif (mouseY <= y+height && mouseY >= y && mouseX >= x && mouseX <= x+length) {fill(115, 115, 115);}\nelse {fill(clr3);}\ntextAlign(CENTER,CENTER);\ntextFont(font, textsize);\ntext(btext,x+length/2,y+height/2.1+pos);\ntextAlign(LEFT,LEFT);\n};\n\n///////////STICKMAN////////////\nvar rr=8;var gg=8;var bb=8;var o=255;\nvar stickstate=\"crouching\";\nvar sTick=0;\nvar sTickRate=0.2;\nvar sTickFrames=3;\nvar stickSpeed=3;\nvar RL=27;var LL=27;\nvar stickDir=\"right\";\nvar stickRunning=false;\nvar ft=0;\nvar jt=0;\nvar falling=false;\nvar grounded=false;\nvar djumped=false;\nvar stickX=300;var stickY=309;\nvar hitbox=[];\nvar constricted=false;\nvar stickman=function(x,y){\n    ft+=1;\n    hitbox=[stickX-7,stickY-7,stickX+7,stickY+51];\n    if(keyIsPressed&&keys[65]&&!keys[68]){stickDir=\"left\";}\n    else if(keyIsPressed&&keys[68]&&!keys[65]){stickDir=\"right\";}\n    if(keyIsPressed&&!falling&&!constricted){\n        if(keys[32]){stickstate=\"jumping\";}\n        else if(keys[83]){stickstate=\"crouching\";}\n        else if(keys[65]&&!keys[68]){stickstate=\"walkingL\";}\n        else if(keys[68]&&!keys[65]){stickstate=\"walkingR\";}\n        else{stickstate=\"still\";sTick=0;}\n    }\n    else if(!falling&&!constricted){stickstate=\"still\";sTick=0;}\n    else if(constricted){stickstate=\"crouching\";}\n    strokeWeight(2);noFill();stroke(rr,gg,bb,o);\n    if(stickstate===\"still\"&&!falling){\n        hitbox=[stickX-4,stickY-7,stickX+4,stickY+51];\n        ellipse(x,y,14,14);\n        line(x,y+7,x,y+30);\n        if(stickDir===\"right\"){\n        line(x,y+30,x-2,y+42);\n        line(x,y+30,x+2,y+42);\n        line(x+2,y+50,x+2,y+42);\n        line(x-2,y+50,x-2,y+42);\n        line(x,y+9,x-3,y+21);\n        line(x,y+9,x+1,y+22);\n        line(x-3,y+21,x-2,y+29);\n        line(x+1,y+21,x+3,y+29);\n        }\n        else if(stickDir===\"left\"){\n        line(x,y+30,x+2,y+42);\n        line(x,y+30,x-2,y+42);\n        line(x-2,y+50,x-2,y+42);\n        line(x+2,y+50,x+2,y+42);\n        line(x,y+9,x+3,y+21);\n        line(x,y+9,x-1,y+22);\n        line(x+3,y+21,x+2,y+29);\n        line(x-1,y+21,x-3,y+29);\n        }\n    }\n    else if(stickstate===\"crouching\"&&!falling){\n        hitbox=[stickX-5,stickY+16,stickX+5,stickY+51];\n        y+=23;sTickFrames=6;stickSpeed=1;sTickRate=0.2;\n        ellipse(x,y,14,14);\n        line(x,y+7,x,y+18);\n        line(x,y+18,x-5,y+20);\n        line(x,y+18,x+5,y+20);\n        line(x-5,y+20,x-3,y+LL);\n        line(x+5,y+20,x+3,y+RL);\n        line(x,y+9,x+4,y+11);\n        line(x,y+9,x-4,y+11);\n        line(x-4,y+11,x-3,y+15);\n        line(x+4,y+11,x+3,y+15); \n        if(keys[65]&&!keys[68]){cm=1;stickX-=stickSpeed;}\n        else if(keys[68]&&!keys[65]){cm=1;stickX+=stickSpeed;}\n        else{cm=0;}\n        if(cm){\n            if(sTick<1){LL=25;RL=27;}\n            else if(sTick<2){LL=23;}\n            else if(sTick<3){LL=25;}\n            else if(sTick<4){LL=27;RL=25;}\n            else if(sTick<5){RL=23;}\n            else if(sTick<6){RL=25;}\n        }\n        else{LL=27;RL=27;}\n    }\n    else if(stickstate===\"walkingR\"&&!falling){\n        sTickFrames=4;\n        hitbox=[stickX-4,stickY-7,stickX+6,stickY+51];\n        if(keys[16]){stickSpeed=4;sTickRate=0.4;stickRunning=1;}\n        else{stickSpeed=2;sTickRate=0.2;stickRunning=0;}\n        if(keys[68]){stickX+=stickSpeed;}\n        ellipse(x,y,14,14);\n        line(x,y+7,x,y+30);\n        if(sTick<1){\n        line(x,y+30,x-1,y+42);\n        line(x,y+30,x+6,y+38);\n        line(x+9,y+49,x+6,y+38);\n        line(x-2,y+50,x-1,y+42);\n        line(x,y+9,x-3,y+19);\n        line(x,y+9,x+3,y+21);\n        line(x-3,y+19,x-1,y+27);\n        line(x+3,y+21,x+7,y+27);\n        }\n        else if(sTick<2){\n        line(x,y+30,x,y+42);\n        line(x,y+30,x+3,y+38);\n        line(x+3,y+50,x+3,y+38);\n        line(x-1,y+50,x,y+42);\n        line(x,y+9,x-1,y+21);\n        line(x,y+9,x+1,y+21);\n        line(x-1,y+21,x+2,y+29);\n        line(x,y+21,x+4,y+29);\n        }\n        else if(sTick<3){\n        line(x,y+30,x+1,y+42);\n        line(x,y+30,x+2,y+38);\n        line(x,y+50,x+2,y+38);\n        line(x-1,y+50,x+1,y+42);\n        line(x,y+9,x,y+21);\n        line(x,y+9,x+-1,y+22);\n        line(x,y+21,x+1,y+29);\n        line(x+-1,y+21,x+0,y+29);\n        }\n        else if(sTick<4){\n        line(x,y+30,x+1,y+42);\n        line(x,y+30,x+4,y+38);\n        line(x+5,y+50,x+4,y+38);\n        line(x,y+50,x+1,y+42);\n        line(x,y+9,x-1,y+19);\n        line(x,y+9,x+2,y+21);\n        line(x-1,y+19,x+1,y+27);\n        line(x+2,y+21,x+4,y+28);\n        }\n    }\n    else if(stickstate===\"walkingL\"&&!falling){\n        sTickFrames=4;\n        hitbox=[stickX-6,stickY-7,stickX+4,stickY+51];\n        if(keys[16]){stickSpeed=4;sTickRate=0.4;stickRunning=1;}\n        else{stickSpeed=2;sTickRate=0.2;stickRunning=0;}\n        if(keys[65]){stickX-=stickSpeed;}\n        ellipse(x,y,14,14);\n        line(x,y+7,x,y+30);\n        if(sTick<1){\n        line(x,y+30,x+1,y+42);\n        line(x,y+30,x-6,y+38);\n        line(x-9,y+49,x-6,y+38);\n        line(x+2,y+50,x+1,y+42);\n        line(x,y+9,x+3,y+19);\n        line(x,y+9,x-3,y+21);\n        line(x+3,y+19,x+1,y+27);\n        line(x-3,y+21,x-7,y+27);\n        }\n        else if(sTick<2){\n        line(x,y+30,x,y+42);\n        line(x,y+30,x-3,y+38);\n        line(x-3,y+50,x-3,y+38);\n        line(x+1,y+50,x,y+42);\n        line(x,y+9,x+1,y+21);\n        line(x,y+9,x-1,y+21);\n        line(x+1,y+21,x-2,y+29);\n        line(x,y+21,x-4,y+29);\n        }\n        else if(sTick<3){\n        line(x,y+30,x-1,y+42);\n        line(x,y+30,x-2,y+38);\n        line(x,y+50,x-2,y+38);\n        line(x+1,y+50,x-1,y+42);\n        line(x,y+9,x,y+21);\n        line(x,y+9,x+1,y+22);\n        line(x,y+21,x-1,y+29);\n        line(x+1,y+21,x,y+29);\n        }\n        else if(sTick<4){\n        line(x,y+30,x-1,y+42);\n        line(x,y+30,x-4,y+38);\n        line(x-5,y+50,x-4,y+38);\n        line(x,y+50,x-1,y+42);\n        line(x,y+9,x+1,y+19);\n        line(x,y+9,x-2,y+21);\n        line(x+1,y+19,x-1,y+27);\n        line(x-2,y+21,x-4,y+28);\n        }\n    }\n    else if(stickstate===\"jumping\"){\n        jt+=1;\n        if(jt<=23){ft=0;}falling=true;\n        if(jt<=23){stickY-=-0.04*jt*jt+0.9*jt;}\n    }\n    else if(stickstate===\"doubleJumping\"){\n        if(stickDir===\"right\"){\n            \n        }\n        else if(stickDir===\"left\"){\n            \n        }\n    }\n    if(stickDir===\"right\"){\n        strokeWeight(1);line(x,y+2,x+5,y+2);\n        strokeWeight(2);point(x+2,y-2);\n    }\n    if(stickDir===\"left\"){\n        strokeWeight(1);line(x,y+2,x-5,y+2);\n        strokeWeight(2);point(x-2,y-2);\n    }\n    if(falling){\n        hitbox=[stickX-4,stickY-7,stickX+4,stickY+51];\n        ellipse(x,y,14,14);\n        line(x,y+7,x,y+30);\n        if(stickDir===\"right\"){\n        line(x,y+30,x-4,y+37);\n        line(x,y+30,x+9,y+36);\n        line(x+13,y+43,x+9,y+36);\n        line(x-14,y+40,x-4,y+37);\n        line(x,y+9,x-7,y+14);\n        line(x,y+9,x+5,y+16);\n        line(x-7,y+14,x-2,y+23);\n        line(x+5,y+16,x+11,y+10);\n        if(keyPressed&&keys[68]){stickX+=2;}\n        }\n        else if(stickDir===\"left\"){\n        hitbox=[stickX-4,stickY-7,stickX+4,stickY+51];\n        line(x,y+30,x+4,y+37);\n        line(x,y+30,x-9,y+36);\n        line(x-13,y+43,x-9,y+36);\n        line(x+14,y+40,x+4,y+37);\n        line(x,y+9,x+7,y+14);\n        line(x,y+9,x-5,y+16);\n        line(x+7,y+14,x+2,y+23);\n        line(x-5,y+16,x-11,y+10);\n        if(keyPressed&&keys[65]){stickX-=2;}\n        }\n    }\n    sTick+=sTickRate;\n    if(sTick>sTickFrames){sTick=0;}\n    if(!falling&&stickstate===\"jumping\"){stickstate=\"still\";}\n    if(!falling&&stickstate===\"doubleJumping\"){stickstate=\"still\";}\n    if(falling){stickY+=0.03*ft*ft+0.1*ft;}\n    else{ft=0;djumped=false;}\n    falling=true;\n};\n\n///////////GROUND//////////////\n//Normal\nvar r2=8;var g2=8;var b2=8;var op=255;\nvar r3=94;var g3=94;var b3=94;var opp=40;\nvar h2=0;\nvar g=function(x,y,l,h){\n    h2=h;\n    strokeWeight(2);stroke(r2,g2,b2,op);fill(r3,g3,b3,opp);\n    rect(x,y,l,h);\n    //Walls\n    if(stickX-2.9<x+l+(hitbox[2]-hitbox[0])/2&&stickX>x+l&&hitbox[1]<y+-0.1+h&&hitbox[3]>y+0.1){\n        stickX=x+l+(hitbox[2]-hitbox[0])/2+3;\n    }\n    if(stickX+2.9>x-(hitbox[2]-hitbox[0])/2&&stickX<x&&hitbox[1]<y+-0.1+h&&hitbox[3]>y+0.1){\n        stickX=x-(hitbox[2]-hitbox[0])/2-3;\n    }\n    //Floor\n    if(h<5){h=20;}\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>y&&hitbox[3]<y+h){falling=false;jt=0;stickY=y-51.1;}\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>=y-0.1&&hitbox[3]<y+h){falling=false;}\n    //Celling\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[1]>y&&hitbox[1]<y+h&&falling){\n       jt=30;\n    }\n    else if(hitbox[2]>x+0.9&&hitbox[0]<x-0.9+l&&stickY-23<y+h2&&hitbox[3]>y+h2&&stickstate===\"crouching\"){\n       constricted=true;\n    }\n    else if(hitbox[2]>x+1&&hitbox[0]<x-1+l&&stickY<y+h2&&hitbox[3]-5>y+h2&&stickstate!==\"crouching\"){\n       constricted=true;\n    }\n    if(stickX<x+l+1+(hitbox[2]-hitbox[0])/2&&stickX>x+l+2.0){\n        constricted=false;\n    }\n    if(stickX>x-1-(hitbox[2]-hitbox[0])/2&&stickX<x-2.0){\n        constricted=false;\n    }\n};\n//Horizontal Evevator\nvar eleX=function(x,y,l,d,num,speed){\n    if(!xpos[num]){xpos[num]=1;}\n    if(!espeed[num]){espeed[num]=1;}\n    if(!eleDir[num]){eleDir[num]=\"right\";}\n    if(eleDir[num]===\"right\"){\n        xpos[num]+=espeed[num];\n        if(xpos[num]>=d){xpos[num]=d;eleDir[num]=\"left\";}\n    }\n    else if(eleDir[num]===\"left\"){\n        xpos[num]-=espeed[num];\n        if(xpos[num]<=0){xpos[num]=0;eleDir[num]=\"right\";}\n    }\n    x+=xpos[num];\n    h2=1;\n    strokeWeight(2);stroke(r2,g2,b2,op);noFill();\n    rect(x,y,l,1);\n    //Walls\n    if(stickX-4<x+l+(hitbox[2]-hitbox[0])/2&&stickX>x+l&&hitbox[1]<y+-0.1+1&&hitbox[3]>y+0.1){\n        stickX=x+l+(hitbox[2]-hitbox[0])/2+3;\n    }\n    if(stickX+4>x-(hitbox[2]-hitbox[0])/2&&stickX<x&&hitbox[1]<y+-0.1+1&&hitbox[3]>y+0.1){\n        stickX=x-(hitbox[2]-hitbox[0])/2-3;\n    }\n    //Floor\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>y&&hitbox[3]<y+20){falling=false;jt=0;stickY=y-51.1;onEle[num]=true;}\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>=y-0.1&&hitbox[3]<y+20){falling=false;onEle[num]=true;}\n    else{onEle[num]=false;}\n    //Celling\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[1]>y&&hitbox[1]<y+5&&falling){\n       jt=30;\n    }\n    else if(hitbox[2]>x+0.9&&hitbox[0]<x-0.9+l&&stickY-23<y+h2&&hitbox[3]>y+h2&&stickstate===\"crouching\"){\n       constricted=true;\n    }\n    else if(hitbox[2]>x+1&&hitbox[0]<x-1+l&&stickY<y+h2&&hitbox[3]-12>y+h2&&stickstate!==\"crouching\"){\n       constricted=true;\n    }\n    if(stickX<x+l+1+(hitbox[2]-hitbox[0])/2&&stickX>x+l+2.0){\n        constricted=false;\n    }\n    if(stickX>x-1-(hitbox[2]-hitbox[0])/2&&stickX<x-2.0){\n        constricted=false;\n    }\n    if(onEle[num]&&eleDir[num]===\"right\"){\n        stickX+=espeed[num];}\n    if(onEle[num]&&eleDir[num]===\"left\"){\n        stickX-=espeed[num];}\n};\n\n//Vertical Evevator\nvar eleY=function(x,y,l,d,num,speed){\n    if(!xpos[num]){xpos[num]=1;}\n    if(!espeed[num]){espeed[num]=1;}\n    if(!eleDir[num]){eleDir[num]=\"down\";}\n    if(eleDir[num]===\"down\"){\n        xpos[num]+=espeed[num];\n        if(xpos[num]>=d){xpos[num]=d;eleDir[num]=\"up\";}\n        if(!falling&&hitbox[2]>x&&hitbox[0]<x+l&&y+xpos[num]>=stickY-7&&hitbox[3]-5>y+xpos[num]){xpos[num]=stickY-7-y;eleDir[num]=\"up\";}\n    }\n    else if(eleDir[num]===\"up\"){\n        xpos[num]-=espeed[num];\n        if(xpos[num]<=0){xpos[num]=0;eleDir[num]=\"down\";}\n    }\n    y+=xpos[num];\n    h2=1;\n    strokeWeight(2);stroke(r2,g2,b2,op);noFill();\n    rect(x,y,l,1);\n    //Walls\n    if(stickX-4<x+l+(hitbox[2]-hitbox[0])/2&&stickX>x+l&&hitbox[1]<y+-0.1+1&&hitbox[3]>y+0.1){\n        stickX=x+l+(hitbox[2]-hitbox[0])/2+3;\n    }\n    if(stickX+4>x-(hitbox[2]-hitbox[0])/2&&stickX<x&&hitbox[1]<y+-0.1+1&&hitbox[3]>y+0.1){\n        stickX=x-(hitbox[2]-hitbox[0])/2-3;\n    }\n    //Floor\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>y&&hitbox[3]<y+20){falling=false;jt=0;stickY=y-51.1;onEle[num]=true;}\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[3]>=y-0.1&&hitbox[3]<y+20){falling=false;onEle[num]=true;}\n    else{onEle[num]=false;}\n    //Celling\n    if(hitbox[2]>x&&hitbox[0]<x+l&&hitbox[1]>y&&hitbox[1]<y+8&&falling){\n       jt=30;\n    }\n    if(onEle[num]&&eleDir[num]===\"down\"){\n        stickY+=espeed[num];}\n    if(onEle[num]&&eleDir[num]===\"up\"){\n        stickY-=espeed[num];}\n};\n\n/////////EDIT NAME//////////////\nvar name=\"Stick Figure\";\nvar named=false;\nvar sixteen=false;\nvar klock=false;\nvar alphabet=[\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];\nvar Alphabet=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"];\nvar editName=function(){\n    background(69, 69, 69);noStroke();\n    fill(245, 245, 245);textSize(30);\n    textAlign(CENTER,CENTER);\n    text(\"What shall this Hero\'s\\nname be?\",200,53);\n    rect(8,126,384,67);\n    fill(15, 15, 15);textSize(54);\n    text(name,200,161);\n    fill(60, 224, 52);\n    rect(298,303,81,62);\n    button(298,303,79,60,\"OK\",47);\n    if(selected&&name!==\"\"){named=true;introTime=0;page=1;}\n    fill(245, 61, 61);noStroke();\n    rect(22,303,57,62);\n    button(21,303,56,60,\"X\",47);\n    if(clicked){name=\"\";}\n    textAlign(LEFT,LEFT);\n    if(keyIsPressed&&keys[16]){sixteen=true;}\n    else{sixteen=false;}\n    if(keyIsPressed&&name.length<8){\n        for(var l=65;l<=90;l+=1){\n            if(sixteen&&keys[l]&&kta[l]<1){\n                name+=Alphabet[l-65];\n            }\n            else if(keys[l]&&kta[l]<1){\n                name+=alphabet[l-65];\n            }\n        }\n        if(keys[32]&&kwt<1){name+=\" \";}\n    }\n};\n\n////////TITLE PAGE//////////////\nvar titlePage=function(){\nbackground(240, 240, 240);\nfill(0, 0, 0);\ntextFont(font,61);\ntext(\"Drawn to \\nLife™\",7,68);\ntextFont(font,25);\ntext(\"Thanks for voting!!!\",115,290);\ntext(\"There are \\n\"+levels+\" levels!\",278,161);\nrotate(45);\ntranslate(42,-44);\nfill(250, 5, 5);\nstroke(10, 6, 6);\nrect(42,187,220,26);\nline(43,206,260,206);\nline(43,195,260,195);\nnoStroke();\nfill(255, 0, 0);\nrect(18,187,25,27);\nfill(222, 205, 118);\ntriangle(262,186,313,201,262,214);\nfill(199, 199, 199);\nrect(34,187,9,27);\nfill(56, 56, 56);\ntriangle(293,195,313,201,292,206);\nstroke(128, 128, 128);\nline(39,187,39,212);\nline(36,187,36,212);\nresetMatrix();\nstroke(56, 56, 56);\nbutton(143,125,121,26,\"Play!\",25);\nif(selected){introTime=0;\nif(!named){page=0.5;}\nelse{page=1;}}\nbutton(143,173,121,26,\"About\",25);\nif(selected){page=2;}\nbutton(143,220,121,26,\"Options\",25);\nif(selected){page=3;}\nstickman(stickX,stickY);\ng(139,360,269,47);\nif(introTime<2){stickX=300;stickY=287;ft=0;}\nfill(0, 0, 0);textSize(12);\ntext(\"Code and concept by Ben F, Thanks Knowledge\\nWorld 4 Background\",151,377);\n};\n\n/////////ABOUT/////////////////\nvar about=function(){\n    background(153, 180, 235);\n    textSize(20);fill(0, 0, 0);\n    text(\"Hi and welcome to the STGM\'s \\nSecond Game! I hope you like it. \\nThis game is about Hiro a person\\nwho was Drawn to Life!\\n\\n\\nThank You Ben F. for the code.\\n\\nFrom, the STGM\\n\\nCan you find my Easter Egg?\",17,35);\n    button(6,368,51,22,\"Back\",18);\n    if(selected){page=0;}\n};\n\n//////////OPTIONS//////////////\nvar options=function(){\n    background(245, 245, 120);\n    textSize(31);fill(0, 0, 0);\n    text(\"Name: \"+name,6,42);\n    button(329,16,65,28,\"Edit\",26);\n    if(selected){page=0.5;}\n    button(6,368,51,22,\"Back\",18);\n    if(selected){page=0;}\n};\n\n//////////BACKGROUNDS//////////////\n//Clouds\nvar clouda=[];\nvar clouds=function(d,h,sz){\n    if(!sz){sz=40;}\n    var cloud={\n      x:405+sz,\n      y:random(0,h),\n      h:random(sz-(sz/3),sz+(sz/3)),\n      w:random((sz*2)-(sz/3),(sz*2)+(sz/3)),\n      m:random(0.3,1.5),\n      o:random(60,150)\n    };\n    if(round(random(0,d))===d){clouda.push(cloud);}\n    if(clouda.length>20){clouda.shift();}\n    for(var i=0;i<clouda.length;i+=1){\n        fill(255, 255, 255, clouda[i].o);\n        ellipse(clouda[i].x,clouda[i].y,clouda[i].w,clouda[i].h);\n        clouda[i].x-=clouda[i].m;\n    }\n};\nvar worldPage=1;\nvar bg=function(){\nnoStroke();\nbackground(150, 255, 255);\nfill(200, 255, 50);\nrect(-11,350,410,50);\nfill(255, 0, 0);\nrect(150,250,100,100);\nfill(124, 50, 0);\nrect(190,325,20,25);\nfill(0, 255, 255);\nrect(160,260,25,25);\nfill(200, 0, 255);\nrect(225,285,15,15);\nfill(0, 0, 0);\ntriangle(200,200,125,250,275,250);\nif(worldPage===2){\n    noStroke();\n    fill(166, 255, 255);\n    rect(0,0,400,400);\n    clouds(35,120);\n    fill(133, 98, 68);\n    quad(35,300,29,400,81,400,70,300);\n    fill(14, 128, 27);\n    ellipse(26,293,53,47);\n    ellipse(52,306,44,35);\n    ellipse(26,267,41,47);\n    ellipse(50,247,45,41);\n    ellipse(70,293,30,26);\n    ellipse(77,278,35,28);\n    ellipse(69,260,43,34);\n    ellipse(43,284,53,47);\n    ellipse(343,357,24,25);\n    ellipse(338,340,24,25);\n    ellipse(347,330,24,25);\n    ellipse(361,329,24,25);\n    ellipse(338,340,24,25);\n    ellipse(367,338,24,25);\n    ellipse(359,346,32,25);\n    fill(255, 0, 0);\n    ellipse(338,340,5,5);\n    ellipse(351,332,5,5);\n    ellipse(366,326,5,5);\n    ellipse(364,344,5,5);\n    fill(39, 232, 42);\n    ellipse(173,500,517,280);\n    ellipse(367,493,517,280);\n    ellipse(33,494,517,280);\n}\nif(worldPage===3){\nfill(2, 0, 33);\nrect(0,0,400,400);\nfor(var i=0;i<400;i+=1){\n    strokeWeight(1);\n    stroke(40-(i*0.16), 20-(i*1), 70-(i*0.32),255-(i*0.33));\n    line(0,i,400,i);\n}\nnoStroke();\nfill(59, 59, 59);\nrect(31,200,88,200);\nrect(155,126,75,274);\nrect(296,155,85,245);\nrect(249,273,75,127);\nfill(241, 255, 41);\nrect(166,140,9,9);\nrect(166,189,9,9);\nrect(192,170,9,9);\nrect(211,205,9,9);\nrect(166,140,9,9);\nrect(182,264,9,9);\nrect(204,313,9,9);\nrect(88,212,9,9);\nrect(47,258,9,9);\nrect(74,274,9,9);\nrect(88,314,9,9);\nrect(312,212,9,9);\nrect(350,248,9,9);\nrect(338,167,9,9);\nrect(258,284,9,9);\nrect(328,304,9,9);\nrect(357,342,9,9);\nrect(280,379,9,9);\nrect(169,342,9,9);\nrect(62,368,9,9);\nfill(211, 212, 176);\nellipse(90,63,73,73);\nfill(200, 204, 167);\nellipse(90,84,34,20);\nellipse(67,71,15,14);\nellipse(114,63,20,20);\nellipse(95,67,9,11);\nellipse(74,48,20,20);\nellipse(103,45,30,17);\nfill(192, 199, 162);\nellipse(73,47,10,12);\nellipse(112,63,13,10);\nellipse(90,84,24,15);\nfill(183, 189, 157);\nellipse(89,84,13,8);\n}    \nif(worldPage===4){fill(21, 12, 199);\n\n    \n    \n\nbackground (250, 250, 250);\n    noStroke();\n    fill (204, 12, 140);\n    rect (45, 0, 1, 400);\n    fill (43, 133, 166);\n    rect (0, 40, 400, 1);\n    rect (0, 55, 400, 1); \n    rect (0, 70, 400, 1);\n    rect (0, 85, 400, 1);\n    rect (0, 100, 400, 1);\n    rect (0, 115, 400, 1);\n    rect (0, 130, 400, 1);\n    rect (0, 145, 400, 1);\n    rect (0, 160, 400, 1);\n    rect (0, 175, 400, 1);\n    rect (0, 190, 400, 1);\n    rect (0, 205, 400, 1);\n    rect (0, 220, 400, 1);\n    rect (0, 235, 400, 1);\n    rect (0, 250, 400, 1);\n    rect (0, 265, 400, 1);\n    rect (0, 280, 400, 1);\n    rect (0, 295, 400, 1);\n    rect (0, 310, 400, 1);\n    rect (0, 325, 400, 1);\n    rect (0, 340, 400, 1);\n    rect (0, 355, 400, 1);\n    rect (0, 370, 400, 1);\n    rect (0, 385, 400, 1);\n    rect (0, 400, 400, 1);\n    fill (140, 140, 140);\n    ellipse (23, 60, 17, 17);\n    ellipse (23, 210, 17, 17);\n    ellipse (23, 360, 17, 17);\n    fill (0, 0, 0); }  \n};\n\n///////WORLD SELECT////////////\nvar worlds=4;\nvar worldselect=function(){\n    background(227, 227, 227);\n    if(introTime<2){stickX=200;stickY=58;ft=0;}\n    textAlign(CENTER,CENTER);\n    if(worldPage<=worlds){\n    textSize(50);\n    translate(98,154);\n    scale(0.5,0.5);\n    bg();\n    resetMatrix();\n    fill(227);\n    rect(0,0,96,400);\n    rect(0,0,400,154);\n    rect(300,0,102,400);\n    rect(0,356,400,50);\n    fill(255);\n    text(\"World \"+worldPage,199,249);}\n    else{fill(26);text(\"More worlds coming\\nsoon!\",199,249);}\n    stickman(stickX,stickY);\n    g(0,108,400,1);\n    textAlign(LEFT,LEFT);\n    strokeWeight(3);stroke(56);\n    line(299,155,299,353);\n    line(298,354,99,354);\n    button(6,188,16,45,\"<\",43);\n    if(clicked&&worldPage!==1){worldPage-=1;}\n    button(379,188,16,45,\">\",43);\n    if(clicked&&worldPage!==worlds+1){worldPage+=1;}\n    if(worldPage!==worlds+1){\n    button(166,368,65,22,\"Select\",18);\n    if(selected){page=4;}}\n    button(6,368,51,22,\"Back\",18);\n    if(clicked){introTime=0;page=0;}\n};\n\n/////////LEVEL SELECT///////////\nvar level=1;\nvar levelselect=function(){\n    background(227, 227, 227);\n    for(var w=0;w<levels[worldPage-1];w+=1){\n        var wx=w*75;var wy=0;\n        if(w>w%5){\n            wy+=62;\n            wx-=375;}\n        if(w>w%10){\n            wy+=62;\n            wx-=375;}\n        if(w>w%15){\n            wy+=62;\n            wx-=375;}\n        if(w>w%20){\n            wy+=62;\n            wx-=375;}\n        button(23+wx,22+wy,46,39,w+1,31);\n        if(selected){introTime=0;level=w+1;page=worldPage+4;}\n    }\n    button(6,368,51,22,\"Back\",18);\n    if(clicked){page=1;}\n    textAlign(CENTER,CENTER);\n    textSize(40);fill(23);\n    text(\"World \"+worldPage,200,373);\n    textAlign(LEFT,LEFT);\n};\n\n//////////PAUSE MENU/////////////\nvar pausePg=5;\nvar pause=function(){\n    resetMatrix();\n    fill(61, 61, 61, 40);\n    rect(0,0,400,400);\n    textSize(90);fill(250, 250, 250);\n    text(\"Paused\",55,98);\n    noStroke();fill(176, 176, 176);\n    rect(98,122,200,267);\n    button(110,131,172,47,\"Resume\",38);\n    if(selected){page=pausePg;}\n    button(110,196,172,47,\"Restart\",38);\n    if(selected){introTime=0;page=pausePg;}\n    button(110,263,172,47,\"Levels\",38);\n    if(selected){page=4;}\n    button(110,332,172,47,\"Main Menu\",31);\n    if(selected){introTime=0;page=0;}\n};\n\n///////////GAME OVER////////////\nvar gtxtX=0;\nvar gameOver=function(){\n    background(0, 0, 0);\n    for(var o=0;o<317;o+=1){\n        stroke(255-(o*0.8));noFill();\n        ellipse(200,416,o,o);\n    }\n    falling=true;\n    rotate(-90);\n    stickman(-389,175);\n    resetMatrix();\n    fill(255, 0, 0);textSize(60);\n    text(\"GAME OVER\",21+gtxtX,200);\n    text(\"GAME OVER\",21+gtxtX-400,200);\n    if(gtxtX<=400){gtxtX+=1;}\n    else{gtxtX=0;}\n};\n\n///////////LOSE LIFE//////////////\nvar lives=3;\nvar blackIn=false;\nvar life2=function(x,y){\n    strokeWeight(5);\n    ellipse(x,y,100,100);\n    strokeWeight(3);\n    line(x-5,y+24,x+40,y+24);\n    strokeWeight(10);\n    point(x+10,y-14);\n};\nvar lt=0;\nvar loseLife=function(){\n    fill(0, 0, 0,(lt*10)-255);\n    noStroke();\n    rect(0,0,400,400);\n    stroke(255, 255, 255, (lt*10)-255);\n    life2(121,131);\n    fill(255, 255, 255, (lt*10)-255);\n    textSize(43); text(\"You lost a life!\",48,50);\n    textSize(68); text(\"X \"+lives,195,158);\n    if(lt===80){lives-=1;}\n    if(lt>80){\n        stroke(255, 255, 255, (255-(lt-80)*5));\n        noFill();\n        life2(121,131+lt-80);\n        fill(255, 255, 255, (255-(lt-80)*5));\n        text(\"-1\",251,158+lt-80);\n    }\n    if(lt>170&&lives!==0){\n        blackIn=true;introTime=0;page=pausePg;\n    }\n    else if(lt>170){gameOver();}\n    lt+=1;\n};// smooshers\nvar sy = 100;\nvar psy = 100;\nvar goingUp = false;\nvar s = function(x, l, h, t){\n    g(x - l / 2, psy, l * 2, 0);\n    g(x, sy, l, h);\n    if(sy < psy + t & !goingUp){\n        sy ++;\n    }\n    else{\n        goingUp = true;\n    }\n    if(sy === psy){\n        goingUp = false;\n    }\n    if(goingUp){\n        sy --;\n    }\n    if(stickX > x & stickX < x + l & stickY - 6.25 > sy){\n        if(sy + h > stickY - 6.25){\n            constricted = true;\n        }\n        if(sy + h > stickY - 12.5){\n            page = -2;\n        }\n    }\n};\n\n//////////OTHER CHARACTERS////////\n//Civillian\nvar talking=false;\nvar civillian=function(x,y,speech,txtSize,bw,bh){\n    if(stickX>x-32&&stickX<x+32&&stickY>y-5&&stickY<y+5){\n        talking=true;}\n    else{talking=false;}\n    stroke(97, 97, 97);noFill();strokeWeight(2);\n    ellipse(x,y,14,14);\n    line(x,y+7,x,y+30);\n    if(stickX>x){\n    line(x,y+30,x-2,y+42);\n    line(x,y+30,x+2,y+42);\n    line(x+2,y+50,x+2,y+42);\n    line(x-2,y+50,x-2,y+42);\n    line(x,y+9,x-3,y+21);\n    line(x,y+9,x+1,y+22);\n    line(x-3,y+21,x-2,y+29);\n    line(x+1,y+21,x+3,y+29);\n    point(x+2,y-2);\n    if(!talking){strokeWeight(1);line(x,y+2,x+5,y+2);}\n    else{fill(97);ellipse(x+3,y+3,3,2);}\n    }\n    else if(stickX<x){\n    line(x,y+30,x+2,y+42);\n    line(x,y+30,x-2,y+42);\n    line(x-2,y+50,x-2,y+42);\n    line(x+2,y+50,x+2,y+42);\n    line(x,y+9,x+3,y+21);\n    line(x,y+9,x-1,y+22);\n    line(x+3,y+21,x+2,y+29);\n    line(x-1,y+21,x-3,y+29);\n    point(x-2,y-2);\n    if(!talking){strokeWeight(1);line(x,y+2,x-5,y+2);}\n    else{fill(97);ellipse(x-3,y+3,3,2);}\n    }\n    if(talking){\n        stroke(36, 36, 36);fill(255, 255, 255);\n        ellipse(x,y-13-(bh/2),bw,bh);\n        noStroke();\n        triangle(x,y-9,x-4,y-16,x+4,y-15);\n        stroke(36, 36, 36);\n        line(x,y-9,x-4,y-14);\n        line(x,y-9,x+4,y-14);\n        fill(0, 0, 0);\n        textSize(txtSize);textAlign(CENTER,CENTER);\n        text(speech,x,y-13-(bh/2));\n        textAlign(LEFT,LEFT);\n    }\n};\n\n//////PROPS,ITEMS,PUZZLE PIECES, ECT/////////\n//Teleporters\nvar dest=[];\nvar o1=[];\nvar o2=[];\nvar particles = [];\nvar beamOut = function(x,y,cl) {\n    noStroke();\n    var c2=random(100,150);\n    if(!cl){cl=0;}\n    var cl1=[dest[cl][2],dest[cl][3],dest[cl][4]];\n    if(!cl1){cl1=[0,c2,255];}\n    var particle = {\n        x: x,\n        y: y,\n        xSpeed: random(16) - 8,\n        ySpeed: random(16) - 8,\n        color:[cl1[0],cl1[1],cl1[2]]\n    };\n    particles.push(particle);        \n    if (particles.length > 50) {\n        particles.shift();\n    } \n    for (var k = 0; k < particles.length; k += 1) {   \n        particles[k].x = particles[k].x +particles[k].xSpeed;\n        particles[k].y = particles[k].y +particles[k].ySpeed;\n        fill(particles[k].color[0],particles[k].color[1],particles[k].color[2],255-(abs(particles[k].x-x)*2)-(abs(particles[k].y-y)*2)+o2[cl]);\n        ellipse(particles[k].x, particles[k].y, 3, 3); \n    }\n};\nvar particles2 = [];\nvar beamIn = function(x,y,cl) {\n    noStroke();\n    var c3=random(100,150);\n    if(!cl){cl=0;}\n    var cl2=[dest[cl][2],dest[cl][3],dest[cl][4]];\n    if(!cl2[0]){cl2=[0,c3,255];}\n    var bx=random(x-100,x);\n    var by=random(y-100,y);\n    if(round(random(1,2))===2){bx=x+(x-bx);}\n    if(round(random(1,2))===2){by=y+(y-by);}\n    var particle2 = {\n        x: bx,\n        y: by,\n        xSpeed: random(10) - 5,\n        ySpeed: random(10) - 5,\n        mass: 3 + random(20),\n        color:[cl2[0],cl2[1],cl2[2]]\n    };\n    particles2.push(particle2);        \n    if (particles2.length > 50) {\n        particles2.shift();\n    } \n    for (var j = 0; j < particles2.length; j += 1) {\n        particles2[j].xSpeed = (x - particles2[j].x) /\n                                  particles2[j].mass;\n        particles2[j].ySpeed = (y - particles2[j].y) /\n                                  particles2[j].mass;\n        \n        particles2[j].x = particles2[j].x + particles2[j].xSpeed;\n        particles2[j].y = particles2[j].y + particles2[j].ySpeed;\n        fill(particles2[j].color[0],particles2[j].color[1],particles2[j].color[2],255-(abs(particles2[j].x-x)*2)-(abs(particles2[j].y-y)*2)+o1[cl]);\n        ellipse(particles2[j].x, particles2[j].y, 3, 3); \n    }\n};\nvar tt=[];\nvar teleIn=function(x,y,num){\n    stroke(255, 255, 255);strokeWeight(2);\n    line(x-9,y-1,x+9,y-1);\n    stroke(94, 94, 94);\n    line(x-20,y,x+20,y);\n    strokeWeight(1);\n    line(x-24,y,x+24,y);\n    for(var i=0;i<18;i+=1){\n        var rand=random(1,36);\n        stroke(dest[num][2],dest[num][3],dest[num][4],150-(8*i)-rand);\n        line(x-19-i/2,y-i-2,x+19+i/2,y-i-2);\n    }\n    if(stickX>x-5&&stickX<x+5&&stickY+51.1>y&&stickY+51.1<y+3){tt[num]+=1;}\n    else{tt[num]=0;}\n    if(tt[num]>0&&tt[num]<100){beamIn(x,y-30,num);}\n    else if(tt[num]===100){stickX=dest[num][0];stickY=dest[num][1];}\n    o1[num]=(tt[num]*5)-250;\n    if(tt[num]===1){particles2=[];}\n};\nvar outAni=[];\nvar ttt=[];\nvar teleOut=function(x,y,num,r,g,b){\n    if(!r){r=0;}\n    if(!g){g=198;}\n    if(!b){b=212;}\n    dest[num]=[x,y-49,r,g,b];\n    stroke(255, 255, 255);strokeWeight(2);\n    line(x-9,y-1,x+9,y-1);\n    stroke(94, 94, 94);\n    line(x-20,y,x+20,y);\n    strokeWeight(1);\n    line(x-24,y,x+24,y);\n    for(var i2=0;i2<18;i2+=1){\n        var rand=random(1,36);\n        stroke(dest[num][2], dest[num][3], dest[num][4],150-(8*i2)-rand);\n        line(x-19-i2/2,y-i2-2,x+19+i2/2,y-i2-2);\n    }\n    o2[num]=(ttt[num]*-6)+200;\n    if(ttt[num]>0&&ttt[num]<80){\n        beamOut(x,y-30,num);\n    }\n    else{outAni[num]=false;ttt[num]=0;}\n    if(tt[num]===99){outAni[num]=true;}\n    if(outAni[num]){ttt[num]+=1;}\n    if(ttt[num]===1){particles=[];}\n};\n//Exit\nvar px=[];\nvar py=[];\nvar drawBolt = function(x,y,x2,y2,increments,rd) {\n    strokeCap(SQUARE);\n    if(!increments){increments=15;}\n    if(!rd){rd=8;}\n    px=[];py=[];\n    var xi=(x2-x)/increments;\n    var xi2=(x2-x)/xi;\n    var yi=(y2-y)/increments;\n    var yi2=(y2-y)/yi;\n    for(var h=0;h<xi2;h+=1){\n        px[h]=x+(xi*h)+random(-rd,rd);\n    }\n    for(var m=0;m<yi2;m+=1){\n        py[m]=y+(yi*m)+random(-rd,rd);\n    }\n    for(var h2=0;h2<xi2;h2+=1){\n        px[0]=x;py[0]=y;\n        px[px.length]=x2;py[py.length]=y2;\n        stroke(0,0,255);strokeWeight(3);\n        line(px[h2],py[h2],px[h2+1],py[h2+1]);\n        strokeWeight(1);stroke(255, 255, 255);\n        line(px[h2],py[h2],px[h2+1],py[h2+1]);\n    }\n    fill(138, 138, 138);noStroke();\n    strokeCap(ROUND);\n};\nvar et=0;\nvar door=function(x,y){\n    strokeWeight(2);\n    stroke(15, 15, 15);noFill();\n    line(x-20,y,x+20,y);stroke(56, 56, 56);\n    line(x-18,y-2,x+18,y-2);\n    line(x-16,y-2,x-16,y-11);\n    line(x+16,y-2,x+16,y-11);\n    ellipse(x-16,y-11,2,2);\n    ellipse(x+16,y-11,2,2);\n    if(stickX>x-5&&stickX<x+5&&stickY+51.1>y&&stickY+51.1<y+3){et+=1;}\n    else{et=0;}\n    for(var v=0;v<et*15;v+=15){\n        if(et>v&&y+v-et>y-60&&et<=70){\n            drawBolt(x-16,y+v-et-0.1-2,x+16,y+v-et-2,3,3);\n            }\n            strokeWeight(1);\n            stroke(105, 178, 255,100-(v*0.09)-random(-15,15));\n            line(x-16,y-(v/15)-2,x+16,y-(v/15)-2);\n    }\n    if(et>70){\n        o=0;stickX=x;\n        fill(255, 255, 255, 255-(et*11.5)+700);noStroke();\n        ellipse(stickX,stickY+21,20+((et-70)*50),65-((et-70)*5));\n    }\n    if(et>150){\n        fill(255, 255, 255, (et-150)*15);\n        rect(x-400,0,800,400);\n    }\n    if(et>=175){\n        o=255;resetMatrix();introTime=0;\n        if(level!==levels[worldPage-1]){level+=1;}\n        else{page=4;}\n    }\n    \n};\n//Heart\nvar health=5;\nvar heart=function(x,y){\n    stroke(0, 0, 0);strokeWeight(2);fill(255, 0, 0);\n    bezier(x,y,x-17,y-9,x-10,y-26,x,y-17);\n    bezier(x,y,x+17,y-9,x+10,y-26,x,y-17);\n};// Lava\nvar l = function(x1, l, h){\n    g(x1, 400 - h, l, h);\n    noStroke();\n    fill(255, 0, 0);\n    rect(x1, 400 - h, l, h);\n    if(stickY === 350 - h - 1.1){\n        health -= 1 / 6;\n    }\n};\nvar ht=[];var htt=[];\ndest[-1]=[1,1,255,0,0];\no2[-1]=255;\nvar hdrop=function(x,y,num){\n    if(!ht[num]){ht[num]=0;}\n    if(!htt[num]){htt[num]=0;}\n    if(htt[num]===0){ht[num]+=0.45;}\n    else if(htt[num]===1){ht[num]-=0.45;}\n    if(ht[num]>=20){htt[num]=1;}\n    else if(ht[num]<=0){htt[num]=0;}\n    if(htt[num]<2){\n    heart(x,(sin(ht[num] * 3 + y * 360) * 4)+y);\n    }\n    if(htt[num]>=2&&htt[num]<=10){\n        beamOut(x,y,-1);\n        htt[num]+=1;\n    }\n    if(stickX>x-12&&stickX<x+12&&stickY+41>y-12&&stickY+41<y+12&&health!==5&&htt[num]<2){\n        particles=[];htt[num]=2;\n    }\n    if(htt[num]===2){\n        health+=1;\n    }\n};\nvar ht=[];var htt=[];\ndest[-1]=[1,1,255,0,0];\no2[-1]=255;\nvar hdrop=function(x,y,num){\n    if(!ht[num]){ht[num]=0;}\n    if(!htt[num]){htt[num]=0;}\n    if(htt[num]===0){ht[num]+=0.45;}\n    else if(htt[num]===1){ht[num]-=0.45;}\n    if(ht[num]>=20){htt[num]=1;}\n    else if(ht[num]<=0){htt[num]=0;}\n    if(htt[num]<2){\n    heart(x,(sin(ht[num] * 3 + y * 360) * 4)+y);\n    }\n    if(htt[num]>=2&&htt[num]<=10){\n        beamOut(x,y,-1);\n        htt[num]+=1;\n    }\n    if(stickX>x-12&&stickX<x+12&&stickY+41>y-12&&stickY+41<y+12&&health!==5&&htt[num]<2){\n        particles=[];htt[num]=2;\n    }\n    if(htt[num]===2){\n        health+=1;\n    }\n};\n//Cannon\nvar cf=[];\nvar cp=[];var cp2=[];var cp3=[];var cp4=[];\nvar cballs=[];\nvar cannon = function(x,y,type,f,num) {\n    if(!cf[num]){cf[num]=0;}\n    var cgo=true;\n    strokeWeight(3);\n    fill(56, 56, 56);noStroke();\n    ellipse(x,y,25,25);\n    fill(36, 36, 36);\n    ellipse(x,y,15,15);\n    var dist1 = dist(stickX,stickY+10,x,y);\n    var xmin=x-30;var xmax=x+30;var ymin=y-30;var ymax=y+30;\n    if(type===1){\n        \n    }\n    else if(type===2){\n        \n    }\n    else if(type===3){\n        \n    }\n    else if(type===4){\n        xmin=x-30;xmax=x+30;\n        ymin=y+7;ymax=y+30;\n    }\n    if((25*(stickX-x)/dist1+x)>xmin&&25*(stickX-x)/dist1+x<xmax&&25*(stickY+10-y)/dist1+y>ymin&&25*(stickY+10-y)/dist1+y<ymax){\n        cp[num]=10*(stickX-x)/dist1+x;\n        cp2[num]=10*(stickY+10-y)/dist1+y;\n        cp3[num]=25*(stickX-x)/dist1+x;\n        cp4[num]=25*(stickY+10-y)/dist1+y;\n    }\n    else{cgo=false;}\n    if(cgo&&stickX<x+180&&stickX>x-180){\n        var cball={\n            x:cp3[num],\n            y:cp4[num],\n            difx:stickX-x,\n            dify:stickY-y,\n            hit:false\n        };\n        if(cf[num]>f){cf[num]=0;}\n        if(cf[num]===0){cballs.push(cball);}\n        cf[num]+=1;\n    }\n    strokeWeight(11);\n    stroke(56);strokeCap(SQUARE);\n    line(cp[num],cp2[num],cp3[num],cp4[num]);\n    strokeCap(ROUND);\n};\n\n///////////SCROLL & HUD////////////////\nvar heart2=function(x,y){\n    stroke(0, 0, 0);strokeWeight(2);noFill();\n    bezier(x,y,x-17,y-9,x-10,y-26,x,y-17);\n    bezier(x,y,x+17,y-9,x+10,y-26,x,y-17);\n};\nvar life=function(x,y,size){\n    strokeWeight(2.5);noFill();\n    ellipse(x,y,size,size);\n    point(x+(size/8),y-(size/7));\n    strokeWeight(2);\n    line(x,y+(size/6),x+(size/3),y+(size/6));\n};\n\nvar ingame=function(){\n    resetMatrix();\n    if(health<=0){stickY=460;}\n    if(stickY<450){background(240, 240, 240);bg();}\n    if(stickY>450){lt=0;pausePg=page;page=-2;}\n    stroke(0, 0, 0);\n    life(336,385,20);\n    textSize(20);fill(0, 0, 0);\n    text(\"X \"+lives,352,393);\n    for(var I=0;I<5;I+=1){\n        heart2(15+(27*I),395);\n    }\n    for(var I2=0;I2<health;I2+=1){\n        heart(15+(27*I2),395);\n    }\n    if(keys[80]&&page>4){pausePg=page;page=-1;}\n    if(stickX>=200&&stickX<=lvlMax-200){\n        translate((stickX-200)*-1,0);\n    }\n    if(stickX>lvlMax-200){\n        translate((lvlMax-400)*-1,0);\n    }\n    stickman(stickX,stickY);\n    g(-2,-101,1,470);\n    //g(-2,-2,lvlMax+1,1);\n    g(lvlMax+1,-102,1,lvlMax+102);\n    if(cballs.length>30){cballs.pop();}\n    for(var i=0;i<cballs.length;i+=1){\n        if(cballs[i].x+6>hitbox[0]&&cballs[i].x-6<hitbox[2]&&cballs[i].y+6>hitbox[1]&&cballs[i].y-6<hitbox[3]&&!cballs[i].hit){\n            health-=1;\n            cballs[i].hit=true;\n        }\n        fill(31, 31, 31);noStroke();\n        if(!cballs[i].hit){\n        ellipse(cballs[i].x,cballs[i].y,12,12);}\n        var dista=sqrt(cballs[i].difx*cballs[i].difx+cballs[i].dify*cballs[i].dify);\n        var mx=cballs[i].difx/dista*4;\n        var my=cballs[i].dify/dista*4;\n        cballs[i].x+=mx;\n        cballs[i].y+=my;\n        if(cballs[i].x>lvlMax+10||cballs[i].x<-10||cballs[i].y>410||cballs[i].y<-10){\n            if(i===0){cballs.shift();}\n        }\n    }\n};\n\n/////////WORLD ONE///////////////\nvar x=-100;var y=0;\nvar w1=function(){\n        \n   if(level===1){\n        lvlMax=2190;\n        x=50;y=231;\n        g(-1,370,1175,31);\n        g(-1,297,101,73);\n        g(306,329,263,41);\n        g(356,288,213,41);\n        g(404,247,432,41);\n        g(567,-1,129,210);\n        g(789,288,47,82);\n        g(1000,248,172,41);\n        g(1237,248,154,41);\n        g(1454,248,175,41);\n        g(1684,248,220,41);\n        g(1967,248,240,41);\n        teleOut(1039,246,0);\n        teleIn(796,245,0);\n        fill(8);textSize(20);\n        textAlign(CENTER,CENTER);\n        text(\"Welcome to\\nDrawn to Life™, \"+name+\"!\",200,47);\n        fill(0, 0, 0);textSize(14);\n        text(\"Use the A & D\\nkeys to move\\nleft & right\",48,333);\n        text(\"Use the space\\nbar to jump.\",358,348);\n        text(\"Use the S key\\nto crouch\",630,189);\n        text(\"Hold shift to run.\",467,257);\n        text(\"This is a\\nteleporter.\",795,267);\n        text(\"It will teleport you to\\nan exit of the same color.\",1086,268);\n        text(\"Hit P to pause a\\nlevel at any time.\\nYou can restart the level\\nfrom the pause menu.\",681,327);\n        text(\"Don\'t fall or you will\\nlose all your health. \",1315,268);\n        text(\"If you lose all your\\nhealth, you will lose a life. \",1543,268);\n        text(\"If you lose all your\\nlives...   it\'s Game Over.\",1543,310);\n        text(\"The exit is ahead. It is your goal\\nin every level.\",1794,268);\n        text(\"You have reached the end of the \\ntutorial. Good luck.\",2081,268);\n        textAlign(LEFT,LEFT);\n        door(2099,246);\n    }\n    if(level===2){\n        lvlMax=1279;\n        x=442;y=318.9;\n        g(-1,370,1282,31);\n        g(45,200,177,20);\n        g(345,200,289,20);\n        g(525,220,20,150);\n        hdrop(433,190,0);\n        hdrop(499,190,1);\n        hdrop(367,190,2);\n        eleY(3,200,38,150,1);\n        eleX(222,200,38,84,2);\n        cannon(134,219,4,80,0);\n        teleOut(803,198,0,1,255,1);\n        teleIn(601,198,0);\n        g(773,200,235,20);\n        g(753,109,20,261);\n        g(773,284,235,20);\n        g(1008,109,20,261);\n        g(773,109,235,20);\n        teleOut(804,282,1,255,1,1);\n        teleIn(883,198,1);\n        teleOut(964,198,2,1,1,255);\n        teleIn(882,282,2);\n        teleOut(806,368,3,255,255,1);\n        teleIn(964,282,3);\n        teleOut(802,198,4,153,255,91);\n        teleIn(883,368,4);\n        teleOut(884,107,5,255,1,255);\n        teleIn(964,368,5);\n        g(1200,200,59,60);\n        eleX(1028,200,40,133,3);\n        door(1229,198);\n        fill(0, 0, 0);textSize(14);\n        text(\"Watch out! A cannon is\\nahead! Don\'t let it hit you.\",347,244);\n    }\nif(level===7){\n        lvlMax=1279;\n        x=442;y=318.9;\n        g(-1,370,1282,31);\n        g(45,200,177,20);\n        g(345,200,289,20);\n        g(525,216,20,150);\n        eleY(3,200,38,150,1);\n        eleX(222,200,38,84,2);\n        teleOut(1069,105,0,1,255,1);\n        teleIn(601,198,0);\n        g(774,200,196,20);\n        g(753,109,20,260);\n        g(773,284,235,20);\n        g(1008,109,20,195);\n        g(1200,200,59,60);\n        eleX(1028,200,40,133,3);\n        door(1229,198);\n        fill(0, 0, 0);textSize(14);\n        civillian(472,318.9,\"Welcome to Level 7\\n \"+name+\"!\",20,236,92); civillian(156,148.4,\"By the way \"+name+\"\\n my name is Ben. I\'m your\\nguide and freind so look\\n for me if you are stuck in a level\",20,470,144);\n    }\nif(level===4){\n    lvlMax=500;\n    x=20;y=300;\n    g(-5,375,408,25);\n    door(305,373);\n    g(200,131,1,500);\n    g(150,325,50,50);\n     teleOut(305,300,0);\n        teleIn(175,325,0);\n}\nif(level===5){\n    lvlMax=1000;\n    x=119;y=324;\ng(72,371,303,-1);g(368,35,1,333);g(85,31,-1,340);g(145,334,111,2);g(141,305,3,31);g(82,301,60,4);g(104,257,11,0);g(195,217,50,0);g(266,186,48,0);g(316,128,-2,58);g(302,154,13,-1);g(315,127,53,0);g(52,329,3,13);door(344,125);\n    \n}\nif(level===6){\n   lvlMax=1000;\n   x=77;y=314;\ng(3,367,395,1);g(395,114,-394,0);\ncannon(3,114,4,60,10);cannon(89,114,4,60,10);cannon(188,114,4,60,10);drawBolt(384,362,386,115,15,4);door(384,366);\n        \n} if(level === 3){\n        lvlMax = 1650;\n        x = 200;\n        y = -50;\n        g(25, 100, 200, 200);\n        g(300, 200, 200, 200);\n        g(525, 300, 100, 100);\n        g(700, 350, 50, 50);\n        g(800,375,25,25);\n        g(875,375,25,25);\n        g(962.5,375,25,25);\n        g(750, 375, 25, 25);\n        l(775, 200, 12.5);\n        g(975, 400, 450, 1);\n        fill(0);\n        text(\"A Sky island!\\nYou should jump off!\", 25, 200);\n        textSize(15);\n        text(\"Great! We found a \\n        staircase!\", 350, 300);\n        text(\"Watch out! Lava makes you lose a life in 1 second!\", 600, 200);\n        eleY(1175, 125, 50, 250);\n        fill(0);\n        text(\"These smushers can smush you to\\nlosing a life, so go fast under them!\", 975, 200);\n        g(1225, 200, 250, 2);\n        g(1425, 300, 250, 2);\n        door(1600, 299);\n        fill(0);\n        text(\"Finally.\", 1500, 200);\n    }\n    if(level===8){\n        \n    lvlMax=500;\n    x=92;y=310;\ng(75,361,321,-1);hdrop(256,353);hdrop(166,352);g(396,360,0,-127);g(75,203,322,10);g(397,231,-2,-132);g(76,86,324,5);\n l(134, 17, 45.8); teleOut(346,203,0,1,255,1);\n        teleIn(359,359,0);\n        door(106,201);cannon(305,87,4,60,10);\n}\n\n};\n\n\n\n/////////WORLD TWO///////////////\nvar w2=function(){\nif(level===1){\n    \n}\n\n};\n\n\n///////////RESET////////////////\nvar reset=function(){\n    stickX=x;stickY=y;ft=0;o=255;rr=8;health=5;\n    htt=[];cballs=[];\n};\n\n///////////DEBUG////////////////\nvar debugStuff=function(){\n    textSize(25);\n    strokeWeight(1);stroke(0, 0, 0);fill(0,255,51,100);\n    quad(hitbox[0],hitbox[1],hitbox[0],hitbox[3],hitbox[2],hitbox[3],hitbox[2],hitbox[1]);\n    resetMatrix();\n    fill(255, 0, 0);\n    text(stickX,8,390);\n    text(stickY,6,365);\n    text(kwt,259,390);\n    text(stickstate,7,337);\n    text(falling,5,307);\n    text(jt,9,275);\n    text(constricted,2,247);\n};\n\n/////////DRAW LOOP//////////////\ndraw= function() {\n    if(page>4){ingame();}\n    if(page===-1){pause();}\n    else if(page===0){titlePage();}\n    else if(page===0.5){editName();}\n    else if(page===1){worldselect();}\n    else if(page===2){about();}\n    else if(page===3){options();}\n    else if(page===4){levelselect();}\n    else if(page===5){w1();}\n    else if(page===6){w2();}\n        \n \n    \n    if(page===-2){loseLife();}\n    \n    if(keyIsPressed){kt+=1;}\n    else{kt=0;}\n    if(keyIsPressed&&keys[32]){kwt+=1;}\n    else{kwt=0;}\n    if(mouseIsPressed){time+=1;} \n    if(!mouseIsPressed){time=0;}\n    for(var q=65;q<91;q+=1){kta[q]=0;if(keys[q]){kta[q]+=1;}}\n    if(page>4){if(introTime<2){reset();}}\n    if(introTime<2){introTime+=1;}\n    if(debugMode){debugStuff();}\n};\n\n/////////////NOTES/////////////////\n/*\nstroke(55-(i*0.13), 20-(i*2), 100-(i*0.5));\n\nfill(2, 0, 33);\nrect(0,0,400,400);\nstroke(40-(i*0.16), 20-(i*1), 70-(i*0.32),255-(i*0.33));\n\n\n\n\n\n\n\n*/\n";
window.liveEditor = new LiveEditor({
                el: $("#sample-live-editor"),
                code: code,
                width: 400,
                height: 400,
                editorHeight: "80%",
                autoFocus: true,
                workersDir: "../../build/workers/",
                externalsDir: "../../build/external/",
                imagesDir: "../../build/images/",
                soundsDir: "../../sounds/",
                execFile: outputUrl,
                jshintFile: "../../build/external/jshint/jshint.js",
                newErrorExperience: true,
            });
            liveEditor.editor.on("change", function() {
                window.localStorage["test-code"] = liveEditor.editor.text();
            });
            ScratchpadAutosuggest.init(liveEditor.editor.editor);
            </script>
        </body>
        </html>
        