<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Spin-off of "Mega Mine"</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
<style>
        body {
            padding: 20px;
        }
        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Spin-off of "Mega Mine"</h1>
    <div id="sample-live-editor"></div>
    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>
    <script>
    var outputUrl = "../output.html";
var code = "/**Spin-off of "Mega Mine" by David Elijah de Siqueira Campos McLaughlin\nOriginal size(400, 400);\nOriginally Created on 2016-01-28T14:19:52Z by kaid_976851263300560061760577\nLast Edited: 2016-01-28T14:19:52Z\nVotes/Spinoffs: 1/0\nOriginally Created: 2016-01-28T14:19:52Z from origin 6540474873937920 with similarity of 1.0\nOriginal Link: https://www.khanacademy.org/computer-programming/spin-off-of-mega-mine/5903709452500992\nRetrieved On: 07-Nov-2022 (17:07:53.949344)**/\
";

code = code + "\n\n/**\n * My newest creation!\n * \n * Also the first program that uses my NEW logo.\n * \n * Mine for ores, and get money for them.\n * You can only mine a certain amount before you are done for the day.\n * Use money to upgrade your pickaxe.\n * Discover new depths!\n * \n * New update: You may now skip the logo and screen where it counts your money. I know many people have been requesting either or both.\n * Another note: This game is inspired by an app called Pocket Mine by Roofdog Games for mobile devices. However, the only similar aspects are the hidden blocks (covered by black) and the durability. A lot of you have asked about it being similar to Diggy. I have played Diggy, but this game is drastically different. I have no idea what about this game is similar to that other than that you mine and get money.\n**/\n\nvar letters = [\n    [\"T\",170,200,50,50,170,false],\n    [\"h\",326,200,-70,100,170,false],\n    [\"u\",240,224,30,145,170,false],\n    [\"n\",100,200,-30,188,170,false],\n    [\"d\",100,200,80,233,170,false],\n    [\"e\",174,200,-70,277,170,false],\n    [\"r\",68,220,-20,322,170,false]\n];//logo vars\n{\nvar time = 0;\n\nvar lastY = 0; }//logo vars as well, I couldn\'t put curvy brackets around an array with arrays in it.\n\n\n\nvar code = [5,0,1,0,0,0,0]; //if you saved, this is where you put your code. Do not just put big values in here if you want a fun game...\n{\n\nvar blocks = []; //array for all existing blocks.\n\n{\nvar mouseWasPressed = false;\n\nvar moved = 0;\n\nvar maxDurability = code[0];\nvar durability = maxDurability;\nvar pickPower = code[2];\n\nvar money = code[1];\nvar totalMoney = code[3];\n\nvar randomNoise = 0;\n\nvar scene = \"logo\";\n} //some other vars, some of which are necessary before the next stuff.\n\nvar Block = function(x,y,type,colr,detail,hp,value) {\n    this.x = x;\n    this.y = y;\n    this.type = type;\n    this.colr = colr;\n    this.detail = detail;\n    this.hp = hp;\n    this.health = hp;\n    this.value = value;\n}; //uses object inheritance; all blocks are based off of this.\n\nBlock.prototype.draw = function() {\n    pushMatrix();\n        translate(this.x*40,this.y*40);\n        fill(this.colr);\n        rect(0,0,40,40);\n        fill(0, 0, 0, 30);\n        noStroke();\n        rect(0,36,36,4);\n        rect(36,0,4,40);\n        if(this.type === \"circles\") {\n            fill(this.detail);\n            ellipse(10,16,8,8);\n            ellipse(30,25,7,7);\n            ellipse(16,30,5,5);\n            ellipse(25,10,5,5);\n        }\n        if(this.type === \"rectangles\") {\n            fill(this.detail);\n            rect(7,19,8,4);\n            rect(26,20,7,4);\n            rect(16,29,5,3);\n            rect(24,12,5,3);\n            rect(11,9,6,4);\n        }\n        if(this.type === \"shards\") {\n            fill(this.detail);\n            triangle(10,16,8,8,15,14);\n            triangle(35,33,30,25,22,23);\n            triangle(22,30,12,33,9,27);\n            triangle(25,10,16,9,31,16);\n        }\n        if(this.type === \"bomb\") {\n            fill(0, 0, 0);\n            pushMatrix();\n            translate(20,22);\n            ellipse(0,0,20,20);\n            rotate(-152);\n            fill(125, 25, 0);\n            rect(-2,0,4,15);\n            fill(0, 0, 0);\n            rect(-5,0,10,12);\n            \n            popMatrix();\n        }\n        if(this.health < this.hp) {\n            stroke(0, 0, 0, (1 - this.health/this.hp)*255);\n            line(15,10,30,30);\n            line(8,30,25,25);\n            line(20,16,30,10);\n            line(0,20,16,27);\n            line(40,28,23,20);\n        }\n        stroke(0, 0, 0);\n    popMatrix();\n}; //to draw any block.\n\nBlock.prototype.check = function() {\n    if(mouseWasPressed && mouseX > this.x*40 && mouseX < this.x*40 + 40 && mouseY > this.y*40 && mouseY < this.y*40 + 40 && durability > 0 && this.type !== \"air\" && scene === \"game\") {\n        this.health-= pickPower;\n        durability--;\n    }\n}; //checks if you click on any block.\n\n{\nvar air = function(x,y) {\n    Block.call(this,x,y,\"air\",0,0,100000000,0);\n};\n\nvar dirt = function(x,y) {\n    Block.call(this,x,y,\"plain\",color(102, 48, 0),color(0, 0, 0),2,1);\n};\n\nvar hardDirt = function(x,y) {\n    Block.call(this,x,y,\"plain\",color(102, 32, 0),color(0,0,0),5,2);\n};\n\nvar stone = function(x,y) {\n    Block.call(this,x,y,\"plain\",color(84, 84, 84),color(0, 0, 0),20,5);\n};\n\nvar hardStone = function(x,y) {\n    Block.call(this,x,y,\"plain\",color(46, 46, 46),color(0, 0, 0),100,20);\n};\nvar obsidian = function(x,y) {\n    Block.call(this,x,y,\"plain\",color(36, 26, 48),color(0, 0, 0),1000,50);\n};\n\nvar coal = function(x,y) {\n    Block.call(this,x,y,\"circles\",color(102,48,0),color(0, 0, 0),3,5);\n};\n\nvar copper = function(x,y) {\n    Block.call(this,x,y,\"rectangles\",color(102,48,0),color(255, 102, 0),6,10);\n};\n\nvar iron = function(x,y) {\n    Block.call(this,x,y,\"rectangles\",color(102,32,0),color(122, 122, 122),10,20);\n};\n\nvar gold = function(x,y) {\n    Block.call(this,x,y,\"rectangles\",color(102,32,0),color(255, 206, 59),20,35);\n};\n\nvar platinum = function(x,y) {\n    Block.call(this,x,y,\"rectangles\",color(84,84,84),color(245, 245, 245),40,50);\n};\n\nvar topaz = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(84,84,84),color(176, 171, 74),80,75);\n};\n\nvar sapphire = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(84,84,84),color(0, 72, 255),120,100);\n};\n\nvar ruby = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(46,46,46),color(153, 0, 0),200,150);\n};\n\nvar emerald = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(46,46,46),color(26, 150, 2),500,200);\n};\n\nvar diamond = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(46,46,46),color(255, 255, 255),1000,300);\n};\n\nvar turquoise = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(36,26,48),color(0, 212, 177),2000,500);\n};\n\nvar uranium = function(x,y) {\n    Block.call(this,x,y,\"circles\",color(36,26,48),color(115, 255, 0),4000,1000);\n};\n\nvar fireCrystal = function(x,y) {\n    Block.call(this,x,y,\"shards\",color(36,26,48),color(255, 162, 0),6000,3000);\n};\n\nvar ununoctium = function(x,y) {\n    Block.call(this,x,y,\"circles\",color(36,26,48),color(163 + random(0,70), 0, 255),20000,10000);\n};\n\nvar bomb = function(x,y) {\n    Block.call(this,x,y,\"bomb\",color(219, 146, 0),color(0, 0, 0),1,0);\n};\n\nair.prototype = Object.create(Block.prototype);\ndirt.prototype = Object.create(Block.prototype);\nhardDirt.prototype = Object.create(Block.prototype);\nstone.prototype = Object.create(Block.prototype);\nhardStone.prototype = Object.create(Block.prototype);\nobsidian.prototype = Object.create(Block.prototype);\ncoal.prototype = Object.create(Block.prototype);\ncopper.prototype = Object.create(Block.prototype);\niron.prototype = Object.create(Block.prototype);\ngold.prototype = Object.create(Block.prototype);\nplatinum.prototype = Object.create(Block.prototype);\ntopaz.prototype = Object.create(Block.prototype);\nsapphire.prototype = Object.create(Block.prototype);\nruby.prototype = Object.create(Block.prototype);\nemerald.prototype = Object.create(Block.prototype);\ndiamond.prototype = Object.create(Block.prototype);\nturquoise.prototype = Object.create(Block.prototype);\nuranium.prototype = Object.create(Block.prototype);\nfireCrystal.prototype = Object.create(Block.prototype);\nununoctium.prototype = Object.create(Block.prototype);\nbomb.prototype = Object.create(Block.prototype);\n} //MANY types of blocks. These state their qualities and have them inherit the main Block object.\n\n\nfor(var i = 0; i < 17; i++) {\n    blocks.push([]);\n    for(var j = 0; j < 10; j++) {\n        if(i < 5) {\n            blocks[i].push(new air(j,i));\n        } else {\n            blocks[i].push(new dirt(j,i));\n        }\n    }\n} //fills the block array with air at the top and dirt at the bottom.\n\n{\nvar durabilityCosts = [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,5,6,7,8,9,10,12,14,16,18,20,22,24,26,28,30,33,36,39,42,45,50,55,60,65,70,75,80,85,90,95,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,250,250,250,250,250,250,250,250,250,250,300,300,300,300,300,300,300,300,300,300];\nvar damageCosts = [100,200,225,250,275,300,325,350,375,400,450,500,500,500,500,525,550,575,600,625,650,675,700,750,800,850,900,1000,1000,1000,1000,1000,1000,1000,1250,1500,1750,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000];\n\nfor(var i = 0; i < 19860; i++) {\n    durabilityCosts.push(500);\n}\n\nfor(var i = 0; i < 19950; i++) {\n    damageCosts.push(5000);\n}\n} //sets the cost of upgrades\n\n{\nvar durabilityLevel = code[5];\nvar damageLevel = code[6];\n\nvar blah = code[4];\n\nvar time = 0;\n\nvar Shop = false;\n\nvar tutorialTime = 500;\n\nvar skipTime = 0;\n\nif(money !== 0) {blah = 1;}\n} //all other vars.\n} //all other preparation for the entire game.\n\nvar draw = function() {\n    if(scene === \"logo\") {\n    if(mouseWasPressed) {skipTime = 300;}\n    background(0, 0, 0); //well I\'m not going to wate time explaining how my logo works, since it isn\'t exactly part of the game.\n    pushMatrix();\n    translate(0,72);\n    for(var i = 0; i < letters.length; i++) {\n        fill(46, 46, 46);\n        if((abs(letters[i][1] - letters[i][4]) < 1 && abs(letters[i][2] - letters[i][5]) < 1 && abs(letters[i][3]) < 1) || (letters[i][6] && random(0,3) > 2)) {\n            fill(255, 255, time - 100000);\n        }\n        textSize(80);\n        pushMatrix();\n            translate(letters[i][1],letters[i][2]);\n            rotate(letters[i][3]);\n            text(letters[i][0],-2,0);\n            text(letters[i][0],2,0);\n            text(letters[i][0],0,-2);\n            text(letters[i][0],0,2);\n            text(letters[i][0],-2,2);\n            text(letters[i][0],2,2);\n            text(letters[i][0],2,-2);\n            text(letters[i][0],-2,-2);\n            if(time > 600) {fill(255, 255, 100, time*2 - 1200);}\n            text(letters[i][0],0,0);\n        popMatrix();\n        if(letters[i][6]) {\n            letters[i][1] += (letters[i][4] - letters[i][1]) / 60;\n            letters[i][2] += (letters[i][5] - letters[i][2]) / 60;\n            letters[i][3] *= 0.97;\n        }\n        if(random(0,200) > 199 - time/50 && time > 200) {\n            letters[i][6] = true;\n        }\n    }\n    fill(117, 117, 117);\n    rect(300,300,40,80);\n    pushMatrix();\n        if(time < 150) {translate(-150 + time*3,350);} else {translate(300,350); if(time < 700) {rotate(30);}}\n        fill(0, 166, 255);\n        arc(0,10,20,50,180,360);\n        line(-10,10,10,10);\n        fill(255, 193, 127);\n        ellipse(0, -26,20,20);\n        if(time < 700) {\n            fill(0, 0, 0);\n            ellipse(5,-27,3,7);\n            line(3,-20,8,-20);\n        } else {\n            strokeWeight(1.2);\n            arc(0,-22,10,5,0,180);\n            fill(0, 0, 0);\n            ellipse(-3,-27,3,7);\n            ellipse(3,-27,3,7);\n            strokeWeight(1);\n        }\n        if(time > 150) {if(time < 700) {rotate(-30); translate(-6,0);} else {translate(2,0);}} else {rotate(sin(time*11)*20);}\n        fill(115, 50, 0);\n        ellipse(0,22,15,10);\n        if(time < 150) {rotate(sin(time*11)*-40);} else {translate(-5,0);}\n        fill(115, 50, 0);\n        ellipse(0,22,15,10);\n    popMatrix();\n    fill(94, 94, 94);\n    if(time < 150) {\n        rect(300,300,40,80);\n        strokeWeight(5);\n        fill(255, 255, 0);\n        triangle(305,360,335,360,320,330);\n        strokeWeight(3);\n        line(320,343,317,348);\n        line(317,348,322,348);\n        line(322,348,320,355);\n        strokeWeight(1);\n    } else {\n        rect(310,300,30,80);\n        strokeWeight(4);\n        fill(255, 255, 0);\n        triangle(313.75,360,336.25,360,325,330);\n        strokeWeight(2.5);\n        line(325,343,323,348);\n        line(323,348,327,348);\n        line(327,348,325,355);\n        strokeWeight(1);\n    }\n    stroke(255, 255, 0, time - 500);\n    strokeWeight(2);\n    for(var i = 0; i <= 400; i += 5) {\n        var newY = random(-10,10);\n        line(i,200 + lastY,i + 5,200 +newY);\n        lastY = newY;\n    }\n    for(var i = 0; i <= 400; i += 5) {\n        var newY = random(-10,10);\n        line(i,90 + lastY,i + 5,90 +newY);\n        lastY = newY;\n    }\n    stroke(0, 0, 0);\n    strokeWeight(1);\n    fill(255, 255, 255, time - 600);\n    textSize(30);\n    text(\"Studios\",154,240);\n    fill(0, 0, 0, 300 - time*2);\n    noStroke();\n    rect(300,300,40,80);\n    fill(0,0,0,time*2 - 1600);\n    rect(0,0,400,400);\n    if(time > 950) {\n        scene = \"title\";\n        time = 0;\n    }\n    stroke(0, 0, 0);\n    time++;\n    popMatrix(); //draws the logo.\n    } else {\n    background(46, 20, 0); //you see this underground where you have mined.\n    pushMatrix(); \n    translate(0,-moved); //this moves everything drawn to focus on where you are.\n    {\n    fill(0, 153, 255);\n    rect(-1,-1,401,201);\n    fill(255, 119, 0);\n    noStroke();\n    ellipse(312,71,80,80);\n    fill(255, 162, 0);\n    ellipse(312,71,70,70);\n    fill(255, 204, 0);\n    ellipse(312,71,60,60);\n    fill(255,255,0);\n    ellipse(312,71,50,50);\n    fill(255,255,100);\n    ellipse(312,71,40,40);\n    } //very simple landscape shown at the top. I may need to work on it.\n    if(tutorialTime > 0 && scene === \"game\") {\n        fill(255, 255, 255,tutorialTime);\n        rect(74,130,150,40);\n        rect(88,14,260,40);\n        triangle(100,170,110,170,130,201);\n        triangle(88,24,88,44,69,34);\n        fill(0, 0, 0, tutorialTime);\n        textSize(15);\n        text(\"Click me to mine me!\",80,156);\n        text(\"This is your pickaxe\'s current strength. \\nIf it runs out, your day\'s over.\",91,30);\n        tutorialTime--;\n    } //the tutorial, \"tutorialTime\" is how much time is left of it.\n    stroke(0, 0, 0);\n    for(var i = 0; i < blocks.length; i++) {\n        for(var j = 0; j < blocks[i].length; j++) {\n            if(blocks[i][j].type !== \"air\") {blocks[i][j].draw();} //draws blocks\n            {\n            var term1 = false;\n            if(i !== 0) {\n                if(blocks[i-1][j].type === \"air\") {\n                    term1 = true;\n                }\n            }\n            var term2 = false;\n            if(j !== 0) {\n                if(blocks[i][j-1].type === \"air\") {\n                    term2 = true;\n                }\n            }\n            var term3 = false;\n            if(j !== 9) {\n                if(blocks[i][j+1].type === \"air\") {\n                    term3 = true;\n                }\n            }\n            var term4 = false;\n            if(i !== 16) {\n                if(blocks[i+1][j].type === \"air\") {\n                    term4 = true;\n                }\n            }\n            if(term1 || term2 || term3 || term4 || scene === \"title\") {\n                blocks[i][j].check();\n                if(i > 14 && scene !== \"title\") {\n                    moved+=1.5;\n                }\n            } else {\n                fill(0, 0, 0);\n                pushMatrix();\n                    translate(blocks[i][j].x*40,blocks[i][j].y*40);\n                    rect(0,0,40,40);\n                popMatrix();\n            }\n            } //if there is air by a block, it draws it and checks if its clicked; otherwise, it\'s black and you can\'t click it.\n            if(blocks[i][j].health <= 0) {\n                money += blocks[i][j].value;\n                if(blocks[i][j].type === \"bomb\") {\n                    blocks[i][j - 1].health = 0;\n                    blocks[i][j + 1].health = 0;\n                    if(i > 0) {\n                        blocks[i - 1][j - 1].health = 0;\n                        blocks[i - 1][j].health = 0;\n                        blocks[i - 1][j + 1].health = 0;\n                    }\n                    if(i < 16) {\n                        blocks[i + 1][j - 1].health = 0;\n                        blocks[i + 1][j].health = 0;\n                        blocks[i + 1][j + 1].health = 0;\n                    }\n                }\n                blocks[i][j] = new air(blocks[i][j].x,blocks[i][j].y);\n            } //if you destroy a block it gives you money and disappears into an air block.\n        }\n    } //runs through the blocks array and does everything it needs to with it.\n    if(blocks[16][0].y * 40 < moved + 560) {\n        for(var i = 0; i < 16; i++) {\n            for(var j = 0; j < 10; j++) {\n                blocks[i][j] = blocks[i + 1][j];\n            }\n        } //each item in the array is replaced by the one below it... except for the ones at the very bottom.\n        for(var j = 0; j < 10; j++) {\n            blocks[16][j] = new dirt(j,blocks[15][0].y + 1); //first it is a dirt\n            if(noise(blocks[15][j].x/2,blocks[15][j].y/2 + randomNoise) > 0.57 - blocks[15][0].y/500) { \n                blocks[16][j] = new coal(j,blocks[15][0].y + 1);\n            } //creates clusters of coal within the dirt. The deeper, the more likely the coal is created since the noise would not have to be as high.\n            if(noise(blocks[15][j].x/2 + 2000,blocks[15][j].y/2 + randomNoise) > 0.59 - blocks[15][0].y/500) {\n                blocks[16][j] = new copper(j,blocks[15][0].y + 1);\n            } //same for copper\n            if(noise(blocks[15][j].x/3,blocks[15][j].y/3 + randomNoise) > 0.8 - blocks[15][0].y/100) {\n                blocks[16][j] = new hardDirt(j,blocks[15][0].y + 1); //makes it a harder dirt.\n                if(noise(blocks[15][j].x/2 + 4000,blocks[15][j].y/2 + randomNoise) > 0.57 - blocks[15][0].y/1500) {\n                    blocks[16][j] = new iron(j,blocks[15][0].y + 1);\n                } //iron, placed AFTER harder dirt so it is not covered.\n                if(noise(blocks[15][j].x/2 + 6000,blocks[15][j].y/2 + randomNoise) > 0.59 - blocks[15][0].y/1500) {\n                    blocks[16][j] = new gold(j,blocks[15][0].y + 1);\n                } //gold, same thing except rarer (0.59 instead of 0.57 must be reached.)\n            } //this creates harder dirt, using the same process, except that the increase with depth is faster for a qucick transition. Two new ores are included in here. Also this covers previous ores because they would take up all the space and instead the new ores are in this layer.\n            if(noise(blocks[15][j].x/3,blocks[15][j].y/3 + randomNoise) > 1.3 - blocks[15][0].y/100) {\n                blocks[16][j] = new stone(j,blocks[15][0].y + 1);\n                if(noise(blocks[15][j].x/2 + 8000,blocks[15][j].y/2 + randomNoise) > 0.55 - blocks[15][0].y/3000) {\n                    blocks[16][j] = new platinum(j,blocks[15][0].y + 1);\n                } //platinum\n                if(noise(blocks[15][j].x/2 + 10000,blocks[15][j].y/2 + randomNoise) > 0.6 - blocks[15][0].y/3000) {\n                    blocks[16][j] = new topaz(j,blocks[15][0].y + 1);\n                } //topaz, rarer\n                if(noise(blocks[15][j].x/2 + 12000,blocks[15][j].y/2 + randomNoise) > 0.62 - blocks[15][0].y/3000) {\n                    blocks[16][j] = new sapphire(j,blocks[15][0].y + 1);\n                } //sapphire, even rarer\n            } //layer of stone. covers previous blocks.\n            if(noise(blocks[15][j].x/3,blocks[15][j].y/3 + randomNoise) > 2.3 - blocks[15][0].y/100) {\n                blocks[16][j] = new hardStone(j,blocks[15][0].y + 1);\n                if(noise(blocks[15][j].x/2 + 14000,blocks[15][j].y/2 + randomNoise) > 0.56 - blocks[15][0].y/5000) {\n                    blocks[16][j] = new ruby(j,blocks[15][0].y + 1);\n                } //ruby\n                if(noise(blocks[15][j].x/2 + 16000,blocks[15][j].y/2 + randomNoise) > 0.62 - blocks[15][0].y/5000) {\n                    blocks[16][j] = new emerald(j,blocks[15][0].y + 1);\n                } //emerald\n                if(noise(blocks[15][j].x/2 + 18000,blocks[15][j].y/2 + randomNoise) > 0.64 - blocks[15][0].y/5000) {\n                    blocks[16][j] = new diamond(j,blocks[15][0].y + 1);\n                } //diamond. you might notice that in the deeper layers, depth has less effect so that it doesn\'t get too common as fast since the layers become thicker.\n            } //layer of harder stone, covers previous blocks.\n            if(noise(blocks[15][j].x/3,blocks[15][j].y/3 + randomNoise) > 3.8 - blocks[15][0].y/100) {\n                blocks[16][j] = new obsidian(j,blocks[15][0].y + 1);\n                if(noise(blocks[15][j].x/2 + 20000,blocks[15][j].y/2 + randomNoise) > 0.6 - blocks[15][0].y/10000) {\n                    blocks[16][j] = new turquoise(j,blocks[15][0].y + 1);\n                } //turquoise\n                if(noise(blocks[15][j].x/2 + 22000,blocks[15][j].y/2 + randomNoise) > 0.63 - blocks[15][0].y/10000) {\n                    blocks[16][j] = new uranium(j,blocks[15][0].y + 1);\n                } //uranium\n                if(noise(blocks[15][j].x/2 + 24000,blocks[15][j].y/2 + randomNoise) > 0.67 - blocks[15][0].y/10000) {\n                    blocks[16][j] = new fireCrystal(j,blocks[15][0].y + 1);\n                } //fire crystal\n                if(noise(blocks[15][j].x/2 + 26000,blocks[15][j].y/2 + randomNoise) > 0.71 - blocks[15][0].y/10000) {\n                    blocks[16][j] = new ununoctium(j,blocks[15][0].y + 1);\n                } //ununoctium. You know, I put these ores here in case someone actually got this far, but believe me, it would take a LONG time.\n            } //the final layer, covers previous blocks.\n            if(random(0,80) > 79 && j > 0 && j < 9) {\n                blocks[16][j] = new bomb(j,blocks[15][0].y + 1);\n            } //new thing! bombs.\n        } //as for the ones at the bottom, they turn into certain blocks determined by Perlin Noise and depth.\n    } //creates new blocks when you go down and old ones disappear to prevent lag.\n    popMatrix();\n    {\n    pushMatrix();\n        translate(30,30);\n        rotate(35);\n        fill(82, 45, 0);\n        rect(-3,-15,6,35);\n        translate(0,-11);\n        rotate(55);\n        fill(122, 122, 122);\n        rect(-3,-2,6,20);\n        rotate(-110);\n        rect(-3,-2,6,20);\n        rotate(110);\n        noStroke();\n        rect(-2,-2,5,20);\n    popMatrix();\n    } //draws that pickaxe icon in the top-left.\n    {\n    fill(110, 110, 110);\n    if(durability < 11) {\n        fill(77, 77, 0);\n    }\n    if(durability < 4) {\n        fill(79, 0, 0);\n    }\n    textSize(30);\n    text(durability,52,46);\n    fill(255, 255, 255);\n    if(durability < 11) {\n        fill(255, 255, 0);\n    }\n    if(durability < 4) {\n        fill(255, 0, 0);\n    }\n    text(durability,50,44);\n    } //text of your durability left and makes it look cooler.\n    {\n    textAlign(RIGHT);\n    if(Shop) {\n        fill(0, 92, 6);\n        text(\"$\" + totalMoney,390,46);\n        fill(0, 255, 0);\n        text(\"$\" + totalMoney,388,44);\n    } else {\n        fill(255, 162, 0);\n        text(\"$\" + money,390,46);\n        fill(255, 204, 0);\n        text(\"$\" + money,388,44);\n    }\n     \n    textAlign(LEFT);\n    stroke(0, 0, 0);\n    } //money in top-right.\n    if(durability === 0) {\n        moved+= 3;\n        if(mouseIsPressed) {\n            moved+=3;\n        }\n    } //if your day is over it goes down, hold down mouse to make faster.\n    var done = true;\n    {\n    for(var i = 0; i < 10; i++) {\n        if(blocks[0][i].type === \"air\" || scene === \"title\") {\n            done = false;\n        }\n    }\n    } //calculates if it is time to show the post-mining screen.\n    if(done) {\n        {\n        noStroke();\n        fill(133, 97, 46);\n        rect(85,85,240,440);\n        fill(255, 206, 133);\n        rect(80,80,240,440);\n        fill(0, 0, 0);\n        textSize(20);\n        text(\"MINING COMPLETE\",106,157);\n        textAlign(CENTER);\n        fill(255, 162, 0);\n        textSize(50);\n        if(time < money) {\n            text(\"$\" + time,203,243);\n        } else {\n            text(\"$\" + money,203,243);\n        }\n        fill(255, 221, 0);\n        if(time < money) {\n            text(\"$\" + time,200,240);\n        } else {\n            text(\"$\" + money,200,240);\n        }\n        fill(23, 82, 0);\n        text(\"$\" + totalMoney,203,343);\n        fill(0, 255, 17);\n        text(\"$\" + totalMoney,200,340);\n        textAlign(LEFT);\n        textSize(14);\n        fill(0, 0, 0);\n        text(\"total\",191,359);\n        \n        if(time > money + 30 && money > 0) {\n            if(money >= 1000000) {\n                money -= 100000;\n                totalMoney += 100000;\n            }\n            if(money >= 100000) {\n                money -= 10000;\n                totalMoney += 10000;\n            }\n            if(money >= 10000) {\n                money -= 1000;\n                totalMoney+= 1000;\n            }\n            if(money >= 1000) {\n                money -= 100;\n                totalMoney+=100;\n            }\n            if(money >= 100) {\n                money -= 10;\n                totalMoney += 10;\n            }\n            money--;\n            totalMoney++;\n        }\n        } //draws the menu. Money goes up to the money you earned, it pauses, then transfers the money you got into your total money. The variable \"time\" is used for timing.\n        {\n        fill(99, 99, 99);\n        if(money === 0) {\n            fill(204, 204, 204);\n            if(mouseX > 100 && mouseX < 190 && mouseY > 450 && mouseY < 490) {\n                fill(255, 255, 255);\n                if(mouseWasPressed && !Shop) {\n                    time = 0;\n                    durability = maxDurability;\n                    moved = 0;\n                    blocks = [];\n                    for(var i = 0; i < 17; i++) {\n                        blocks.push([]);\n                        for(var j = 0; j < 10; j++) {\n                            if(i < 5) {\n                                blocks[i].push(new air(j,i));\n                            } else {\n                                blocks[i].push(new dirt(j,i));\n                            }\n                        }\n                    }\n                    randomNoise = random(0,10000);\n                }\n            }\n        }\n        rect(100,450,90,40,10);\n        if(money === 0) {\n            fill(204, 204, 204);\n            if(mouseX > 210 && mouseX < 300 && mouseY > 450 && mouseY < 490) {\n                fill(255, 255, 255);\n                if(mouseWasPressed && !Shop) {\n                    Shop = true;\n                    time = 0;\n                }\n            }\n        }\n        rect(210,450,90,40,10);\n        if(money === 0) {\n            fill(204, 204, 204);\n            if(mouseX > 270 && mouseX < 310 && mouseY > 90 && mouseY < 130) {\n                fill(255, 255, 255);\n                if(mouseWasPressed) {\n                    println(\"Next time you play, copy this data into line 32 of the code. You will start with the progress you have right now.\\n[\" + maxDurability + \",\" + 0 + \",\" + pickPower + \",\" + totalMoney + \",\" + 0 + \",\" + durabilityLevel + \",\" + damageLevel + \"]\");\n                }\n            }\n        }\n        rect(270,90,40,40,10);\n        fill(51, 51, 51);\n        rect(275,95,7,30,5);\n        rect(275,105,30,10,5);\n        rect(298,95,7,30,5);\n        rect(292,97.5,4,6,3);\n        rect(283,116,14,3,2);\n        rect(283,120,14,3,2);\n        rect(277,95,26,2);\n        fill(0, 0, 0);\n        textSize(30);\n        text(\"Mine\",112,480);\n        text(\"Shop\",219,480);\n        } //buttons\n        if((totalMoney >= durabilityCosts[durabilityLevel] || totalMoney >= durabilityCosts[durabilityLevel]) && money === 0) {\n            fill(0, 94, 255);\n            ellipse(212,446,15,15);\n            triangle(208,450,216,442,222,455);\n            fill(0, 136, 255);\n            ellipse(212,444,15,15);\n            triangle(208,448,216,440,222,453);\n            fill(255, 255, 255);\n            textSize(13);\n            text(\"!\",211,449);\n        } //notif on shop button if you can get something\n        \n        if(Shop) {\n            {\n            fill(255, 206, 133);\n            rect(80,80,240,440);\n            fill(0, 0, 0);\n            textSize(50);\n            text(\"Shop\",142,143);\n            textSize(15);\n            text(\"Durability\",110,254);\n            text(\"Damage\",114,354);\n            {\n            fill(0, 87, 3);\n            textSize(70);\n            text(\"+\",123,223);\n            textSize(50);\n            text(\"+\",116,239);\n            fill(0, 255, 0);\n            textSize(70);\n            text(\"+\",121,221);\n            textSize(50);\n            text(\"+\",114,237);\n            fill(82, 0, 0);\n            pushMatrix();\n            translate(142,307);\n            rotate(5);\n            for(var i = 0; i < 360; i += 30) {\n                rotate(30);\n                triangle(-5,0,5,0,0,-30);\n            }\n            popMatrix();\n            fill(255, 0, 0);\n            pushMatrix();\n            translate(139,304);\n            rotate(5);\n            for(var i = 0; i < 360; i += 30) {\n                rotate(30);\n                triangle(-5,0,5,0,0,-30);\n            }\n            popMatrix();\n            } // icons for upgrades\n            fill(0, 0, 0);\n            textSize(20);\n            textAlign(CENTER);\n            text(\"Current: \" + maxDurability,236,205);\n            text(\"Current: \" + pickPower,236,300);\n            } //draws everything but the buttons\n            {\n            fill(255, 0, 0);\n            if(totalMoney >= durabilityCosts[durabilityLevel]) {\n                fill(0, 255, 0);\n                if(mouseX > 188 && mouseX < 288 && mouseY > 215 && mouseY < 255) {\n                    fill(84, 255, 110);\n                    if(mouseWasPressed) {\n                        maxDurability++;\n                        totalMoney -= durabilityCosts[durabilityLevel];\n                        durabilityLevel++;\n                    }\n                }\n            }\n            rect(188,215,100,40,10);\n            fill(0, 0, 0);\n            text(\"$\" + durabilityCosts[durabilityLevel],236,242);\n            fill(255, 0, 0);\n            if(totalMoney >= damageCosts[damageLevel]) {\n                fill(0, 255, 0);\n                if(mouseX > 188 && mouseX < 288 && mouseY > 311 && mouseY < 351) {\n                    fill(84, 255, 110);\n                    if(mouseWasPressed) {\n                        pickPower++;\n                        totalMoney -= damageCosts[damageLevel];\n                        damageLevel++;\n                    }\n                }\n            }\n            rect(188,311,100,40,10);\n            fill(0, 0, 0);\n            text(\"$\" + damageCosts[damageLevel],236,338);\n            textAlign(LEFT);\n            fill(186, 186, 186);\n            if(mouseX > 100 && mouseX < 300 && mouseY > 400 && mouseY < 500) {\n                fill(255, 255, 255);\n                if(mouseWasPressed && time > 5) {\n                    time = 0;\n                    durability = maxDurability;\n                    moved = 0;\n                    blocks = [];\n                    for(var i = 0; i < 17; i++) {\n                        blocks.push([]);\n                        for(var j = 0; j < 10; j++) {\n                            if(i < 5) {\n                                blocks[i].push(new air(j,i));\n                            } else {\n                                blocks[i].push(new dirt(j,i));\n                            }\n                        }\n                    }\n                    randomNoise = random(0,10000);\n                    Shop = false;\n                }\n            }\n            rect(100,400,200,100,20);\n            fill(0, 0, 0);\n            textSize(70);\n            text(\"Mine\",124,473);\n            } //the buttons.\n        } //the shop\n        \n        time++;\n        if(money > 1000000 && time < money) {\n            time += 120000;\n        }\n        if(money > 100000 && time < money) {\n            time += 12000;\n        }\n        if(money > 10000 && time < money) {\n            time += 1100;\n        }\n        if(money > 1000 && time < money) {\n            time += 110;\n        }\n        if(money > 100 && time < money) {\n            time += 12;\n            if(time > money) {\n                time = money;\n            }\n        } //time increases, if you have more than $100 this day it increases faster.\n        if(money !== 0 && mouseWasPressed) {\n            skipTime = 300;\n        }\n    } //post-mining screen.\n    } //the game!\n    if(scene === \"title\") {\n        moved+=3;\n        fill(0,0,0,time*2 - 1000);\n        rect(0,0,400,600); // background fades out\n        {\n        pushMatrix();\n        translate(200,250 + sin(time*3)*10000/time);\n        textSize(100);\n        textAlign(CENTER);\n        for(var i = 0; i < 40; i++) {\n            fill(61, 51, 0);\n            text(\"MEGA\",i,i);\n        }\n        for(var i = 0; i < 40; i++) {\n            fill(0, 84, 99);\n            text(\"MINE\",i,i + 90);\n        }\n        fill(255, 213, 0);\n        text(\"MEGA\",0,0);\n        fill(0, 217, 255);\n        text(\"MINE\",0,90);\n        popMatrix();\n        textAlign(LEFT);\n        } //the words\n        {\n        fill(179, 179, 179);\n        if(mouseX > 100 && mouseX < 300 && mouseY > 500 && mouseY < 550) {\n            fill(255, 255, 255);\n            if(mouseWasPressed) {\n                scene = \"game\";\n                moved = 0;\n                blocks = [];\n                for(var i = 0; i < 17; i++) {\n                    blocks.push([]);\n                    for(var j = 0; j < 10; j++) {\n                        if(i < 5) {\n                            blocks[i].push(new air(j,i));\n                        } else {\n                            blocks[i].push(new dirt(j,i));\n                        }\n                    }\n                }\n                time = 0;\n            }\n        }\n        rect(100,500,200,50,10);\n        fill(0, 0, 0);\n        textSize(30);\n        text(\"Play\",173,536);\n        } //the button\n        time++;\n    } //the title screen.\n    {\n    mouseWasPressed = false;\n    if(blah !== 0) {\n        background(255, 0, 0);\n        fill(0, 0, 0);\n        textSize(50);\n        text(\"u r hacker\",50,50);\n    } \n    if(skipTime > 0) {\n        fill(0, 0, 0);\n        stroke(46, 46, 46, skipTime);\n        strokeWeight(2);\n        arc(318,550,20,20,90,271);\n        rect(320,540,80,20);\n        noStroke();\n        rect(318,541,80,18);\n        fill(255, 255, 255, skipTime);\n        textSize(10);\n        text(\"Any key to skip\",320,553);\n        skipTime--;\n        stroke(0, 0, 0);\n        strokeWeight(1);\n        if(keyIsPressed) {\n            if(scene === \"logo\") {\n                time = 950;\n            }\n            if(scene === \"game\") {\n                time = 1000000000000;\n                totalMoney += money;\n                money = 0;\n            }\n            skipTime = 0;\n        }\n    }\n    } //other stuff\n}; //very important, what to do every frame.\n\n{\nvar mouseMoved = function() {\n    if(money > 0) {mouseY += moved;}\n};\n\nvar mouseDragged = function() {\n    if(money > 0) {mouseY += moved;}\n};\n} //aligns mouse with the world.\n\nvar mousePressed = function() {\n    mouseWasPressed = true;\n}; //triggers a variable that is easier to use in my code than \"mouseIsPressed.\"\n";
window.liveEditor = new LiveEditor({
                el: $("#sample-live-editor"),
                code: code,
                width: 400,
                height: 400,
                editorHeight: "80%",
                autoFocus: true,
                workersDir: "../../build/workers/",
                externalsDir: "../../build/external/",
                imagesDir: "../../build/images/",
                soundsDir: "../../sounds/",
                execFile: outputUrl,
                jshintFile: "../../build/external/jshint/jshint.js",
                newErrorExperience: true,
            });
            liveEditor.editor.on("change", function() {
                window.localStorage["test-code"] = liveEditor.editor.text();
            });
            ScratchpadAutosuggest.init(liveEditor.editor.editor);
            </script>
        </body>
        </html>
        