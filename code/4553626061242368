
// Animation made at https://www.khanacademy.org/partner-content/pixar/animate/ball/a/saving-your-animation

frameRate(24);
var n = 93;
var xArray = [0,10,20,28,36,44,51,57,64,69,75,81,85,90,95,100,104,109,113,116,121,124,128,131,135,138,142,145,148,152,155,158,161,164,167,169,172,175,178,181,184,186,189,192,195,197,200,203,205,208,211,214,216,219,222,225,228,231,233,236,239,242,245,248,252,255,258,262,265,269,272,276,279,284,287,291,296,300,305,310,315,319,325,331,336,343,349,356,364,372,380,390,400];
var yArray = [155,155,155,155,155,155,155,155,155,156,156,156,157,157,158,158,159,160,161,162,163,165,166,168,170,172,175,177,180,184,187,191,196,201,206,212,218,225,233,242,252,263,275,289,305,305,305,305,305,297,290,283,276,270,264,258,252,247,241,236,231,227,222,218,213,209,205,202,198,195,191,188,185,182,179,177,174,172,170,168,166,164,163,161,160,159,158,157,156,156,155,155,155];
var sArray = [50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,50,50,50,50,50,50,50,49,49,43,37,31,26,32,38,42,46,49,51,53,55,57,58,59,59,60,60,61,61,61,60,60,60,60,59,59,58,58,57,57,56,56,55,54,54,53,53,52,52,51,51,51,51,50,50,50,50];
var rArray = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,3,3,3,3,4,4,4,5,5,6,6,7,7,8,9,9,10,11,13,14,12,11,10,9,8,8,7,7,7,7,8,8,9,10,11,12,14,16,17,19,21,24,26,29,32,34,37,41,44,47,51,55,59,63,67,72,76,81,85,90];

var ball = getImage('pixar/luxoball');

var drawBall = function(img, x, y, r, s) {
	s = map(s, 0, 100, 0.1, 1.9);
	var rx = 32 * (2 - s);
	var ry = 32 * s;

	// Shadow
	pushMatrix();
	translate(x + 1, y - ry / 2 + 1);
	rotate(r);
	noStroke();
	fill(0, 0, 0, 60);
	ellipse(0, 0, rx - 3, ry - 3);
	popMatrix();

	// Ball
	pushMatrix();
	translate(x, y - ry / 2);
	rotate(r);
	image(img, -rx/2, -ry/2, rx, ry);
	popMatrix();
};

draw = function() {
	background(0);
	fill(230, 240, 255);
	noStroke();
	rect(-1, 75, width + 2, 250);
	fill(120, 200, 160);
	rect(-1, 305, width + 2, 20);
	strokeWeight(2);
	stroke(28, 173, 123);
	line(-1, 305, width + 1, 305);

	var x = xArray[frameCount % n];
	var y = yArray[frameCount % n];
	var r = rArray[frameCount % n];
	var s = sArray[frameCount % n];
	drawBall(ball, x, y, r, s);
};
